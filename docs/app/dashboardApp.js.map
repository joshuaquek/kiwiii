{"version":3,"file":"dashboardApp.js","sources":["../../src/common/client.js","../../src/common/misc.js","../../src/common/legacySchema.js","../../src/common/idb.js","../../src/common/fetcher.js","../../src/common/mapper.js","../../src/common/collection.js","../../src/common/file.js","../../src/common/specs.js","../../src/component/badge.js","../../src/component/button.js","../../src/component/modal.js","../../src/component/tree.js","../../src/component/formBox.js","../../src/component/shape.js","../../src/component/formListBox.js","../../src/dialog/search.js","../../src/component/dropdown.js","../../src/dialog/formGroup.js","../../src/dialog/struct.js","../../src/dialog/filter.js","../../src/dialog/screener.js","../../src/dialog/sdf.js","../../src/dialog/rename.js","../../src/datagrid/component.js","../../src/datagrid/rowFactory.js","../../src/common/image.js","../../src/datagrid/state.js","../../src/datagrid/rowFilter.js","../../src/datagrid/sort.js","../../src/datagrid/table.js","../../src/dashboardApp.js"],"sourcesContent":["\n/** @module common/client */\n\nimport _ from 'lodash';\n\n\nfunction URLQuery() {\n  const pairs = window.location.search.substring(1).split(\"&\")\n    .map(e => e.split('='));\n  return _.fromPairs(pairs);\n}\n\n\nfunction compatibility() {\n  if (!window.indexedDB) {\n    return 'Client compatibility error: IndexedDB not supported';\n  }\n  try {\n    () => {};\n  } catch (err) {\n    return 'Client compatibility error: Arrow function not supported';\n  }\n  try {\n    FormData;\n  } catch (err) {\n    return 'Client compatibility error: FormData not supported';\n  }\n  try {\n    fetch;\n  } catch (err) {\n    return 'Client compatibility error: fetch API not supported';\n  }\n}\n\n\nfunction registerServiceWorker() {\n  if ('serviceWorker' in navigator) {\n    if (!isDebugBuild) {  // Grobal isDebugBuild (see rollup.js)\n      window.addEventListener('load', () => {\n        navigator.serviceWorker.register('../sw.js');  // TODO: root path option\n      });\n    } else {\n      console.info('Service worker is disabled for debugging');\n    }\n  } else {\n    console.info('Service worker is not supported');\n  }\n}\n\n\nfunction registerCtrlCommand(key, callback) {\n  document.addEventListener('keydown', event => {\n    if (event.ctrlKey && event.key === key) {\n      callback();\n    }\n  });\n}\n\n\nexport default {\n  URLQuery, compatibility, registerServiceWorker, registerCtrlCommand\n};\n","\n/** @module common/misc */\n\nimport d3 from 'd3';\n\n\n// TODO: re-define\nfunction sortType(fmt) {\n  if (['numeric', 'd3_format'].includes(fmt)) return 'numeric';\n  if (['text', 'compound_id', 'assay_id', 'list'].includes(fmt)) return 'text';\n  if (['text_field', 'checkbox', 'html'].includes(fmt)) return 'html';\n  return 'none';\n}\n\n\n/**\n * Format number\n * @param {object} value - value\n * @param {string} type - si | scientific | rounded | raw\n */\nfunction formatNum(value, d3format) {\n  if (value === undefined || value === null || Number.isNaN(value)) return '';\n  return value == parseFloat(value) ? d3.format(d3format)(value) : value;\n}\n\n\nfunction partialMatch(query, target) {\n  if (target === undefined || target === null || target === '') return false;\n  return target.toString().toUpperCase()\n    .indexOf(query.toString().toUpperCase()) !== -1;\n}\n\n\n// Ref. https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\nfunction uuidv4() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\n\nexport default {\n  sortType, formatNum, partialMatch, uuidv4\n};\n","\n/** @module common/legacySchema */\n\nimport d3 from 'd3';\n\n\nconst statusConv = {\n  Queued: 'ready',\n  'In progress': 'running',\n  Aborting: 'running',\n  Aborted: 'aborted',\n  Completed: 'done',\n  Failure: 'failure'\n};\n\nconst dataTypeConv = {\n  datatable: 'nodes',\n  connection: 'edges'\n};\n\nfunction v07_to_v08_nodes(json) {\n  const fields = json.columns.map(e => {\n    if (e.sort === 'numeric') {\n      e.format = 'numeric';\n    } else if (e.sort === 'text') {\n      e.format = 'text';\n    } else if (e.sort === 'none') {\n      e.format = 'raw';\n    }\n    return e;\n  });\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    status: statusConv[json.status],\n    fields: fields,\n    records: json.records,\n    query: json.query,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n  };\n}\n\nfunction v07_to_v08_edges(json, nodeFields) {\n  const snp = {\n    fieldTransform: json.snapshot.fieldTransform,\n    nodePositions: json.snapshot.nodePositions,\n    nodeColor: {},\n    nodeSize: {},\n    nodeLabel: {},\n    edge: {}\n  };\n  if (json.snapshot.hasOwnProperty('nodeColor')) {\n    snp.nodeColor.id = json.snapshot.nodeColor.id;\n    snp.nodeColor.scale = json.snapshot.nodeColor.scale;\n    snp.nodeColor.field = nodeFields.find(e => e.key === json.snapshot.nodeColor.column);\n  } else {\n    snp.nodeColor = {\n      id: 'color', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeSize')) {\n    snp.nodeSize.id = json.snapshot.nodeSize.id;\n    snp.nodeSize.scale = json.snapshot.nodeSize.scale;\n    snp.nodeSize.field = nodeFields.find(e => e.key === json.snapshot.nodeSize.column);\n  } else {\n    snp.nodeSize = {\n      id: 'size', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: [20, 20], unknown: 20}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeLabel')) {\n    snp.nodeLabel.id = json.snapshot.nodeLabel.id;\n    snp.nodeLabel.size = json.snapshot.nodeLabel.size;\n    snp.nodeLabel.text = json.snapshot.nodeLabel.text;\n    snp.nodeLabel.visible = json.snapshot.nodeLabel.visible;\n    snp.nodeLabel.scale = json.snapshot.nodeLabel.scale;\n    snp.nodeLabel.field = nodeFields.find(e => e.key === json.snapshot.nodeLabel.column);\n  } else {\n    snp.nodeLabel = {\n      id: 'label', size: 12, text: 'index', visible: false, field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeContent')) {\n    snp.nodeContent = json.snapshot.nodeContent;\n  } else {\n    snp.nodeContent = {structure: {visible: false}};\n  }\n  if (json.snapshot.hasOwnProperty('edge')) {\n    snp.edge = json.snapshot.edge;\n  } else {\n    snp.edge = {\n      id: 'label', label: {size: 10, visible: false}, visible: true,\n      scale: {scale: 'linear', domain: [0, 1], range: [5, 5], unknown: 5}\n    };\n  }\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    reference: {\n      nodes: json.nodeTableId\n    },\n    status: statusConv[json.status],\n    fields: [\n      {'key': 'source'},\n      {'key': 'target'},\n      {'key': 'weight'}\n    ],\n    records: json.records,\n    query: json.query,\n    networkThreshold: json.networkThreshold,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n    snapshot: snp\n  };\n}\n\n\nfunction v08_nodes(json) {\n  json.records.forEach((e, i) => {\n    e.index = i;\n    e.structure = e._structure;\n    delete e._index;\n    delete e._structure;\n  });\n  json.fields.forEach(e => {\n    if (e.key === '_index') e.key = 'index';\n    if (e.key === '_structure') e.key = 'structure';\n    if (e.sort === 'numeric') e.format = 'numeric';\n    if (e.sort === 'text') e.format = 'text';\n    if (e.sort === 'none') e.format = 'raw';\n  });\n  return json;\n}\n\nfunction v08_graph(json) {\n  if (!json.edges.hasOwnProperty('reference')) { // ver0.8.0-0.8.1\n    json.edges.reference = {nodes: json.edges.nodesID};\n  }\n  if (json.nodes.fields.find(e => e.key === '_index')) {\n    const idx_converter = {};\n    json.nodes.records.forEach((e, i) => {\n        e.index = i;\n        e.structure = e._structure;\n        idx_converter[e._index] = e.index;\n        delete e._index;\n        delete e._structure;\n    });\n    json.edges.records.forEach(e => {\n        e.source = idx_converter[e.source];\n        e.target = idx_converter[e.target];\n    });\n    json.nodes.fields.forEach(e => {\n      if (e.key === '_index') e.key = 'index';\n      if (e.key === '_structure') e.key = 'structure';\n      if (e.sort === 'numeric') e.format = 'numeric';\n      if (e.sort === 'text') e.format = 'text';\n      if (e.sort === 'none') e.format = 'raw';\n    });\n  }\n  return json;\n}\n\nfunction v10_nodes(json) {\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: json.dataType,\n    schemaVersion: '0.10',\n    revision: json.revision,\n    status: json.status,\n    fields: json.fields,\n    records: json.records,\n    query: json.query,\n    progress: json.progress,\n    execTime: json.execTime,\n    created: json.created,\n    reference: {}\n  };\n}\n\n\nfunction v10_edges(json) {\n  const snapshot = {\n    networkThreshold: json.networkThreshold\n  };\n  snapshot.nodeContentVisible = json.snapshot.nodeContent.structure.visible;\n  snapshot.nodeColor = json.snapshot.nodeColor.scale || {};\n  if (snapshot.nodeColor.field) {\n    snapshot.nodeColor.field = json.snapshot.nodeColor.field.key;\n    if (snapshot.nodeColor.field === '_index') {\n      snapshot.nodeColor.field = 'index';\n    }\n  }\n  if (snapshot.nodeColor.scale === 'ordinal') {\n    snapshot.nodeColor.range = d3.schemeCategory20;\n  }\n  snapshot.nodeSize = json.snapshot.nodeSize.scale || {};\n  if (json.snapshot.nodeSize.field) {\n    snapshot.nodeSize.field = json.snapshot.nodeSize.field.key;\n    if (snapshot.nodeSize.field === '_index') {\n      snapshot.nodeSize.field = 'index';\n    }\n  }\n  snapshot.nodeLabel = {};\n  if (json.snapshot.nodeLabel.text) {\n    snapshot.nodeLabel.text = json.snapshot.nodeLabel.text.key;\n    if (snapshot.nodeLabel.text === '_index') {\n      snapshot.nodeLabel.text = 'index';\n    }\n  }\n  snapshot.nodeLabel.size = json.snapshot.nodeLabel.size;\n  snapshot.nodeLabel.visible = json.snapshot.nodeLabel.visible;\n  snapshot.nodeLabelColor = json.snapshot.nodeLabel.scale || {};\n  if (json.snapshot.nodeLabel.field) {\n    snapshot.nodeLabelColor.field = json.snapshot.nodeLabel.field.key;\n    if (snapshot.nodeLabelColor.field === '_index') {\n      snapshot.nodeLabelColor.field = 'index';\n    }\n  }\n  if (snapshot.nodeLabelColor.scale === 'ordinal') {\n    snapshot.nodeLabelColor.range = d3.schemeCategory20;\n  }\n  snapshot.edgeVisible = json.snapshot.edge.visible;\n  snapshot.edgeWidth = json.snapshot.edge.scale || {};\n  snapshot.edgeLabel = {};\n  snapshot.edgeLabel.size = json.snapshot.edge.label.size;\n  snapshot.edgeLabel.visible = json.snapshot.edge.label.visible;\n  snapshot.networkThreshold = json.networkThreshold || json.query.threshold;\n  snapshot.coords = json.snapshot.nodePositions;\n  // TODO: when created date is lost\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: json.dataType,\n    schemaVersion: '0.10',\n    revision: json.revision,\n    status: json.status,\n    fields: json.fields,\n    records: json.records,\n    query: {params: json.query},\n    progress: json.progress,\n    execTime: json.execTime,\n    created: json.created,\n    snapshot: snapshot,\n    reference: json.reference\n  };\n}\n\nfunction convertTable(json) {\n  let data = json;\n  if (!(data.hasOwnProperty('schemaVersion') || data.hasOwnProperty('$schema'))) { // v0.7\n    data = v07_to_v08_nodes(data);\n  }\n  if (data.schemaVersion == '0.8') {\n    data = v08_nodes(data);\n    data = v10_nodes(data);\n  }\n  if (!data.hasOwnProperty('$schema')) {\n    delete data.schemaVersion;\n    delete data.revision;\n    data.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n  }\n  data.fields.forEach(e => {\n    if (e.key === 'structure') {\n      e.format = 'svg';\n    }\n    delete e.width;\n    delete e.height;\n  });\n  return data;\n}\n\nfunction convertNetwork(json) {\n  let data = json;\n  if (!(data.edges.hasOwnProperty('schemaVersion') || data.edges.hasOwnProperty('$schema'))) { // v0.7\n    data.nodes = v07_to_v08_nodes(data.nodes);\n    data.edges = v07_to_v08_edges(data.edges, data.nodes.fields);\n  }\n  if (data.edges.schemaVersion == '0.8' || data.edges.schemaVersion === 0.1) {  // wrong conversion of '0.10'\n    data = v08_graph(data);\n    data.nodes = v10_nodes(data.nodes);\n    data.edges = v10_edges(data.edges);\n  }\n  if (!data.edges.hasOwnProperty('$schema')) {\n    delete data.nodes.schemaVersion;\n    delete data.edges.schemaVersion;\n    delete data.nodes.revision;\n    delete data.edges.revision;\n    data.nodes.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n    data.edges.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n  }\n  return data;\n}\n\n\nfunction convertPackage(json) {\n  let specs = {};\n  if (!json.hasOwnProperty('views')) {\n    const now = new Date();\n    const isNW = json.hasOwnProperty('edges');\n    const data = isNW ? convertNetwork(json) : convertTable(json);\n    const nodes = isNW ? data.nodes : data;\n    specs = {\n      $schema: \"https://mojaie.github.io/kiwiii/specs/package_v1.0.json\",\n      name: data.edges.name,\n      views: [],\n      dataset: []\n    };\n    specs.dataset.push({\n      $schema: \"https://mojaie.github.io/kiwiii/specs/collection_v1.0.json\",\n      collectionID: nodes.id,\n      name: nodes.name,\n      contents: [{\n        $schema: nodes.$schema,\n        workflowID: nodes.reference.workflow,\n        name: nodes.name,\n        fields: nodes.fields,\n        records: nodes.records,\n        created: nodes.created,\n        status: nodes.status,\n        query: nodes.query,\n        execTime: nodes.execTime,\n        progress: nodes.progress\n      }]\n    });\n    specs.views.push({\n      $schema: \"https://mojaie.github.io/kiwiii/specs/datagrid_v1.0.json\",\n      viewID: nodes.id,\n      name: nodes.name,\n      viewType: \"datagrid\",\n      rows: nodes.id,\n      fields: nodes.fields,\n      sortOrder: null,\n      filterText: null,\n      checkpoints: [{\n        type: 'convert',\n        date: now.toString(),\n        description: 'converted from legacy format'\n      }]\n    });\n    if (isNW) {\n      specs.dataset.push({\n        $schema: \"https://mojaie.github.io/kiwiii/specs/collection_v1.0.json\",\n        collectionID: data.edges.id,\n        name: data.edges.name,\n        contents: [{\n          $schema: data.edges.$schema,\n          workflowID: data.edges.reference.workflow,\n          name: data.edges.name,\n          fields: data.edges.fields,\n          records: data.edges.records,\n          created: data.edges.created,\n          status: data.edges.status,\n          query: data.edges.query,\n          execTime: data.edges.execTime,\n          progress: data.edges.progress\n        }]\n      });\n      specs.views.push({\n        $schema: \"https://mojaie.github.io/kiwiii/specs/network_v1.0.json\",\n        viewID: data.edges.id,\n        name: data.edges.name,\n        viewType: \"network\",\n        nodes: nodes.id,\n        edges: data.edges.id,\n        nodeColor: data.edges.snapshot.nodeColor,\n        nodeSize: data.edges.snapshot.nodeSize,\n        nodeLabel: data.edges.snapshot.nodeLabel,\n        nodeLabelColor: data.edges.snapshot.nodeLabelColor,\n        edgeWidth: data.edges.snapshot.edgeWidth,\n        edgeLabel: data.edges.snapshot.edgeLabel,\n        networkThreshold: data.edges.snapshot.networkThreshold,\n        networkThresholdCutoff: data.edges.snapshot.networkThresholdCutoff,\n        fieldTransform: data.edges.snapshot.fieldTransform,\n        coords: data.edges.snapshot.coords,\n        checkpoints: [{\n          type: 'convert',\n          date: now.toString(),\n          description: 'converted from legacy format'\n        }]\n      });\n    }\n    specs.views.filter(e => e.viewType === 'network')\n      .forEach(view => {\n        view.minConnThld = view.networkThresholdCutoff;\n        view.currentConnThld = view.networkThreshold;\n        if (view.hasOwnProperty('nodeLabel')) {\n          view.nodeLabel.field = view.nodeLabel.text;\n        }\n        if (view.hasOwnProperty('edgeLabel')) {\n          view.edgeLabel.field = 'weight';\n        }\n        if (view.hasOwnProperty('edgeWidth')) {\n          view.edgeWidth.field = 'weight';\n        }\n      });\n  } else {\n    specs = json;\n  }\n  specs.views.filter(e => e.viewType === 'network')\n    .forEach(view => {\n      if (!view.nodeColor.field) { view.nodeColor.field = 'index' ;}\n      if (!view.nodeSize.field) { view.nodeSize.field = 'index' ;}\n      if (!view.nodeLabel.field) { view.nodeLabel.field = 'index' ;}\n      if (!view.nodeLabelColor.field) { view.nodeLabelColor.field = 'index' ;}\n      if (!view.edgeColor) {\n        view.edgeColor = {\n          field: 'weight', color: 'monogray',\n          scale: 'linear', domain: [0, 1],\n          range: ['#999999', '#999999'], unknown: '#cccccc'\n        };\n      } else if (!view.edgeColor.field) { view.edgeColor.field = 'weight' ;}\n      if (!view.edgeWidth.field) { view.edgeWidth.field = 'weight' ;}\n      if (!view.edgeLabel.field) { view.edgeLabel.field = 'weight' ;}\n      if (!view.edgeLabelColor) {\n        view.edgeLabelColor = {\n          field: 'weight', color: 'monoblack',\n          scale: 'linear', domain: [1, 1],\n          range: ['#333333', '#333333'], unknown: '#cccccc'\n        };\n      } else if (!view.edgeLabelColor.field) { view.edgeLabelColor.field = 'weight' ;}\n    });\n  return specs;\n}\n\n\nexport default {\n  convertPackage\n};\n","\n/** @module common/idb */\n\nimport _ from 'lodash';\n\nimport {default as misc} from './misc.js';\nimport {default as legacy} from './legacySchema.js';\n\n\n// Increment versions if IDB schema has updated.\nconst pkgStoreVersion = 2;\nconst assetStoreVersion = 1;\n\n\nfunction connect(name, version, createObj) {\n  return new Promise((resolve, reject) => {\n    const request = window.indexedDB.open(name, version);\n    request.onsuccess = function () {\n      resolve(this.result);\n    };\n    request.onerror = event => reject(event);\n    request.onupgradeneeded = event => {\n      createObj(event.currentTarget.result);\n    };\n  });\n}\n\n\nconst instance = {\n  pkgs: connect(\"Packages\", pkgStoreVersion, db => {\n    db.createObjectStore(\"Packages\", {keyPath: 'id'});\n  }),\n  assets: connect(\"Assets\", assetStoreVersion, db => {\n    db.createObjectStore(\"Assets\", {keyPath: 'key'});\n  })\n};\n\n\n/**\n * Clear database\n * @param {string} dbid - database ID\n */\nfunction clear(dbid) {\n  return new Promise((resolve, reject) => {\n    return instance[dbid].then(db => {\n      const req = db.transaction(db.name, 'readwrite')\n          .objectStore(db.name).clear();\n        req.onsuccess = () => resolve();\n        req.onerror = event => reject(event);\n    });\n  });\n}\n\n\n/**\n * Delete all data in the local storage\n */\nfunction clearAll() {\n  return Promise.all([clear('pkgs'), clear('assets')]);\n}\n\n\n/**\n * Returns all packages\n * @return {Promise} Promise of list of packages\n */\nfunction getAllItems() {\n  return new Promise(resolve => {\n    const res = [];\n    return instance.pkgs.then(db => {\n      db.transaction(db.name)\n        .objectStore(db.name).openCursor()\n        .onsuccess = event => {\n          const cursor = event.target.result;\n          if (cursor) {\n            res.push(cursor.value);\n            cursor.continue();\n          } else {\n            resolve(res);\n          }\n        };\n    });\n  });\n}\n\n\n/**\n * Get packages by instance ID\n * @param {string} id - Package instance ID\n * @return {array} data store object\n */\nfunction getItem(id) {\n  return new Promise((resolve, reject) => {\n    return instance.pkgs.then(db => {\n      const req = db.transaction(db.name)\n        .objectStore(db.name).get(id);\n      req.onsuccess = event => resolve(event.target.result);\n      req.onerror = event => reject(event);\n    });\n  });\n}\n\n\n/**\n * Put data object in the store\n * @param {string} value - value to store\n */\nfunction putItem(value) {\n  return new Promise((resolve, reject) => {\n    return instance.pkgs.then(db => {\n      const obj = db.transaction(db.name, 'readwrite')\n        .objectStore(db.name);\n      const req = obj.put(value);\n      req.onerror = event => reject(event);\n      req.onsuccess = () => resolve();\n    });\n  });\n}\n\n\n/**\n * Update package in the store\n * @param {string} id - Package instance ID\n * @param {function} updater - update function\n */\nfunction updateItem(id, updater) {\n  return new Promise((resolve, reject) => {\n    return instance.pkgs.then(db => {\n      const obj = db.transaction(db.name, 'readwrite')\n        .objectStore(db.name);\n      const req = obj.get(id);\n      req.onerror = event => reject(event);\n      req.onsuccess = event => {\n        const res = event.target.result;\n        updater(res);\n        const upd = obj.put(res);\n        upd.onsuccess = () => resolve();\n        upd.onerror = event => reject(event);\n      };\n    });\n  });\n}\n\n\n/**\n * Delete a package\n * @param {string} id - Package instance ID\n */\nfunction deleteItem(id) {\n  return new Promise((resolve, reject) => {\n    return instance.pkgs.then(db => {\n      const req = db.transaction(db.name, 'readwrite')\n        .objectStore(db.name).delete(id);\n      req.onerror = event => reject(event);\n      req.onsuccess = () => resolve();\n    });\n  });\n}\n\n\n/**\n * Returns a view\n * @param {string} id - Package instance ID\n * @param {string} viewID - view ID\n * @return {array} view objects\n */\nfunction getView(id, viewID) {\n  return getItem(id)\n    .then(pkg => pkg.views.find(e => e.viewID === viewID));\n}\n\n\n/**\n * Append a view next to a specific view\n * @param {string} id - Package instance ID\n * @param {string} viewID - view ID\n * @param {object} viewObj - view object\n */\nfunction appendView(id, viewID, viewObj) {\n  return updateItem(id, item => {\n    const pos = item.views.findIndex(e => e.viewID === viewID);\n    item.views.splice(pos + 1, 0, viewObj);\n  });\n}\n\n\n/**\n * Update view\n * @param {string} id - Package instance ID\n * @param {string} viewID - view ID\n * @param {object} viewObj - view object or update function\n */\nfunction updateView(id, viewID, viewObj) {\n  return updateItem(id, item => {\n    const pos = item.views.findIndex(e => e.viewID === viewID);\n    if (_.isFunction(viewObj)) {\n      viewObj(item.views[pos]);\n    } else {\n      item.views[pos] = viewObj;\n    }\n  });\n}\n\n\n/**\n * Delete a data object from the store\n * @param {string} id - Package instance ID\n * @return {integer} - number of deleted items\n */\nfunction deleteView(id, viewID) {\n  return updateItem(id, item => {\n    const pos = item.views.findIndex(e => e.viewID === viewID);\n    item.views.splice(pos, 1);\n    // prune orphaned collections\n    const bin = {};\n    item.dataset.forEach(e => { bin[e.collectionID] = 0; });\n    item.views.forEach(view => {\n      ['rows', 'items', 'nodes', 'edges']\n        .filter(e => view.hasOwnProperty(e))\n        .forEach(e => { bin[view[e]] += 1; });\n    });\n    Object.entries(bin).forEach(entry => {\n      if (!entry[1]) {\n        const i = item.dataset.findIndex(e => e.collectionID === entry[0]);\n        item.dataset.splice(i, 1);\n      }\n    });\n  });\n}\n\n\n/**\n * Returns all collections in the store\n * @return {array} Collection objects\n */\nfunction getAllCollections() {\n  return getAllItems()\n    .then(items => _.flatten(\n      items.map(item => {\n        return item.dataset.map(coll => {\n          coll.instance = item.id;\n          return coll;\n        });\n      })\n    ));\n}\n\n\n/**\n * Returns a collection\n * @param {string} id - Package instance ID\n * @param {string} collID - Collection ID\n * @return {array} Collection objects\n */\nfunction getCollection(id, collID) {\n  return getItem(id)\n    .then(pkg => pkg.dataset.find(e => e.collectionID === collID));\n}\n\n\nfunction addCollection(id, collID, collObj) {\n  return updateItem(id, item => {\n    item.dataset.push(collObj);\n  });\n}\n\n/**\n * Update collection\n * @param {string} id - Package instance ID\n * @param {string} collID - Collection ID\n * @param {object} collObj - Collection object or update function\n */\nfunction updateCollection(id, collID, collObj) {\n  return updateItem(id, item => {\n    const pos = item.dataset.findIndex(e => e.collectionID === collID);\n    if (_.isFunction(collObj)) {\n      collObj(item.dataset[pos]);\n    } else {\n      item.dataset[pos] = collObj;\n    }\n  });\n}\n\n\n/**\n * Insert a data object to the store\n * @param {object} data - data\n * @return {string} - id if sucessfully added\n */\nfunction importItem(data) {\n  // Legacy format converter\n  data = legacy.convertPackage(data);\n\n  const now = new Date();\n  data.id = misc.uuidv4().slice(0, 8);\n  data.sessionStarted = now.toString();\n  return putItem(data);\n}\n\n\n/**\n * Insert a data object to the store\n * @param {object} response - response data\n * @return {string} - viewID if sucessfully added\n */\nfunction newDatagrid(response) {\n  const now = new Date();\n  const date = now.toLocaleString('en-GB', { timeZone: 'Asia/Tokyo'});\n  const instance = misc.uuidv4().slice(0, 8);\n  const viewID = misc.uuidv4().slice(0, 8);\n  const collectionID = response.workflowID.slice(0, 8);\n  const data = {\n    $schema: \"https://mojaie.github.io/kiwiii/specs/package_v1.0.json\",\n    id: instance,\n    name: response.name,\n    views: [\n      {\n        $schema: \"https://mojaie.github.io/kiwiii/specs/datagrid_v1.0.json\",\n        viewID: viewID,\n        name: response.name,\n        viewType: \"datagrid\",\n        rows: collectionID,\n        checkpoints: [\n          {type: 'creation', date: date}\n        ]\n      }\n    ],\n    dataset: [\n      {\n        $schema: \"https://mojaie.github.io/kiwiii/specs/collection_v1.0.json\",\n        collectionID: collectionID,\n        name: response.name,\n        contents: [response]\n      }\n    ],\n    sessionStarted: date\n  };\n  return putItem(data)\n    .then(() => ({instance: instance, viewID:viewID}));\n}\n\n\nfunction addDatagrid(instance, response) {\n  const viewID = misc.uuidv4().slice(0, 8);\n  const collectionID = response.workflowID.slice(0, 8);\n  return updateItem(instance, item => {\n    item.views.push({\n      $schema: \"https://mojaie.github.io/kiwiii/specs/datagrid_v1.0.json\",\n      viewID: viewID,\n      name: response.name,\n      viewType: \"datagrid\",\n      rows: collectionID,\n    });\n    item.dataset.push({\n      $schema: \"https://mojaie.github.io/kiwiii/specs/collection_v1.0.json\",\n      collectionID: collectionID,\n      name: response.name,\n      contents: [response]\n    });\n  }).then(() => viewID);\n}\n\n\nfunction new384Tiles(response) {\n  const now = new Date();\n  const date = now.toLocaleString('en-GB', { timeZone: 'Asia/Tokyo'});\n  const instance = misc.uuidv4().slice(0, 8);\n  const viewID = misc.uuidv4().slice(0, 8);\n  const collectionID = response.workflowID.slice(0, 8);\n  const data = {\n    $schema: \"https://mojaie.github.io/kiwiii/specs/package_v1.0.json\",\n    id: instance,\n    name: response.name,\n    views: [\n      {\n        $schema: \"https://mojaie.github.io/kiwiii/specs/tile_v1.0.json\",\n        viewID: viewID,\n        name: `${response.name}_tiles`,\n        viewType: 'tile',\n        items: collectionID,\n        rowCount: 16,\n        columnCount: 24\n      }\n    ],\n    dataset: [\n      {\n        $schema: \"https://mojaie.github.io/kiwiii/specs/collection_v1.0.json\",\n        collectionID: collectionID,\n        name: response.name,\n        contents: [response]\n      }\n    ],\n    sessionStarted: date\n  };\n  return putItem(data)\n    .then(() => ({instance: instance, viewID:viewID}));\n}\n\n\nfunction add384Tiles(instance, response) {\n  const viewID = misc.uuidv4().slice(0, 8);\n  const collectionID = response.workflowID.slice(0, 8);\n  return updateItem(instance, item => {\n    item.views.push({\n      $schema: \"https://mojaie.github.io/kiwiii/specs/tile_v1.0.json\",\n      viewID: viewID,\n      name: `${response.name}_tiles`,\n      viewType: 'tile',\n      items: collectionID,\n      rowCount: 16,\n      columnCount: 24,\n      chunksPerRow: 10\n    });\n    item.dataset.push({\n      $schema: \"https://mojaie.github.io/kiwiii/specs/collection_v1.0.json\",\n      collectionID: collectionID,\n      name: response.name,\n      contents: [response]\n    });\n  }).then(() => viewID);\n}\n\n\n/**\n * Store new network view\n * @param {string} instance - Package instance ID\n * @param {string} nodesID - ID of nodes collection\n * @param {string} nodesName - Name of nodes collection\n * @param {object} response - Response object\n */\nfunction newNetwork(instance, nodesID, nodesName, response) {\n  const viewID = misc.uuidv4().slice(0, 8);\n  const edgesID = response.workflowID.slice(0, 8);\n  return updateItem(instance, item => {\n    item.views.push({\n      $schema: \"https://mojaie.github.io/kiwiii/specs/network_v1.0.json\",\n      viewID: viewID,\n      name: `${nodesName}_${response.name}`,\n      viewType: 'network',\n      nodes: nodesID,\n      edges: edgesID,\n      minConnThld: response.query.params.threshold\n    });\n    item.dataset.push({\n      $schema: \"https://mojaie.github.io/kiwiii/specs/collection_v1.0.json\",\n      collectionID: edgesID,\n      name: response.name,\n      contents: [response]\n    });\n  }).then(() => viewID);\n}\n\n\n/**\n * Get asset by a key\n * @param {string} key - key\n * @return {array} asset object (if not found, resolve with undefined)\n */\nfunction getAsset(key) {\n  return new Promise((resolve, reject) => {\n    return instance.assets.then(db => {\n      const req = db.transaction(db.name)\n        .objectStore(db.name).get(key);\n      req.onsuccess = event => {\n        const undef = event.target.result === undefined;\n        const value = undef ? undefined : event.target.result.value;\n        resolve(value);\n      };\n      req.onerror = event => reject(event);\n    });\n  });\n}\n\n/**\n * Put asset object with a key\n * @param {string} key - key\n * @param {string} content - asset to store\n */\nfunction putAsset(key, content) {\n  return new Promise((resolve, reject) => {\n    return instance.assets.then(db => {\n      const obj = db.transaction(db.name, 'readwrite')\n        .objectStore(db.name);\n      const req = obj.put({key: key, value: content});\n      req.onerror = event => reject(event);\n      req.onsuccess = () => resolve();\n    });\n  });\n}\n\n\nexport default {\n  clear, clearAll, getAllItems, getItem, updateItem, deleteItem,\n  getView, appendView, updateView, deleteView,\n  getAllCollections, getCollection, addCollection, updateCollection,\n  importItem, newDatagrid, addDatagrid, add384Tiles, newNetwork,\n  getAsset, putAsset\n};\n","\n/** @module common/fetcher */\n\n\nconst baseURL = '../req/';\n\nfunction get(url, query={}) {\n  const isEmpty = Object.keys(query).length;\n  const q = isEmpty ? `?query=${JSON.stringify(query)}` : '';\n  return fetch(\n    `${baseURL}${url}${q}`,\n    {\n      credentials: 'include'\n    }\n  ).then(res => {\n    if (res.status !== 200) {\n      return Promise.reject(new Error(res.statusText));\n    }\n    return Promise.resolve(res);\n  });\n}\n\nfunction json(response) {\n  return response.json();\n}\n\nfunction text(response) {\n  return response.text();\n}\n\nfunction blob(response) {\n  return response.blob();\n}\n\nfunction post(url, formdata) {\n  return fetch(\n    `${baseURL}${url}`,\n    {\n      method: 'POST',\n      body: formdata,\n      credentials: 'include'\n    }\n  ).then(res => {\n    if (res.status !== 200) {\n      return Promise.reject(new Error(res.statusText));\n    }\n    return Promise.resolve(res);\n  });\n}\n\nfunction error(err) {\n  console.error(err);\n  return null;\n}\n\nfunction serverStatus() {\n  const response = {};\n  return get('server')\n    .then(json)\n    .then(res => {\n      response.server = res;\n    })\n    .then(() => get('schema'))\n    .then(json)\n    .then(res => {\n      response.schema = res;\n    })\n    .then(() => response);\n}\n\n\nfunction batchRequest(reqs, interval) {\n  const ress = reqs.map((req, i) => {\n    return new Promise(resolve => {\n      setTimeout(() => resolve(req()), i * interval * 1000);\n    });\n  });\n  return Promise.all(ress);\n}\n\n\nfunction sequentialBatchRequest(reqs, interval) {\n  const ress = [];\n  const batch = reqs.reduce((a, b) => {\n    return a\n      .then(res => {\n        if (res) ress.push(res);\n        return new Promise(resolve => {\n          setTimeout(() => resolve(b()), interval * 1000);\n        });\n      });\n  }, Promise.resolve());\n  return batch.then(() => ress);\n}\n\n\n\nexport default {\n  get, json, text, blob, post, error, serverStatus, batchRequest\n};\n","\n/** @module common/mapper */\n\nimport _ from 'lodash';\n\n\n/**\n * Convert single field mapping to multi field mapping\n * @param {object} mapping - single field mapping\n * @return {object} multi field mapping\n */\nfunction singleToMulti(mapping) {\n  const newMapping = {};\n  Object.entries(mapping.mapping).forEach(m => {\n    newMapping[m[0]] = [m[1]];\n  });\n  return {\n    created: mapping.created,\n    fields: [mapping.field],\n    key: mapping.key,\n    mapping: newMapping\n  };\n}\n\n\n/**\n * Convert field mapping to table\n * @param {object} mapping - field mapping\n * @return {object} table object\n */\nfunction mappingToTable(mapping) {\n  const mp = mapping.hasOwnProperty('field') ? singleToMulti(mapping) : mapping;\n  const keyField = {key: mp.key, format: 'text'};\n  const data = {\n    fields: [keyField].concat(mp.fields),\n    records: Object.entries(mp.mapping).map(entry => {\n      const rcd = {};\n      rcd[mp.key] = entry[0];\n      mp.fields.forEach((f, i) => {\n        rcd[f.key] = entry[1][i];\n      });\n      return rcd;\n    })\n  };\n  return data;\n}\n\n\n/**\n * Convert table to field mapping\n * @param {object} table - table\n * @param {object} key - key\n * @return {object} field mapping\n */\nfunction tableToMapping(table, key, ignore=['index']) {\n  const now = new Date();\n  const mapping = {\n    created: now.toString(),\n    fields: table.fields.filter(e => e.key !== key)\n      .filter(e => !ignore.includes(e.key)),\n    key: key,\n    mapping: {}\n  };\n  table.records.forEach(row => {\n    mapping.mapping[row[key]] = mapping.fields.map(e => row[e.key]);\n  });\n  return mapping;\n}\n\n\n/**\n * Convert csv text to field mapping\n * @param {string} csvString - csv data text\n * @return {object} field mapping\n */\nfunction csvToMapping(csvString) {\n  const lines = csvString.split(/\\n|\\r|\\r\\n/);\n  const header = lines.shift().split(',');\n  const key = header.shift();\n  const now = new Date();\n  const headerIdx = [];\n  const fields = [];\n  header.forEach((h, i) => {\n    if (h === '') return;\n    headerIdx.push(i);\n    fields.push({key: h, format: 'text'});\n  });\n  const mapping = {\n    created: now.toString(),\n    fields: fields,\n    key: key,\n    mapping: {}\n  };\n  lines.forEach(line => {\n    const values = line.split(',');\n    const k = values.shift();\n    mapping.mapping[k] = Array(headerIdx.length);\n    headerIdx.forEach(i => {\n      mapping.mapping[k][i] = values[i];\n    });\n  });\n  return mapping;\n}\n\n\n/**\n * Apply mapping to the data (in-place)\n * @param {object} data - datatable JSON\n * @param {object} mapping - mapping JSON\n * @return {undefined} undefined\n */\nfunction apply(data, mapping) {\n  const mp = mapping.hasOwnProperty('field') ? singleToMulti(mapping) : mapping;\n  data.records\n    .filter(rcd => mp.mapping.hasOwnProperty(rcd[mp.key]))\n    .forEach(rcd => {\n      mp.fields.forEach((fd, i) => {\n        rcd[fd.key] = mp.mapping[rcd[mp.key]][i];\n      });\n    });\n  data.fields =  _(data.fields)\n    .concat(mp.fields)\n    .uniqBy('key')\n    .value();\n}\n\nexport default {\n  singleToMulti, mappingToTable, tableToMapping, csvToMapping, apply\n};\n","\n/** @module common/collection */\n\nimport _ from 'lodash';\n\nimport {default as idb} from './idb.js';\nimport {default as fetcher} from './fetcher.js';\nimport {default as mapper} from './mapper.js';\n\n\nexport default class Collection {\n  /**\n   * Create Collection from a flashflood response datatable\n   * If data is not specified, put datatables later by this.append(data)\n   * @param {object} coll - Collection or response object\n   */\n  constructor(coll) {\n    // Settings\n    this.autoIndex = 'index';  // enumerate records\n\n    this.collectionID = coll.collectionID || null;\n    this.instance = coll.instance || null;\n    this.name = coll.name || null;\n    if (coll.records) {\n      this.contents = [coll];\n      this.fields = [];\n    } else {\n      this.contents = coll.contents;\n      this.fields = coll.fields || [];\n    }\n    this.contents.forEach(content => {\n      content.fields.forEach(e => this.addField(e));\n    });\n  }\n\n  /**\n   * Add fields\n   * @param {array} fs - list of fields\n   */\n  addField(field) {\n    if (this.fields.find(e => e.key === field.key)) return;\n    if (!field.hasOwnProperty('name')) field.name = field.key;\n    if (!field.hasOwnProperty('visible')) field.visible = true;\n    if (field.hasOwnProperty('d3_format')) field.format = 'd3_format';\n    if (!field.hasOwnProperty('format')) field.format = 'raw';\n    this.fields.push(field);\n  }\n\n  /**\n   * Update fields properties\n   * @param {array} fs - list of fields\n   */\n  updateFields(fs) {\n    this.fields = [];\n    fs.forEach(e => this.addField(e));\n  }\n\n  /**\n   * Join fields\n   * @param {object} mapping - column mapper object\n   */\n  joinFields(mapping) {\n    this.contents.forEach(c => {\n      mapper.apply(c, mapping);\n    });\n    if (mapping.hasOwnProperty('fields')) {\n      mapping.fields.forEach(e => this.addField(e));\n    } else {\n      this.addField(mapping.field);\n    }\n  }\n\n  /**\n   * Apply function to the original data records\n   * new fields should be manually added by Collection.addField\n   * @param {function} func - function to be applied\n   */\n  apply(func) {\n    this.contents.forEach(content => {\n      content.records.forEach(rcd => {\n        func(rcd);\n      });\n    });\n  }\n\n  /**\n   * Return all records of the collection\n   * @return {array} records\n   */\n  records() {\n    return _.flatten(this.contents.map(e => e.records));\n  }\n\n  fetch(command) {\n    const fs = this.contents\n      .filter(e => ['running', 'ready', 'interrupted', 'queued'].includes(e.status))\n      .map(content => {\n        const query = {id: content.workflowID, command: command};\n        return fetcher.get('progress', query)\n          .then(fetcher.json)\n          .then(data => {\n            return idb.updateCollection(this.instance, this.collectionID, coll => {\n              const i = coll.contents\n                .findIndex(e => e.workflowID === query.id);\n              if (data.status === 'failure') {  // No data found on server\n                coll.contents[i].status = 'failure';\n              } else {\n                coll.contents[i] = data;\n              }\n            });\n          });\n      });\n    return Promise.all(fs)\n      .then(() => idb.getCollection(this.instance, this.collectionID))\n      .then(coll => {\n        this.contents = coll.contents;\n      });\n  }\n\n  /**\n   * Retrieve workflows and store it into a local store.\n   * @return {Promise}\n   */\n  pull() {\n    return this.fetch('pull');\n  }\n\n  /**\n   * Retrieve workflows, abort all ongoing workflow task\n   * and store it into a local store.\n   * @return {Promise}\n   */\n  abort() {\n    return this.fetch('abort');\n  }\n\n  /**\n   * Return total number of records\n   * @return {float} total number of records\n   */\n  size() {\n    return _.sum(this.contents.map(e => e.records.length));\n  }\n\n  /**\n   * Return status\n   * @return {string} status\n   */\n  status() {\n    if (this.contents.some(e => e.status === 'interrupted')) return 'interrupted';\n    if (this.contents.some(e => e.status === 'running')) return 'running';\n    if (this.contents.some(e => e.status === 'queued')) return 'queued';\n    if (this.contents.some(e => e.status === 'ready')) return 'ready';\n    if (this.contents.some(e => e.status === 'aborted')) return 'aborted';\n    if (this.contents.some(e => e.status === 'failure')) return 'failure';\n    return 'done';\n  }\n\n  /**\n   * Return ongoing or not\n   * @return {bool} ongoing or not\n   */\n  ongoing() {\n    const s = ['ready', 'queued', 'running', 'interrupted'];\n    return s.includes(this.status());\n  }\n\n  /**\n   * Return percentage of workflow progress\n   * @return {float} progress in percent\n   */\n  progress() {\n    return _.min(this.contents.map(e => e.progress));\n  }\n\n  /**\n   * Return total execution time\n   * @return {float} total time\n   */\n  execTime() {\n    return _.sum(this.contents.map(e => e.execTime));\n  }\n\n  /**\n   * Export collection object as JSON\n   * @return {object} collection JSON\n   */\n  export() {\n    return {\n      $schema: \"https://mojaie.github.io/kiwiii/specs/collection_v1.0.json\",\n      collectionID: this.collectionID,\n      name: this.name,\n      fields: this.fields,\n      contents: this.contents\n    };\n  }\n}\n","\n/** @module common/file */\n\nimport pako from 'pako';\n\n\nfunction readFile(file, sizeLimit, blob) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    const truncated = sizeLimit ? file.slice(0, sizeLimit) : file;\n    reader.onload = event => resolve(event.target.result);\n    reader.onerror = error => reject(error);\n    if (blob) {\n      reader.readAsArrayBuffer(truncated);\n    } else {\n      reader.readAsText(truncated);\n    }\n  });\n}\n\n\nfunction parseJSON(data, compressed) {\n  const text = compressed ? pako.inflate(data, {to: 'string'}) : data;\n  return JSON.parse(text);\n}\n\n\nfunction loadJSON(file) {\n  const compressed = file.name.endsWith('c') || file.name.endsWith('.gz');\n  return readFile(file, false, compressed)\n    .then(data => parseJSON(data, compressed));\n}\n\n\nfunction fetchJSON(url) {\n  const decoded = decodeURIComponent(url);\n  const compressed = decoded.endsWith('c') || decoded.endsWith('.gz');\n  return fetch(decoded)\n    .then(res => compressed ? res.arrayBuffer() : res.json())\n    .then(data => parseJSON(data, compressed));\n}\n\n\nfunction downloadDataFile(data, name) {\n  try {\n    // cannot hundle large file with dataURI scheme\n    // url = 'data:application/json,' + encodeURIComponent(JSON.stringify(json))\n    const url = window.URL.createObjectURL(new Blob([data]));\n    const a = document.createElement('a');\n    a.download = name;\n    a.href = url;\n    // a.click() does not work on firefox\n    a.dispatchEvent(new MouseEvent('click', {\n      'view': window,\n      'bubbles': true,\n      'cancelable': false\n    }));\n    // window.URL.revokeObjectURL(url) does not work on firefox\n  } catch (e) {\n    // no DOM (unit testing)\n  }\n}\n\n\nfunction downloadJSON(json, name, compress=true) {\n  const str = JSON.stringify(json);\n  const data = compress ? pako.gzip(str) : str;\n  const ext = `.ap${compress ? 'c' : 'r'}`;\n  downloadDataFile(data, `${name}${ext}`);\n}\n\n\nexport default {\n  readFile, parseJSON, loadJSON, fetchJSON,\n  downloadDataFile, downloadJSON\n};\n","\n/** @module common/specs */\n\nimport _ from 'lodash';\n\n\n/**\n * Retern if the package has running tasks\n * @param {object} specs - package JSON\n * @return {bool} if there are any ongoing tasks\n */\nfunction isRunning(specs) {\n  return specs.dataset.some(coll => {\n    return coll.contents.some(e => {\n      return ['ready', 'queued', 'running', 'interrupted'].includes(e.status);\n    });\n  });\n}\n\n\nexport default {\n  isRunning\n};\n","\n/** @module component/badge */\n\nimport d3 from 'd3';\n\nconst assetBaseURL = '../assets/';\nconst iconBaseURL = '../assets/icon/';\n\n\nfunction badge(selection) {\n  selection.classed('badge', true);\n  selection.append('img')\n      .classed('icon', true)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  selection.append('span')\n      .classed('text', true);\n}\n\n\nfunction updateBadge(selection, text, type, icon) {\n  selection.classed(`badge-${type}`, true);\n  selection.select('.icon')\n      .attr('src', icon ? `${iconBaseURL}${icon}.svg` : null);\n  selection.select('.text')\n      .text(text);\n}\n\n\nfunction notify(selection) {\n  selection\n    .style('opacity', 0)\n    .style('display', 'inline')\n    .transition()\n      .duration(500)\n      .ease(d3.easeLinear)\n      .style(\"opacity\", 1.0)\n    .transition()\n      .delay(3000)\n      .duration(1000)\n      .ease(d3.easeLinear)\n      .style(\"opacity\", 0)\n      .on('end', function () {\n        selection.style('display', 'none');\n      });\n}\n\n\nfunction loadingCircle(selection) {\n  selection\n      .style('display', 'none')\n    .append('img')\n      .attr('src', `${assetBaseURL}loading1.gif`)\n      .style('width', '2rem')\n      .style('height', '2rem');\n}\n\n\nfunction alert(selection) {\n  selection.classed('alert', true)\n      .classed('px-1', true)\n      .classed('py-0', true);\n  selection.append('img')\n      .classed('icon', true)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  selection.append('span')\n      .classed('text', true)\n      .style('font-size', '75%');\n}\n\n\nfunction updateAlert(selection, text, type, icon) {\n  selection.classed(`alert-${type}`, true);\n  selection.select('.icon')\n      .attr('src', icon ? `${iconBaseURL}${icon}.svg` : null);\n  selection.select('.text')\n      .text(text);\n}\n\n\nfunction invalidFeedback(selection) {\n  selection.classed('invalid-feedback', true)\n      .style('display', 'none');\n  selection.append('img')\n      .classed('icon', true)\n      .attr('src', `${iconBaseURL}caution-salmon.svg`)\n      .style('width', '1rem')\n      .style('height', '1rem');\n  selection.append('span')\n      .classed('invalid-msg', true);\n}\n\nfunction updateInvalidMessage(selection, msg) {\n  selection.select('.invalid-msg')\n      .text(msg);\n}\n\n\nexport default {\n  badge, updateBadge, notify, loadingCircle,\n  alert, updateAlert, invalidFeedback, updateInvalidMessage\n};\n","\n/** @module component/button */\n\nimport d3 from 'd3';\n\nconst iconBaseURL = '../assets/icon/';\n\n\nfunction buttonBox(selection, label, type) {\n  selection\n      .classed('form-group', true)\n      .classed('mb-1', true)\n    .append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .text(label);\n}\n\n\nfunction menuButton(selection, label, type) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .text(label);\n}\n\n\nfunction menuButtonLink(selection, label, type, icon) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('role', 'button')\n      .attr('href', '#');\n  selection.append('img')\n      .attr('src', icon ? `${iconBaseURL}${icon}.svg` : null)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  selection.append('span')\n      .style('vertical-align', 'middle')\n      .text(label);\n}\n\n\nfunction menuModalLink(selection, target, label, type, icon) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('href', '#')\n      .attr('role', 'button')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`);\n  selection.append('img')\n      .attr('src', icon ? `${iconBaseURL}${icon}.svg` : null)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  selection.append('span')\n      .classed('label', true)\n      .style('vertical-align', 'middle')\n      .text(label);\n}\n\n\nfunction dropdownMenuButton(selection, label, type, icon) {\n  selection\n      .classed('btn-group', true)\n      .classed('mr-1', true);\n  const button = selection.append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .classed('dropdown-toggle', true)\n      .attr('data-toggle', 'dropdown');\n  button.append('img')\n      .attr('src', icon ? `${iconBaseURL}${icon}.svg` : null)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  button.append('span')\n      .style('vertical-align', 'middle')\n      .text(label);\n  selection.append('div')\n      .classed('dropdown-menu', true);\n}\n\n\nfunction dropdownMenuItem(selection, label, icon) {\n  selection.classed('dropdown-item', true)\n      .attr('href', '#');\n  selection.append('img')\n      .attr('src', icon ? `${iconBaseURL}${icon}.svg` : null)\n      .classed('mr-1', true)\n      .style('width', '2rem')\n      .style('height', '2rem');\n  selection.append('span')\n      .text(label);\n}\n\nfunction dropdownMenuModal(selection, label, target, icon) {\n  selection.classed('dropdown-item', true)\n      .attr('href', '#')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`);\n  selection.append('img')\n      .attr('src', `${iconBaseURL}${icon}.svg`)\n      .classed('mr-1', true)\n      .style('width', '2rem')\n      .style('height', '2rem');\n  selection.append('span')\n      .text(label);\n}\n\n\nfunction dropdownMenuFile(selection, label, accept, icon) {\n  selection.classed('dropdown-item', true)\n      .attr('href', '#')\n      .on('click', function () {\n        d3.select(this).select('input').node().click();\n      });\n  selection.append('form')\n      .style('display', 'none')\n    .append('input')\n      .attr('type', 'file')\n      .attr('accept', accept);\n  selection.append('img')\n      .attr('src', `${iconBaseURL}${icon}.svg`)\n      .classed('mr-1', true)\n      .style('width', '2rem')\n      .style('height', '2rem');\n  selection.append('span')\n      .text(label);\n}\n\n\nfunction dropdownMenuFileValue(selection) {\n  return selection.select('input').node().files[0];\n}\n\n\nexport default {\n  iconBaseURL, buttonBox, menuButton, menuButtonLink, menuModalLink,\n  dropdownMenuButton, dropdownMenuItem, dropdownMenuModal,\n  dropdownMenuFile, dropdownMenuFileValue\n};\n","\n/** @module component/modal */\n\nimport d3 from 'd3';\n\n\nfunction dialogBase(selection, id) {\n  selection\n      .classed('modal', true)\n      .attr('tabindex', -1)\n      .attr('role', 'dialog')\n      .attr('aria-labelledby', '')\n      .attr('aria-hidden', true)\n      .attr('id', id);\n  selection.append('div')\n      .classed('modal-dialog', true)\n      .attr('role', 'document')\n    .append('div')\n      .classed('modal-content', true);\n}\n\n\nfunction confirmDialog(selection, id) {\n  const base = selection.call(dialogBase, id)\n      .select('.modal-content');\n  // body\n  base.append('div')\n      .classed('modal-body', true)\n    .append('div')\n      .classed('message', true);\n  // footer\n  const footer = base.append('div')\n      .classed('modal-footer', true);\n  footer.append('button')\n      .classed('btn', true)\n      .classed('btn-outline-secondary', true)\n      .classed('cancel', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .text('Cancel');\n  footer.append('button')\n      .classed('btn', true)\n      .classed('btn-warning', true)\n      .classed('ok', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .text('OK')\n      .on('click', () => {\n        selection.dispatch('submit');\n      });\n}\n\n\nfunction updateConfirmDialog(selection, message) {\n  selection.select('.message').text(message);\n}\n\n\nfunction submitDialog(selection, id, title) {\n  const base = selection.call(dialogBase, id)\n      .select('.modal-content');\n  // header\n  const header = base.append('div')\n      .classed('modal-header', true);\n  header.append('h4')\n      .classed('modal-title', true)\n      .text(title);\n  header.append('button')\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .attr('aria-label', 'Close')\n      .classed('close', true)\n    .append('span')\n      .attr('aria-hidden', true)\n      .html('&times;');\n  // body\n  base.append('div')\n      .classed('modal-body', true);\n  // footer\n  base.append('div')\n      .classed('modal-footer', true)\n    .append('button')\n      .classed('btn', true)\n      .classed('btn-primary', true)\n      .classed('submit', true)\n      .attr('type', 'button')\n      .attr('data-dismiss', 'modal')\n      .text('Submit')\n      .on('click', () => {\n        // Dismiss before submit\n        // Submit event can update the modal itself\n        // (ex. disable submit button before onSubmit call has completed)\n        $(`#${id}`).modal('hide');\n        selection.dispatch('submit');\n      });\n}\n\n\nexport default {\n  confirmDialog, updateConfirmDialog, submitDialog\n};\n","\n/** @module component/tree */\n\nimport d3 from 'd3';\n\n\n/**\n * Generate collapsible tree\n * @param {d3.selection} selection - selection of node content\n */\nfunction tree() {\n  let bodyHeight = 400;\n  let keyDef = d => d.id;\n  let parentDef = d => d.parent;\n  let defaultLevel = 99999;\n  let nodeEnterFactory = () => {};\n  let nodeMergeFactory = () => {};\n\n  // Recursively append child nodes\n  function nextLevel(selection, data) {\n    if (!selection.select('.childlist').size()) {\n      selection.append('ul')\n        .classed('childlist', true)\n        .style('list-style-type', 'none');\n    }\n    const items = selection.select('.childlist')\n      .selectAll('li')\n        .data(data, keyDef);\n    items.exit().remove();\n    items.enter()\n      .append('li')\n        .each(function (d) {\n          d3.select(this).call(nodeEnterFactory, d.data);\n        })\n      .merge(items)\n        .each(function (d) {\n          const node = d3.select(this);\n          node.call(nodeMergeFactory, d.data);\n          if (d.hasOwnProperty('children')) {\n            node.call(nextLevel, d.children)\n              .select('.arrow')\n                .text(d => d.depth - 1 >= defaultLevel ? '▶ ' : '▼ ')\n                .on('click', function () {  // Collapse on click\n                  const childList = node.select('.childlist');\n                  const expanded = childList.style('display') !== 'none';\n                  d3.select(this).text(expanded ? '▶ ' : '▼ ');\n                  childList.style('display', expanded ? 'none' : 'inherit');\n                });\n            node.select('.childlist')\n                .style('display',\n                  d => d.depth - 1 >= defaultLevel ? 'none' : 'inherit');\n          } else {\n            node.select('.childlist').remove();\n          }\n        });\n  }\n\n  function _tree(selection, records) {\n    const root = d3.stratify()\n        .id(keyDef)\n        .parentId(parentDef)(records);\n    selection\n        .style('overflow-y', 'scroll')\n        .style('height', `${bodyHeight}px`);\n    if (!selection.select('.body').size()) {\n      selection.append('div').classed('body', true);\n    }\n    selection.select('.body')\n        .call(nextLevel, root.children || []);\n    selection.selectAll('.body > ul')\n        .style('padding-left', 0);\n    selection.selectAll('.body > ul > li')\n        .classed('my-2', true);\n  }\n\n  _tree.bodyHeight = function (h) {\n    bodyHeight = h;\n    return _tree;\n  };\n\n  _tree.keyDef = function (f) {\n    keyDef = f;\n    return _tree;\n  };\n\n  _tree.defaultLevel = function (lv) {\n    defaultLevel = lv;\n    return _tree;\n  };\n\n  _tree.nodeEnterFactory = function (f) {\n    nodeEnterFactory = f;\n    return _tree;\n  };\n\n  _tree.nodeMergeFactory = function (f) {\n    nodeMergeFactory = f;\n    return _tree;\n  };\n\n  return _tree;\n}\n\n\n/**\n* Checkbox node (A basic implementation of nodeEnterFactory)\n* @param {d3.selection} selection - selection of node content (li element)\n*/\nfunction checkboxNode(selection) {\n  selection.append('span').classed('arrow', true);\n  selection.append('input')\n      .attr('type', 'checkbox');\n  selection.append('span')\n      .classed('label', true);\n}\n\n\n/**\n* Update checkbox node content (A basic implementation of nodeMergeFactory)\n* @param {d3.selection} selection - selection of node content (li element)\n*/\nfunction updateCheckbox(selection, record) {\n  selection.select('.label')\n      .text(record.id);\n}\n\n\n/**\n * Return an array of ids that are checked\n * @param {d3.selection} selection - selection of node content\n */\nfunction checkboxValues(selection) {\n  return selection.select('.body')\n     .selectAll('input:checked').data().map(d => d.id);\n}\n\n\nexport default {\n  tree, checkboxNode, updateCheckbox, checkboxValues\n};\n","\n/** @module component/formBox */\n\nimport d3 from 'd3';\n\nimport {default as badge} from './badge.js';\n\n\nfunction updateFormValue(selection, value) {\n  selection.select('.form-control').property('value', value);\n  selection.call(setValidity, true);  // Clear validity state\n}\n\n\nfunction formValue(selection) {\n  return selection.select('.form-control').property('value');\n}\n\n\nfunction formValid(selection) {\n  return selection.select('.form-control').node().checkValidity();\n}\n\n\nfunction setValidity(selection, valid) {\n  selection.select('.invalid-feedback')\n      .style('display', valid ? 'none': 'inherit');\n  selection.select('.form-control')\n      .style('background-color', valid ? null : '#ffcccc');\n}\n\n\nfunction textBox(selection, label) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('type', 'text')\n      .on('input', function () {\n        const valid = formValid(selection);\n        selection.call(setValidity, valid);\n      });\n  selection.append('div')\n      .classed('col-4', true);\n  selection.append('div')\n      .call(badge.invalidFeedback)\n      .classed('col-8', true);\n}\n\n\nfunction readonlyBox(selection, label) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label);\n  selection.append('input')\n      .classed('form-control-plaintext', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('type', 'text')\n      .attr('readonly', 'readonly');\n}\n\nfunction updateReadonlyValue(selection, value) {\n  selection.select('.form-control-plaintext').property('value', value);\n}\n\nfunction readonlyValue(selection) {\n  return selection.select('.form-control-plaintext').property('value');\n}\n\n\nfunction textareaBox(selection, label, rows, placeholder) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true);\n  const formLabel = selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label);\n  formLabel.append('div')\n      .call(badge.invalidFeedback);\n  selection.append('textarea')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('rows', rows)\n      .attr('placeholder', placeholder)\n      .on('input', function () {\n        const valid = textareaValid(selection);\n        selection.call(setValidity, valid);\n      });\n}\n\nfunction textareaBoxLines(selection) {\n  const value = selection.select('textarea').property('value');\n  if (value) return value.split('\\n')\n    .map(e => e.replace(/^\\s+|\\s+$/g, ''))  // strip spaces\n    .filter(e => e.length > 0);\n  return [];\n}\n\nfunction textareaValid(selection) {\n  return /\\s*?\\w\\s*?/.test(formValue(selection));\n}\n\n\nfunction checkBox(selection, label) {\n  const box = selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('form-check', true)\n    .append('label')\n      .classed('form-check-label', true)\n      .classed('col-form-label-sm', true);\n  box.append('input')\n      .classed('form-check-input', true)\n      .attr('type', 'checkbox');\n  box.append('span')\n      .text(label);\n}\n\nfunction updateCheckBox(selection, checked) {\n  selection.select('input').property('checked', checked);\n}\n\nfunction checkBoxValue(selection) {\n  return selection.select('input').property('checked');\n}\n\n\nfunction numberBox(selection, label) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('type', 'number')\n      .on('input', function () {\n        const valid = formValid(selection);\n        selection.call(setValidity, valid);\n      });\n  selection.append('div')\n      .classed('col-4', true);\n  selection.append('div')\n      .call(badge.invalidFeedback)\n      .classed('col-8', true);\n}\n\nfunction updateNumberRange(selection, min, max, step) {\n  selection.select('.form-control')\n      .attr('min', min)\n      .attr('max', max)\n      .attr('step', step)\n      .dispatch('input', {bubbles: true});\n}\n\n\n/**\n * Render color scale box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction colorBox(selection, label) {\n  selection\n      .classed('form-row', true)\n      .classed('align-items-center', true)\n      .on('change', () => {\n        // avoid update by mousemove on the colorpicker\n        d3.event.stopPropagation();\n      });\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true)\n      .text(label);\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true)\n    .append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .attr('type', 'color');\n}\n\n\nfunction fileInputBox(selection, label, accept) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('form-control-file', true)\n      .classed('col-8', true)\n      .attr('type', 'file')\n      .attr('accept', accept)\n      .on('change', function () {\n        const valid = fileInputValid(selection);\n        selection.call(setValidity, valid);\n      });\n  selection.append('div')\n      .classed('col-4', true);\n  selection.append('div')\n      .call(badge.invalidFeedback)\n      .classed('col-8', true);\n}\n\nfunction clearFileInput(selection) {\n  // TODO: FileList object (input.files) may be a readonly property\n  const label = selection.select('label').text();\n  const accept = selection.select('input').attr('accept');\n  selection.selectAll('*').remove();\n  selection.call(fileInputBox, label, accept);\n}\n\nfunction fileInputValue(selection) {\n  return selection.select('input').property('files')[0];\n}\n\nfunction fileInputValid(selection) {\n  // TODO: attribute 'require' does not work with input type=file\n  return selection.select('input').property('files').length > 0;\n}\n\n\nexport default {\n  updateFormValue, formValue, formValid, setValidity,\n  textBox, readonlyBox, updateReadonlyValue, readonlyValue,\n  textareaBox, textareaBoxLines, textareaValid,\n  numberBox, updateNumberRange,\n  checkBox, updateCheckBox, checkBoxValue,\n  colorBox,\n  fileInputBox, clearFileInput, fileInputValue, fileInputValid\n};\n","\n/** @module component/shape */\n\nimport {default as misc} from '../common/misc.js';\n\n\nfunction monocolorBar(selection, colors, text) {\n  const group = selection.append('g');\n  group.append('rect')\n      .attr('x', 0).attr('y', 0)\n      .attr('width', 100).attr('height', 10)\n      .attr('fill', colors[0]);\n  group.append('text')\n      .attr('text-anchor', 'middle')\n      .attr('x', 50).attr('y', 10)\n      .attr('font-size', 12)\n      .text(text);\n}\n\nfunction bicolorBar(selection, colors, text) {\n  const id = misc.uuidv4().slice(0, 8);  // Aboid inline SVG ID dupulicate\n  selection.call(monocolorBar, colors, text);\n  const grad = selection.append('defs')\n    .append('linearGradient')\n      .attr('id', id);\n  grad.append('stop')\n      .attr('offset', 0).attr('stop-color', colors[0]);\n  grad.append('stop')\n      .attr('offset', 1).attr('stop-color', colors[1]);\n  selection.select('rect')\n      .attr('fill', `url(#${id})`);\n}\n\nfunction tricolorBar(selection, colors, text) {\n  const id = misc.uuidv4().slice(0, 8);  // Aboid inline SVG ID dupulicate\n  selection.call(monocolorBar, colors, text);\n  const grad = selection.append('defs')\n    .append('linearGradient')\n      .attr('id', id);\n  grad.append('stop')\n    .attr('offset', 0).attr('stop-color', colors[0]);\n  grad.append('stop')\n    .attr('offset', 0.5).attr('stop-color', colors[1]);\n  grad.append('stop')\n    .attr('offset', 1).attr('stop-color', colors[2]);\n  selection.select('rect')\n      .attr('fill', `url(#${id})`);\n}\n\nfunction categoricalBar(selection, colors, text) {\n  const sw = 100 / colors.length;\n  const group = selection.append('g');\n  colors.forEach((e, i) => {\n    group.append('rect')\n        .attr('x', sw * i).attr('y', 0)\n        .attr('width', sw).attr('height', 10)\n        .attr('fill', colors[i]);\n  });\n  group.append('text')\n      .attr('text-anchor', 'middle')\n      .attr('x', 50).attr('y', 10)\n      .attr('font-size', 12)\n      .text(text);\n}\n\nfunction setSize(selection, width, height) {\n  selection.attr('width', width).attr('height', height);\n}\n\n\nconst colorBar = {\n  'monocolor': monocolorBar,\n  'bicolor': bicolorBar,\n  'tricolor': tricolorBar,\n  'categorical': categoricalBar,\n  'custom': monocolorBar\n};\n\n\nexport default {\n  colorBar, setSize\n};\n","\n/** @module component/formListBox */\n\nimport d3 from 'd3';\n\nimport {default as badge} from './badge.js';\nimport {default as box} from './formBox.js';\nimport {default as shape} from './shape.js';\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction selectBox(selection, label) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label);\n  selection.append('select')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .on('input', function () {\n        const valid = box.formValid(selection);\n        selection.call(box.setValidity, valid);\n      });\n}\n\nfunction updateSelectBoxOptions(selection, items) {\n  const options = selection.select('select')\n    .selectAll('option')\n      .data(items, d => d.key);\n  options.exit().remove();\n  options.enter()\n    .append('option')\n      .attr('value', d => d.key)\n      .text(d => d.name);\n}\n\nfunction selectedRecord(selection) {\n  const value = box.formValue(selection);\n  return selection.selectAll('select option').data()\n      .find(e => e.key === value);\n}\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction checklistBox(selection, label) {\n  // TODO: scroll\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  const formLabel = selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label);\n  formLabel.append('div')\n      .call(badge.invalidFeedback);\n  selection.append('ul')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true);\n}\n\nfunction updateChecklistItems(selection, items) {\n  const listitems = selection.select('ul')\n    .selectAll('li')\n      .data(items, d => d.key);\n  listitems.exit().remove();\n  const form = listitems.enter()\n    .append('li')\n      .attr('class', 'form-check')\n    .append('label')\n      .attr('class', 'form-check-label');\n  form.append('input')\n      .attr('type', 'checkbox')\n      .attr('class', 'form-check-input')\n      .property('value', d => d.key);\n  form.append('span')\n      .text(d => d.name);\n}\n\nfunction checkRequired(selection) {\n  selection.selectAll('input')\n      .on('change', function () {\n        const valid = anyChecked(selection);\n        selection.call(setChecklistValidity, valid);\n      });\n}\n\nfunction updateChecklistValues(selection, values) {\n  selection.selectAll('input')\n    .each(function (d) {\n      d3.select(this).property('checked', values.includes(d.key));\n    });\n  selection.call(setChecklistValidity, true);  // Clear validity state\n}\n\nfunction checklistValues(selection) {\n  return selection.selectAll('input:checked').data().map(d => d.key);\n}\n\nfunction anyChecked(selection) {\n  return checklistValues(selection).length > 0;\n}\n\nfunction setChecklistValidity(selection, valid) {\n  selection.select('.invalid-feedback')\n      .style('display', valid ? 'none': 'inherit');\n  selection.select('.form-control')\n      .style('background-color', valid ? null : 'LightPink');\n}\n\n\nfunction colorScaleBox(selection, label) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label || 'Colorscale');\n  const form = selection.append('div')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true);\n  const dropdown = form.append('div')\n      .classed('btn-group', true)\n      .classed('mr-1', true);\n  dropdown.append('button')\n      .classed('btn', true)\n      .classed(`btn-light`, true)\n      .classed('btn-sm', true)\n      .classed('dropdown-toggle', true)\n      .attr('data-toggle', 'dropdown');\n  dropdown.append('div')\n      .classed('dropdown-menu', true)\n      .classed('py-0', true);\n  form.append('span')\n      .classed('selected', true);\n}\n\nfunction colorScaleBoxItems(selection, items) {\n  const listitems = selection.select('.dropdown-menu')\n    .selectAll('a')\n      .data(items, d => d);\n  listitems.exit().remove();\n  listitems.enter()\n    .append('a')\n      .classed('dropdown-item', true)\n      .classed('py-0', true)\n      .attr('href', '#')\n      .attr('title', d => d.key)\n      .on('click', function (d) {\n        selection.call(setSelectedColorScale, d);\n        selection.dispatch('change', {bubbles: true});\n      })\n    .append('svg')\n      .each(function (d) {\n        d3.select(this)\n          .attr('viewBox', '0 0 100 10')\n          .attr('preserveAspectRatio', 'none')\n          .call(shape.colorBar[d.type], d.colors, d.text)\n          .call(shape.setSize, 100, 10);\n      });\n}\n\nfunction setSelectedColorScale(selection, item) {\n  const selected = selection.select('.selected');\n  selected.selectAll('svg').remove();\n  selected.datum(item);  // Bind selected item record\n  selected.append('svg')\n      .attr('viewBox', '0 0 100 10')\n      .attr('preserveAspectRatio', 'none')\n      .call(shape.colorBar[item.type], item.colors, item.text)\n      .call(shape.setSize, 100, 10);\n}\n\nfunction updateColorScaleBox(selection, key) {\n  const data = selection.select('.dropdown-menu')\n    .selectAll('a').data();\n  const item = data.find(e => e.key === key);\n  selection.call(setSelectedColorScale, item);\n}\n\nfunction colorScaleBoxValue(selection) {\n  return selection.select('.selected').datum().key;\n}\n\nfunction colorScaleBoxItem(selection) {\n  return selection.select('.selected').datum();\n}\n\n\nexport default {\n  selectBox, updateSelectBoxOptions, selectedRecord,\n  checklistBox, updateChecklistItems, checkRequired, updateChecklistValues,\n  checklistValues, anyChecked, setChecklistValidity,\n  colorScaleBox, colorScaleBoxItems, updateColorScaleBox,\n  colorScaleBoxValue, colorScaleBoxItem\n};\n","\n/** @module dialog/search */\n\nimport d3 from 'd3';\nimport _ from 'lodash';\n\nimport {default as fetcher} from '../common/fetcher.js';\n\nimport {default as badge} from '../component/badge.js';\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nconst id = 'search-dialog';\nconst title = 'Search by compound ID';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, title, id, 'menu-searchtext');\n}\n\n\nfunction body(selection) {\n  const mbody = selection.call(modal.submitDialog, id, title)\n    .select('.modal-body');\n  mbody.append('div')\n      .classed('text-muted', true)\n      .classed('small', true)\n      .classed('text-right', true)\n      .text('Ctrl+F to fill the form with demo queries');\n  mbody.append('div')\n      .classed('field', true)\n      .call(lbox.selectBox, 'Field');\n  mbody.append('div')\n      .classed('query', true)\n      .call(box.textareaBox, 'Query', 12)\n      .call(badge.updateInvalidMessage, 'Please provide valid queries')\n      .on('input', function() {\n        const valid = box.textareaValid(d3.select(this));\n        selection.select('.submit').property('disabled', !valid);\n      });\n}\n\n\nfunction updateBody(selection, resources) {\n  const fields = _(resources.map(e => e.fields))\n    .flatten()\n    .uniqBy('key')\n    .value()\n    .filter(e => e.hasOwnProperty('d3_format')\n                 || ['compound_id', 'numeric', 'text'].includes(e.format));\n  const def = fields.find(e => e.format === 'compound_id') || fields[0];\n  selection.select('.field')\n      .call(lbox.updateSelectBoxOptions, fields)\n      .call(box.updateFormValue, def.key);\n  selection.select('.query')\n      .call(box.updateFormValue, '');\n  selection.select('.submit').property('disabled', true);\n}\n\n\nfunction execute(selection, resources) {\n  const query = {\n    workflow: 'search',\n    targets: resources.map(e => e.id),  // All DBs\n    key: box.formValue(selection.select('.field')),\n    values: box.textareaBoxLines(selection.select('.query'))\n  };\n  return fetcher.get(query.workflow, query)\n    .then(fetcher.json);\n}\n\n\nfunction fill(selection) {\n  selection.select('.field').call(box.updateFormValue, 'compound_id');\n  selection.select('.query')\n      .call(box.updateFormValue, \"DB00186\\nDB00189\\nDB00193\\nDB00203\\nDB00764\\nDB00863\\nDB00865\\nDB00868\\nDB01143\\nDB01240\\nDB01242\\nDB01361\\nDB01366\\nDB02638\\nDB02959\")\n      .dispatch('input');\n}\n\nexport default {\n  menuLink, body, updateBody, execute, fill\n};\n","\n/** @module component/dropdown */\n\n\nimport {default as misc} from '../common/misc.js';\n\n\nfunction dropdownFormGroup(selection, label) {\n  const id = misc.uuidv4().slice(0, 8);\n  selection.classed('mb-3', true)\n    .append('div')\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('justify-content-end', true)\n    .append('button')\n      .classed('btn', true)\n      .classed('btn-sm', true)\n      .classed('btn-outline-primary', true)\n      .classed('dropdown-toggle', true)\n      .attr('data-toggle', 'collapse')\n      .attr('data-target', `#${id}-collapse`)\n      .attr('aria-expanded', 'false')\n      .attr('aria-controls', `${id}-collapse`)\n      .text(label);\n  selection.append('div')\n      .classed('collapse', true)\n      .attr('id', `${id}-collapse`)\n    .append('div')\n      .classed('card', true)\n      .classed('card-body', true);\n}\n\n\nexport default {\n  dropdownFormGroup\n};\n","\n/** @module dialog/formGroup */\n\nimport d3 from 'd3';\n\nimport {default as fetcher} from '../common/fetcher.js';\n\nimport {default as badge} from '../component/badge.js';\nimport {default as button} from '../component/button.js';\nimport {default as dropdown} from '../component/dropdown.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\n\n\n/**\n * Render color range control box group\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction queryMolGroup(selection) {\n  // Query format\n  selection\n      .classed('mb-3', true);\n  selection.append('div')\n      .classed('format', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, 'Format')\n      .call(lbox.updateSelectBoxOptions,\n            [\n              {key: 'molfile', name: 'MDL Molfile'},\n              {key: 'dbid', name: 'Compound ID'}\n            ])\n      .on('change', function () {\n        const value = box.formValue(d3.select(this));\n        selection.select('.source .form-control')\n            .property('disabled', value !== 'dbid');\n        selection.select('.textquery')\n            .property('hidden', value !== 'dbid');\n        selection.select('.areaquery')\n            .property('hidden', value !== 'molfile');\n      });\n\n  // Query ID source\n  selection.append('div')\n      .classed('source', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, 'Source');\n\n  // Database ID query input\n  const queryBox = selection.append('div')\n      .classed('textquery', true)\n      .classed('mb-1', true)\n      .call(box.textBox, 'Query');\n  queryBox.select('.form-control')\n      .attr('required', 'required');\n  queryBox.select('.invalid-feedback')\n      .call(badge.updateInvalidMessage, 'Please provide a valid query');\n\n  // CTAB format structure query input\n  const ctabBox = selection.append('div')\n      .classed('areaquery', true)\n      .classed('mb-1', true)\n      .attr('required', 'required')\n      .call(box.textareaBox, 'Query', 6, null);\n  ctabBox.select('.form-control')\n      .attr('required', 'required');\n  ctabBox.select('.invalid-feedback')\n      .call(badge.updateInvalidMessage,\n            'Please provide a valid CTAB format text (.sdf or .mol)');\n\n  // Preview popover\n  $(function () {\n    $('[data-toggle=\"popover\"]')\n      .popover({html: true, trigger: 'focus'});\n  });\n  selection.append('div')\n      .classed('form-row', true)\n      .classed('justify-content-end', true)\n    .append('button')\n      .classed('preview', true)\n      .attr('data-toggle', 'popover')\n      .attr('data-html', 'true')\n      .attr('data-content', '<div id=\"previmg\"></div>')\n      .call(button.menuButton, 'Structure preview', 'primary')\n      .on('click', function () {\n        const query = queryMolValues(selection);\n        return fetcher.get('strprev', query)\n          .then(fetcher.text)\n          .then(res => d3.select('#previmg').html(res), fetcher.error);\n      });\n}\n\nfunction updateQueryMolResources(selection, resources) {\n  const res = resources.map(d => ({key: d.id, name: d.name}));\n  selection.select('.source')\n      .call(lbox.updateSelectBoxOptions, res);\n}\n\nfunction updateQueryMolValues(selection, values) {\n  selection.select('.format')\n      .call(box.updateFormValue, values.format)\n      .dispatch('change');\n  selection.select('.source')\n      .call(box.updateFormValue, values.source);\n  selection.select('.textquery')\n      .call(box.updateFormValue,\n            values.format === 'dbid' ? values.value : null);\n  selection.select('.areaquery')\n      .call(box.updateFormValue,\n            values.format === 'molfile' ? values.value : null);\n}\n\nfunction queryMolValues(selection) {\n  const format = box.formValue(selection.select('.format'));\n  const source = box.formValue(selection.select('.source'));\n  const textquery = box.formValue(selection.select('.textquery'));\n  const areaquery = box.textareaBoxLines(selection.select('.areaquery'));\n  return {\n    format: format,\n    source: format === 'dbid' ? source : null,\n    value: format === 'molfile' ? areaquery : textquery\n  };\n}\n\nfunction queryMolValid(selection) {\n  const format = box.formValue(selection.select('.format'));\n  const textValid = box.formValid(selection.select('.textquery'));\n  const ctabValid = box.textareaValid(selection.select('.areaquery'));\n  return format === 'molfile' ? ctabValid : textValid;\n}\n\n\nfunction simOptionGroup(selection) {\n  const collapse = selection.append('div')\n      .call(dropdown.dropdownFormGroup, 'Optional parameters')\n    .select('.card-body');\n\n  // Ignore H flag\n  collapse.append('div')\n      .classed('ignoreh', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, 'Ignore explicit hydrogens');\n\n  // Timeout\n  const timeoutBox = collapse.append('div')\n      .classed('timeout', true)\n      .classed('mb-1', true)\n      .call(box.numberBox, 'Timeout')\n      .call(box.updateNumberRange, 1, 999, 1);\n  timeoutBox.select('.form-control')\n      .attr('required', 'required');\n  timeoutBox.select('.invalid-feedback')\n      .call(badge.updateInvalidMessage,\n            'Please provide a valid number (1 to 999)');\n\n  // Diameter\n  const diamBox = collapse.append('div')\n      .classed('diam', true)\n      .classed('mb-1', true)\n      .call(box.numberBox, 'Diameter (MCS-DR/GLS)')\n      .call(box.updateNumberRange, 4, 999, 1);\n  diamBox.select('.form-control')\n      .attr('required', 'required');\n  diamBox.select('.invalid-feedback')\n      .call(badge.updateInvalidMessage,\n            'Please provide a valid number (4 to 999)');\n\n  // Custom layout\n  collapse.selectAll('label.col-form-label')\n      .classed('col-4', false)\n      .classed('col-6', true);\n  collapse.selectAll('input.form-control')\n      .classed('col-8', false)\n      .classed('col-6', true);\n}\n\n\nfunction updateSimOptionValues(selection, values) {\n  selection.select('.ignoreh')\n      .call(box.updateCheckBox, values.ignoreHs);\n  if (values.hasOwnProperty('timeout')) {\n    selection.select('.timeout')\n        .call(box.updateFormValue, values.timeout);\n  }\n  if (values.hasOwnProperty('diameter')) {\n    selection.select('.diam')\n        .call(box.updateFormValue, values.diameter);\n  }\n}\n\n\nfunction simOptionValues(selection) {\n  const timeout = selection.select('.timeout');\n  const diam = selection.select('.diam');\n  const query = {\n    ignoreHs: box.checkBoxValue(selection.select('.ignoreh'))\n  };\n  if (!timeout.select('.form-control').property('disabled')) {\n    query.timeout = box.formValue(timeout);\n  }\n  if (!diam.select('.form-control').property('disabled')) {\n    query.diameter = box.formValue(diam);\n  }\n  return query;\n}\n\nfunction simOptionValid(selection) {\n  const timeoutValid = box.formValid(selection.select('.timeout'));\n  const diamValid = box.formValid(selection.select('.diam'));\n  return timeoutValid && diamValid;\n}\n\n\nexport default {\n  queryMolGroup, updateQueryMolResources, updateQueryMolValues,\n  queryMolValues, queryMolValid,\n  simOptionGroup, updateSimOptionValues, simOptionValues, simOptionValid\n};\n","\n/** @module dialog/struct */\n\nimport d3 from 'd3';\n\nimport {default as fetcher} from '../common/fetcher.js';\n\nimport {default as badge} from '../component/badge.js';\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as modal} from '../component/modal.js';\nimport {default as group} from './formGroup.js';\n\n\nconst id = 'struct-dialog';\nconst title = 'Search by structure';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, title, id, 'menu-searchchem');\n}\n\n\nfunction body(selection) {\n  const mbody = selection.call(modal.submitDialog, id, title)\n    .select('.modal-body');\n  mbody.append('div')\n      .classed('text-muted', true)\n      .classed('small', true)\n      .classed('text-right', true)\n      .text('Ctrl+F to fill the form with demo queries');\n\n  // Query molecule\n  mbody.append('div')\n      .classed('qmol', true)\n      .call(group.queryMolGroup)\n      .on('input', function() {\n        const valid = dialogFormValid(selection);\n        selection.select('.submit').property('disabled', !valid);\n      });\n\n  // Structure search method\n  mbody.append('div')\n      .classed('method', true)\n      .call(lbox.selectBox, 'Method')\n      .on('change', function () {\n        const value = box.formValue(d3.select(this));\n        const mcs = ['gls', 'rdfmcs'].includes(value);\n        const strMatch = ['exact', 'substr', 'supstr'].includes(value);\n        selection.select('.measure').call(box.updateFormValue, 'sim');\n        selection.select('.measure select').property('disabled', !mcs);\n        selection.select('.thld input').property('disabled', strMatch);\n        selection.select('.diam input').property('disabled', value !== 'gls');\n        selection.select('.timeout input').property('disabled', !mcs);\n      });\n\n  // Measure type\n  mbody.append('div')\n      .classed('measure', true)\n      .call(lbox.selectBox, 'Measure')\n      .call(lbox.updateSelectBoxOptions, [\n              {key: 'sim', name: 'Similarity'},\n              {key: 'edge', name: 'Edge count'}\n            ])\n      .on('change', function () {\n        const value = box.formValue(d3.select(this));\n        const rs = value === 'sim' ? [0.4, 1, 0.01] : [1, 999, 1];\n        selection.select('.thld')\n            .call(box.updateNumberRange, rs[0], rs[1], rs[2]);\n      });\n\n  // Threshold\n  const thldBox = mbody.append('div')\n      .classed('thld', true)\n      .call(box.numberBox, 'Threshold')\n      .on('input', function() {\n        const valid = dialogFormValid(selection);\n        selection.select('.submit').property('disabled', !valid);\n      });\n  thldBox.select('.form-control')\n      .attr('required', 'required');\n  thldBox.select('.invalid-feedback')\n      .call(badge.updateInvalidMessage,\n            'Please provide a valid number (0.40 to 1.00)');\n\n  // Similarity search options\n  mbody.append('div')\n      .classed('option', true)\n      .call(group.simOptionGroup)\n      .on('input', function() {\n        const valid = dialogFormValid(selection);\n        selection.select('.submit').property('disabled', !valid);\n      });\n\n  // Targets\n  mbody.append('div')\n      .classed('target', true)\n      .call(lbox.checklistBox, 'Target databases')\n      .on('input', function() {\n        const valid = dialogFormValid(selection);\n        selection.select('.submit').property('disabled', !valid);\n      });\n}\n\n\nfunction updateBody(selection, resources, rdk) {\n  selection.select('.qmol')\n      .call(group.updateQueryMolResources, resources)\n      .call(group.updateQueryMolValues,\n            {format: 'molfile', source: resources[0].key, value: ''});\n  // Search type\n  const methodList = [\n    {key: 'exact', name: 'Exact match'},\n    {key: 'substr', name: 'Substructure'},\n    {key: 'supstr', name: 'Superstructure'},\n    {key: 'gls', name: 'MCS-DR/GLS'}\n  ];\n  if (rdk) {\n    methodList.push({key: 'rdmorgan', name: 'RDKit Morgan similarity'});\n    methodList.push({key: 'rdfmcs', name: 'RDKit FMCS'});\n  }\n  selection.select('.method')\n      .call(lbox.updateSelectBoxOptions, methodList)\n      .call(box.updateFormValue, 'exact')\n      .dispatch('change');\n  selection.select('.measure')\n      .call(box.updateFormValue, 'sim');\n  selection.select('.thld')\n      .call(box.updateFormValue, 0.5);\n  selection.select('.option')\n      .call(group.updateSimOptionValues,\n            {ignoreHs: true, timeout: 2, diameter: 8});\n  const res = resources.map(d => ({key: d.id, name: d.name}));\n  selection.select('.target')\n      .call(lbox.updateChecklistItems, res)\n      .call(lbox.updateChecklistValues, []);\n  selection.select('.submit').property('disabled', true);\n}\n\n\nfunction dialogFormValid(selection) {\n  const qmolValid = group.queryMolValid(selection.select('.qmol'));\n  const thldValid = box.formValid(selection.select('.thld'));\n  const simOptionValid = group.simOptionValid(selection.select('.option'));\n  const targetChecked = lbox.anyChecked(selection.select('.target'));\n  return qmolValid && thldValid && simOptionValid && targetChecked;\n}\n\n\nfunction execute(selection) {\n  const params = group.simOptionValues(selection.select('.option'));\n  const measure = selection.select('.measure');\n  const thld = selection.select('.thld');\n  if (!measure.select('select').property('disabled')) {\n    params.measure = box.formValue(measure);\n  }\n  if (!thld.select('input').property('disabled')) {\n    params.threshold = box.formValue(thld);\n  }\n  const query = {\n    workflow: box.formValue(selection.select('.method')),\n    targets: lbox.checklistValues(selection.select('.target')),\n    queryMol: group.queryMolValues(selection.select('.qmol')),\n    params: params\n  };\n  return fetcher.get(query.workflow, query)\n    .then(fetcher.json);\n}\n\n\nfunction fill(selection) {\n  selection.select('.qmol')\n      .call(group.updateQueryMolValues,\n            {format: 'dbid', source: 'drugbankfda', value: 'DB00465'});\n  selection.select('.method').call(box.updateFormValue, 'gls')\n      .dispatch('change');\n  selection.select('.measure').call(box.updateFormValue, 'sim')\n      .dispatch('change');\n  selection.select('.thld').call(box.updateFormValue, 0.7);\n  selection.select('.option')\n    .call(group.updateSimOptionValues,\n          {ignoreHs: true, timeout: 2, diameter: 8});\n  selection.select('.target').call(lbox.updateChecklistValues, 'drugbankfda')\n      .dispatch('input');\n}\n\n\nexport default {\n  menuLink, body, updateBody, execute, fill\n};\n","\n/** @module dialog/filter */\n\nimport _ from 'lodash';\nimport d3 from 'd3';\n\nimport {default as fetcher} from '../common/fetcher.js';\nimport {default as misc} from '../common/misc.js';\n\nimport {default as badge} from '../component/badge.js';\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nconst id = 'filter-dialog';\nconst title = 'Search by properties';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, title, id, 'menu-searchprop');\n}\n\n\nfunction body(selection) {\n  const mbody = selection.call(modal.submitDialog, id, title)\n    .select('.modal-body');\n  mbody.append('div')\n      .classed('text-muted', true)\n      .classed('small', true)\n      .classed('text-right', true)\n      .text('Ctrl+F to fill the form with demo queries');\n\n  // Key\n  mbody.append('div')\n      .classed('key', true)\n      .call(lbox.selectBox, 'Field')\n      .on('change', function () {\n        const field = lbox.selectedRecord(d3.select(this));\n        const fmt = misc.sortType(field.format || 'd3_format');\n        selection.select('.textvalue')\n            .property('hidden', fmt !== 'text');\n        selection.select('.numvalue')\n            .property('hidden', fmt !== 'numeric');\n      });\n\n  // Operator\n  mbody.append('div')\n      .classed('operator', true)\n      .call(lbox.selectBox, 'Operator')\n      .call(lbox.updateSelectBoxOptions, [\n              {key: 'eq', name: '='},\n              {key: 'gt', name: '>'},\n              {key: 'lt', name: '<'},\n              {key: 'ge', name: '>='},\n              {key: 'le', name: '>='},\n              {key: 'lk', name: 'LIKE'}\n            ]);\n\n  // Text value\n  const textValueBox = mbody.append('div')\n      .classed('textvalue', true)\n      .call(box.textBox, 'Value')\n      .on('input', function() {\n        const valid = dialogFormValid(selection);\n        selection.select('.submit').property('disabled', !valid);\n      });\n  textValueBox.select('.form-control')\n      .attr('required', 'required');\n  textValueBox.select('.invalid-feedback')\n      .call(badge.updateInvalidMessage, 'Please provide a valid text');\n\n  // Numeric value\n  const numValueBox = mbody.append('div')\n      .classed('numvalue', true)\n      .call(box.numberBox, 'Value')\n      .on('input', function() {\n        const valid = dialogFormValid(selection);\n        selection.select('.submit').property('disabled', !valid);\n      });\n  numValueBox.select('.form-control')\n      .attr('required', 'required');\n  numValueBox.select('.invalid-feedback')\n      .call(badge.updateInvalidMessage, 'Please provide a valid number');\n\n  // Target databases\n  mbody.append('div')\n      .classed('target', true)\n      .call(lbox.checklistBox, 'Target databases')\n      .on('change', function() {\n        const valid = dialogFormValid(selection);\n        selection.select('.submit').property('disabled', !valid);\n      })\n    .select('.invalid-feedback')\n      .call(badge.updateInvalidMessage, 'Please choose at least one items');\n}\n\n\nfunction updateBody(selection, resources) {\n  const fields = _(resources.map(e => e.fields))\n    .flatten()\n    .uniqBy('key')\n    .value()\n    .filter(e => e.hasOwnProperty('d3_format')\n                 || ['compound_id', 'numeric', 'text'].includes(e.format));\n  selection.select('.key')\n      .call(lbox.updateSelectBoxOptions, fields)\n      .call(box.updateFormValue, fields[0].key)\n      .dispatch('change');\n  selection.select('.operator').call(box.updateFormValue, 'eq');\n  selection.select('.textvalue').call(box.updateFormValue, null);\n  selection.select('.numvalue').call(box.updateFormValue, null);\n  const res = resources.map(d => ({key: d.id, name: d.name}));\n  selection.select('.target')\n      .call(lbox.updateChecklistItems, res)\n      .call(lbox.checkRequired)\n      .call(lbox.updateChecklistValues, []);\n  selection.select('.submit').property('disabled', true);\n}\n\n\nfunction dialogFormValid(selection) {\n  const fmt = lbox.selectedRecord(selection.select('.key')).format;\n  const type = misc.sortType(fmt);\n  const textValid = box.formValid(selection.select('.textvalue'));\n  const numValid = box.formValid(selection.select('.numvalue'));\n  const targetChecked = lbox.anyChecked(selection.select('.target'));\n  return (type === 'text' ? textValid : numValid) && targetChecked;\n}\n\n\nfunction execute(selection) {\n  const fmt = lbox.selectedRecord(selection.select('.key')).format;\n  const type = misc.sortType(fmt);\n  const value = box.formValue(\n    selection.select(type === 'text' ? '.textvalue' : '.numvalue'));\n  const query = {\n    workflow: 'filter',\n    targets: lbox.checklistValues(selection.select('.target')),\n    key: box.formValue(selection.select('.key')),\n    value: value,\n    operator: box.formValue(selection.select('.operator'))\n  };\n  return fetcher.get(query.workflow, query)\n    .then(fetcher.json);\n}\n\n\nfunction fill(selection) {\n  selection.select('.key').call(box.updateFormValue, '_mw')\n      .dispatch('change');\n  selection.select('.operator').call(box.updateFormValue, 'gt');\n  selection.select('.numvalue').call(box.updateFormValue, 1500);\n  selection.select('.target').call(lbox.updateChecklistValues, ['drugbankfda'])\n      .dispatch('change');\n}\n\n\nexport default {\n  menuLink, body, updateBody, execute, fill\n};\n","\n/** @module dialog/screener */\n\nimport _ from 'lodash';\nimport d3 from 'd3';\n\nimport {default as fetcher} from '../common/fetcher.js';\nimport {default as idb} from '../common/idb.js';\n\nimport {default as button} from '../component/button.js';\nimport {default as modal} from '../component/modal.js';\nimport {default as tree} from '../component/tree.js';\n\n\nconst id = 'screener-dialog';\nconst title = 'Fetch Screener QCSession';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, title, id, 'menu-addassay');\n}\n\n\nfunction body(selection) {\n  const dialog = selection.call(modal.submitDialog, id, title);\n  dialog.select('.modal-dialog').classed('modal-lg', true);\n  dialog.select('.modal-body').append('div')\n    .classed('qcsession', true);\n}\n\n\nfunction updateBody(selection, screenerURL) {\n  const mbody = selection.select('.modal-body');\n  selection.select('.submit').property('disabled', true);\n  // fetch QCS list when the dialog is opened\n  // This will be fired only once after updateBody is called\n  $(`#${id}`).on('shown.bs.modal', () => {\n    $(`#${id}`).off('shown.bs.modal');  // Remove event\n    return fetch(`${screenerURL}qcSessions?limit=0`, { credentials: 'include' })\n      .then(res => res.json())\n      .then(res => res.meta.totalHitCount)\n      .then(cnt => {\n        const reqs = [];\n        const chunks = Math.ceil(cnt / 250);\n        for (let i = 0; i < chunks; i++) {\n          const q = JSON.stringify({\n            limit: 250, offset: i * 250,\n            fields: [\"qcsRefId\", \"name\", \"experiment\"]\n          });\n          const url = `../screener/qcsession?query=${q}`;\n          const op = {credentials: 'include'};\n          reqs.push(() => fetch(url, op).then(res => res.json()));\n        }\n        return reqs;\n      })\n      .then(reqs => fetcher.batchRequest(reqs, 0.1))\n      .then(ress => _.flatten(ress.map(e => e.records)))\n      .then(rcds => {\n        const treeNodes = [{id: 'root'}];\n        rcds.forEach(rcd => {\n          const dirs = rcd.experiment.folderName.split('/');\n          dirs.shift();\n          dirs.forEach((dir, i) => {\n            if (!treeNodes.find(e => dir === e.id)) {\n              treeNodes.push({\n                id: dir, parent: i === 0 ? 'root' : dirs[i - 1]});\n            }\n          });\n          treeNodes.push({\n            id: rcd.qcsRefId, parent: dirs[dirs.length - 1], content: rcd});\n        });\n        mbody.select('.qcsession')\n            .call(tree.tree()\n              .bodyHeight(300)\n              .defaultLevel(1)\n              .nodeEnterFactory(qcsNode)\n              .nodeMergeFactory(updateQcsNode), treeNodes\n            );\n      });\n  });\n}\n\n\nfunction execute(selection) {\n  const mbody = selection.select('.modal-body');\n  const qcsid = tree.checkboxValues(mbody.select('.qcsession'))[0];\n  const header = { credentials: 'include'};\n  const q = JSON.stringify({ qcsRefIds: qcsid });\n  return fetch(`../screener/platestats?query=${q}`, header)\n    .then(res => res.json())\n    .then(res => idb.newDatagrid(res))\n    .then(res => {\n      const instance = res.instance;\n      const pv = fetch(`../screener/platevalue?query=${q}`, header)\n        .then(res => res.json())\n        .then(res => idb.add384Tiles(instance, res));\n      const cp = fetch(`../screener/compound?query=${q}`, header)\n        .then(res => res.json())\n        .then(res => res.records.length ? idb.addDatagrid(instance, res) : undefined);\n      return Promise.all([pv, cp]);\n    });\n}\n\n\nfunction qcsNode(selection, record) {\n  selection.append('span').classed('arrow', true);\n  selection.append('img')\n      .classed('icon', true)\n      .classed('mr-1', true)\n      .style('width', '1.3rem')\n      .style('height', '1.3rem');\n  selection.append('span')\n      .classed('label', true);\n  if (record.content) {\n    // Hidden radio buttons\n    // Selected node value can be retrieved by tree.checkboxValues\n    selection.append('input')\n      .classed('qcsvalue', true)\n      .attr('type', 'radio')\n      .attr('name', 'qcsvalue')\n      .style('display', 'none');\n    // Label click fires a radio button input\n    selection.select('.label')\n      .on('click', function () {\n        selection.select('.qcsvalue').property('checked', true);\n        d3.select(`#${id} .qcsession`)\n          .selectAll('li')\n            .style('background-color', null);\n        selection.style('background-color', '#ffff00');\n        // Once selected, invalid selection state cannot occur.\n        d3.select(`#${id} .submit`).property('disabled', false);\n      });\n  }\n}\n\n\nfunction updateQcsNode(selection, record) {\n  const iconType = record.content ? 'table-darkorange' : 'file-seagreen';\n  selection.select('.icon')\n      .attr('src', `${button.iconBaseURL}${iconType}.svg`);\n  selection.select('.label')\n      .text(record.content ? record.content.name : record.id);\n}\n\n\nexport default {\n  menuLink, body, updateBody, execute\n};\n","\n/** @module dialog/sdf */\n\nimport d3 from 'd3';\n\nimport {default as fetcher} from '../common/fetcher.js';\nimport {default as hfile} from '../common/file.js';\n\nimport {default as badge} from '../component/badge.js';\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nfunction getSDFPropList(str) {\n  const re = />.*?<(\\S+)>/g;\n  const uniqCols = new Set();\n  let arr;\n  while ((arr = re.exec(str)) !== null) {\n    uniqCols.add(arr[1]);\n  }\n  return Array.from(uniqCols);\n}\n\n\nconst id = 'sdf-dialog';\nconst title = 'Import SDFile';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, title, id, 'menu-importsdf');\n}\n\n\nfunction body(selection) {\n  const dialog = selection.call(modal.submitDialog, id, title);\n\n  // File input\n  dialog.select('.modal-body').append('div')\n      .classed('file', true)\n      .call(box.fileInputBox, 'File', '.mol,.sdf')\n      .on('change', function () {\n        const valid = box.fileInputValid(d3.select(this));\n        selection.select('.submit').property('disabled', !valid);\n        if (!valid) return;\n        const file = box.fileInputValue(d3.select(this));\n        // Scan only first 100mb of the file due to memory limit.\n        return hfile.readFile(file, 100 * 1024 * 1024, false)\n          .then(data => {\n            const fields = getSDFPropList(data)\n              .map(e => ({key: e, name: e}));\n            selection.select('.field')\n              .call(lbox.updateChecklistItems, fields)\n              .call(lbox.updateChecklistValues, [])\n              .call(lbox.checkRequired);\n            selection.select('.submit').property('disabled', true);\n          });\n      });\n\n  // Select fields to import\n  dialog.select('.modal-body').append('div')\n      .classed('field', true)\n      .call(lbox.checklistBox, 'Fields')\n      .on('input', function () {\n        const fieldChecked = lbox.anyChecked(selection.select('.field'));\n        selection.select('.submit').property('disabled', !fieldChecked);\n      })\n    .select('.invalid-feedback')\n      .call(badge.updateInvalidMessage, 'Please select at least one item');\n\n  // Options\n  dialog.select('.modal-body').append('div')\n      .classed('implh', true)\n      .call(box.checkBox, 'Make hydrogens implicit');\n  dialog.select('.modal-body').append('div')\n      .classed('recalc', true)\n      .call(box.checkBox, 'Recalculate 2D coords');\n}\n\n\nfunction updateBody(selection) {\n  selection.select('.file')\n      .call(box.clearFileInput)\n    .select('.invalid-feedback')\n      .call(badge.updateInvalidMessage, 'Please choose a file');\n  selection.select('.field')\n      .call(lbox.updateChecklistItems, [])\n      .call(lbox.updateChecklistValues, []);\n  selection.select('.implh')\n      .call(box.updateCheckBox, true);\n  selection.select('.recalc')\n      .call(box.updateCheckBox, false);\n  selection.select('.submit').property('disabled', true);\n}\n\n\nfunction execute(selection) {\n  const params = {\n    fields: lbox.checklistValues(selection.select('.field')),\n    implh: box.checkBoxValue(selection.select('.implh')),\n    recalc: box.checkBoxValue(selection.select('.recalc'))\n  };\n  const formData = new FormData();\n  formData.append('contents', box.fileInputValue(selection.select('.file')));\n  formData.append('params', JSON.stringify(params));\n  return fetcher.post('sdfin', formData)\n    .then(fetcher.json);\n}\n\n\n\nexport default {\n  menuLink, body, updateBody, execute\n};\n","\n/** @module dialog/rename */\n\nimport d3 from 'd3';\n\nimport {default as badge} from '../component/badge.js';\nimport {default as button} from '../component/button.js';\nimport {default as box} from '../component/formBox.js';\nimport {default as modal} from '../component/modal.js';\n\n\nconst id = 'rename-dialog';\nconst title = 'Rename';\n\n\nfunction menuLink(selection) {\n  selection.call(button.dropdownMenuModal, title, id, 'menu-edittext');\n}\n\n\nfunction body(selection) {\n  const renameBox = selection.call(modal.submitDialog, id, title)\n    .select('.modal-body').append('div')\n      .classed('rename', true)\n      .call(box.textBox, 'New name');\n  renameBox.select('.form-control')\n      .attr('required', 'required');\n  renameBox.select('.invalid-feedback')\n      .call(badge.updateInvalidMessage, 'Please provide a valid name');\n}\n\n\nfunction updateBody(selection, name) {\n  selection.select('.rename')\n      .call(box.updateFormValue, name)\n      .on('input', function () {\n        const valid = box.formValid(d3.select(this));\n        selection.select('.submit').property('disabled', !valid);\n      })\n      .dispatch('input');\n}\n\n\nfunction value(selection) {\n  return box.formValue(selection.select('.rename'));\n}\n\n\nexport default {\n  menuLink, body, updateBody, value\n};\n","\n/** @module datagrid/component */\n\nimport d3 from 'd3';\n\n\nfunction headerCellRenderer(header) {\n  header.style('display', 'inline-block')\n    .style('width', d => `${d.width}%`)\n    .text(d => d.name);\n}\n\n\nfunction updateHeader(selection, state) {\n  const header = selection.select('.dg-header');\n  header.selectAll('.dg-hcell').remove();\n  header.selectAll('.dg-hcell').data(state.visibleFields)\n    .enter().append('div')\n      .classed('dg-hcell', true)\n      .call(state.headerCellRenderer);\n}\n\n\nfunction updateRows(selection, state) {\n  const rows = selection.select('.dg-body')\n    .selectAll('.dg-row')\n      .data(state.recordsToShow(), state.keyFunc);\n  rows.exit().remove();\n  rows.selectAll('.dg-cell').remove();\n  rows.enter()\n    .append('div')\n      .attr('class', 'dg-row')\n      .style('position', 'absolute')\n      .style('width', '100%')\n    .merge(rows)\n      .style('height', `${state.rowHeight}px`)\n      .each(function (d, i) {\n        const rowIndex = state.viewportTop + i;\n        const rowPos = rowIndex * state.rowHeight;\n        d3.select(this)\n          .style('transform', `translate(0px, ${rowPos}px)`)\n          .classed('odd', (rowIndex) % 2 === 0)\n          .call(state.rowFactory(), d);\n      });\n}\n\n\nfunction updateViewport(selection, state, scrollPos) {\n  selection.select('.dg-body').style('height', `${state.bodyHeight}px`);\n  state.setScrollPosition(scrollPos);\n  selection.call(updateRows, state, scrollPos);\n  selection.select('.dg-viewport').node().scrollTop = scrollPos * state.rowHeight;\n}\n\n\nfunction resize(selection, state) {\n  const viewport = selection.select('.dg-viewport');\n  const viewportTop = viewport.node().getBoundingClientRect().top;\n  state.resizeViewport(window.innerHeight - viewportTop - 5);\n  viewport.style('height', `${state.viewportHeight}px`);\n}\n\n\nfunction datagrid(selection, state) {\n  selection.append('div')\n      .classed('dg-header', true);\n  selection.append('div')\n      .classed('dg-viewport', true)\n      .style('overflow-y', 'auto')\n      .on('scroll', function () {\n        const pos = Math.floor(this.scrollTop / state.rowHeight);\n        if (pos !== state.previousViewportTop) {\n          state.setScrollPosition(pos);\n          selection.call(updateRows, state, pos);\n        }\n      })\n    .append('div')\n      .classed('dg-body', true)\n      .style('position', 'relative');\n  state.updateContentsNotifier = () => {\n    state.applyHeader();\n    selection.call(updateHeader, state);\n    selection.call(resize, state);\n    state.applyData();\n    selection.call(updateViewport, state, state.viewportTop);\n  };\n  state.updateFilterNotifier = value => {\n    state.setFilterText(value);\n    selection.call(updateViewport, state, 0);\n  };\n}\n\n\n\nexport default {\n  headerCellRenderer, updateHeader, updateRows, updateViewport,\n  resize, datagrid\n};\n","\n/** @module datagrid/rowFactory */\n\nimport {default as misc} from '../common/misc.js';\nimport {default as idb} from '../common/idb.js';\nimport {default as img} from '../common/image.js';\n\n\nfunction d3Format(selection, record, field) {\n  selection.text(misc.formatNum(record[field.key], field.d3_format));\n}\n\n\nfunction text(selection, record, field) {\n  selection.text(record[field.key]);\n}\n\n\nfunction date(selection, record, field) {\n  // TODO; formatter\n  selection.text(record[field.key]);\n}\n\n\nfunction html(selection, record, field) {\n  // TODO: Check vulnerabilities\n  selection.html(record[field.key]);\n}\n\n\nfunction compoundID(selection, record, field) {\n  selection.append('a')\n      .attr('href',`profile.html?compound=${record[field.key]}`)\n      .attr('target', '_blank')\n      .text(record[field.key]);\n}\n\n\nfunction image(selection, record, field) {\n  selection.append('img')\n      .attr('width', 180)\n      .attr('height', 180)\n      .attr('src', record[field.key]);\n}\n\n\nfunction checkbox(selection, record, field) {\n  selection.append('input')\n      .attr('type', 'checkbox')\n      .property('checked', record[field.key])\n      .property('disabled', field.disabled ? record[field.disabled] : false)\n      .on('click', function () {\n        record[field.key] = this.checked;\n      });\n}\n\n\nfunction textField(selection, record, field) {\n  selection.append('input')\n      .attr('type', 'text')\n      .style('width', '90%')\n      .property('value', record[field.key])\n      .on('change', function () {\n        record[field.key] = this.value;\n      });\n}\n\n\nfunction call(selection, value) {\n  selection.call(value);\n}\n\n\nfunction asyncImage(selection, record, field) {\n  const req = `${field.request}${record[field.key]}`;\n  idb.getAsset(req)\n    .then(res => {\n      if (res !== undefined) return res;\n      return fetch(req, { credentials: 'include' })\n        .then(res => res.blob())\n        .then(res => idb.putAsset(req, res).then(() => res));\n    })\n    .then(obj => {\n      selection.append('img')\n          .attr('width', 180)\n          .attr('height', 180)\n          .attr('src', URL.createObjectURL(obj));\n    });\n}\n\n\nfunction asyncHtml(selection, record, field) {\n  const req = `${field.request}${record[field.key]}`;\n  idb.getAsset(req)\n    .then(res => {\n      if (res !== undefined) return res;\n      return fetch(req, { credentials: 'include' })\n        .then(res => res.text())\n        .then(res => idb.putAsset(req, res).then(() => res));\n    })\n    .then(txt => {\n      selection.html(txt);\n    });\n}\n\n\nconst cellFunc = {\n  numeric: text,\n  text: text,\n  date: date,\n  raw: text,\n  d3_format: d3Format,\n  compound_id: compoundID,\n  assay_id: text,\n  list: text,\n  plot: img.plotCell,\n  image: image,\n  checkbox: checkbox,\n  text_field: textField,\n  control: call,\n  svg: html,\n  html: html,\n  async_image: asyncImage,\n  async_html: asyncHtml\n};\n\n\nfunction rowCell(selection) {\n  selection.classed('dg-cell', true)\n    .classed('align-middle', true)\n    .classed('text-truncate', true)\n    .style('display', 'inline-block');\n}\n\n\nfunction rowFactory(fields) {\n  return (selection, record) => {\n    fields.forEach(field => {\n      const cell = selection.append('div')\n          .call(rowCell)\n          .style('width', `${field.width}%`);\n      if (!record.hasOwnProperty(field.key)) return;\n      cell.call(cellFunc[field.format], record, field);\n    });\n  };\n}\n\n\nexport default {\n  d3Format, text, html, compoundID, image, checkbox, textField, call,\n  asyncImage, asyncHtml,\n  rowCell, rowFactory\n};\n","\n/** @module common/image */\n\nimport vega from 'vega';\n\n\nfunction plotCell(selection, record, field) {\n  new vega.View(vega.parse(record[field.key]))\n    .initialize(selection.node())\n    .run();\n}\n\n\nfunction plotThumbnail(vegaSpec) {\n  const view = new vega.View(vega.parse(vegaSpec));\n  return view.toImageURL('png');  // Promise\n}\n\n\nfunction binaryToDataURI(binary) {\n  return new Promise(resolve => {\n    const reader = new FileReader();\n    reader.onload = event => {\n      resolve(event.target.result);\n    };\n    reader.readAsDataURL(binary);\n  });\n}\n\n\nexport default {\n  plotCell, plotThumbnail, binaryToDataURI\n};\n","\n/** @module datagrid/state */\n\nimport _ from 'lodash';\n\nimport Collection from '../common/collection.js';\nimport {default as idb} from '../common/idb.js';\nimport {default as misc} from '../common/misc.js';\n\nimport {default as component} from './component.js';\nimport {default as factory} from './rowFactory.js';\n\n\nexport default class DatagridState {\n  constructor(view, coll) {\n    this.instance = view.instance || null;\n    this.viewID = view.viewID || null;\n    this.name = view.name || null;\n    this.sortOrder = view.sortOrder || [];\n    this.filterText = view.filterText || null;\n    this.rows = new Collection(coll);\n\n    this.visibleFields = null;\n    this.sortedRecords = null;\n    this.filteredRecords = null;\n\n    // TODO: auto adjust\n    this.defaultColumnHeight = {\n      numeric: 40,\n      text: 40,\n      html: 40,\n      none: 200\n    };\n    this.scrollBarSpace = 20;\n    this.keyFunc = d => d.index;\n\n    // Size\n    this.rowHeight = null;\n    this.bodyHeight = null;\n\n    // Viewport\n    this.viewportHeight = null;\n    this.numViewportRows = null;\n    this.viewportTop = 0;\n    this.previousViewportTop = null;\n    this.viewportBottom = null;\n\n    this.fixedViewportHeight = null;\n\n    // Event notifier\n    this.updateContentsNotifier = null;\n    this.updateFilterNotifier = null;\n\n    this.headerCellRenderer = component.headerCellRenderer;\n    this.rowFactory = () => factory.rowFactory(this.visibleFields);\n  }\n\n  /**\n   * Set viewport height and number of rows to show\n   * @param {int} height - viewport height\n   */\n  setViewportSize(height) {\n    this.viewportHeight = this.fixedViewportHeight || height;\n  }\n\n  /**\n   * Set range of the row indices to show\n   * @param {int} position - Index of the top row to show\n   */\n  setScrollPosition(position) {\n    this.previousViewportTop = this.viewportTop;\n    this.viewportTop = position;\n    this.viewportBottom = Math.min(\n      this.viewportTop + this.numViewportRows, this.filteredRecords.length);\n  }\n\n  setNumViewportRows() {\n    this.numViewportRows = Math.ceil(this.viewportHeight / this.rowHeight) + 1;\n  }\n\n  resizeViewport(height) {\n    this.setViewportSize(height);\n    this.setNumViewportRows();\n  }\n\n  /**\n   * Apply header data\n   */\n  applyHeader() {\n    this.visibleFields = this.rows.fields.filter(e => e.visible);\n    const widthfSum = this.visibleFields.reduce((a, c) => a + (c.widthf || 1), 0);\n    this.visibleFields = this.visibleFields.map(e => {\n      const field = {\n        width: (e.widthf || 1) / widthfSum * 100,\n        height: e.height || this.defaultColumnHeight[misc.sortType(e.format)]\n      };\n      return Object.assign(field, e);\n    });\n    this.rowHeight = this.visibleFields\n      .reduce((a, b) => a.height > b.height ? a : b, 0).height;\n  }\n\n  /**\n   * Apply row data\n   * 1. applyHeader: define fields and set rowHeight\n   * 2. resize: measure actual window size and calc viewportHeight\n   * 3. applyData: calc number of rows from rowHeight and viewportHeight\n   * 4. setScrollPosition: calc row index range\n   * 5. recordsToShow: slice rows to show\n   */\n  applyData() {\n    this.setNumViewportRows();\n    this.applyOrder();\n  }\n\n  applyOrder(key, order) {\n    if (key) {\n      this.sortedRecords = _.orderBy(this.rows.records().slice(), [key], [order]);\n    } else {\n      const keys = this.sortOrder.map(e => e.key);\n      const orders = this.sortOrder.map(e => e.order);\n      if (keys) {\n        this.sortedRecords = _.orderBy(this.rows.records().slice(), keys, orders);\n      }\n    }\n    this.applyFilter();\n  }\n\n  applyFilter() {\n    if (this.filterText === null) {\n      this.filteredRecords = this.sortedRecords.slice();\n    } else {\n      const fields = this.visibleFields\n        .filter(e => misc.sortType(e.format) !== 'none')\n        .map(e => e.key);\n      this.filteredRecords = this.sortedRecords.filter(row => {\n        return fields.some(f => misc.partialMatch(this.filterText, row[f]));\n      });\n    }\n    this.bodyHeight = this.filteredRecords.length * this.rowHeight;\n  }\n\n  setSortOrder(key, order) {\n    const ki  = this.sortOrder.findIndex(e => e.key);\n    const obj = {key: key, order: order};\n    if (ki !== -1) this.sortOrder.splice(ki, 1);\n    this.sortOrder.splice(0, 0, obj);\n    this.applyOrder(key, order);\n  }\n\n  setFilterText(text) {\n    this.filterText = text;\n    this.applyFilter();\n  }\n\n  updateFields(fs) {\n    this.rows.updateFields(fs);\n  }\n\n  joinFields(mapping) {\n    this.rows.joinFields(mapping);\n    this.applyData();\n  }\n\n  recordsToShow() {\n    return this.filteredRecords.slice(this.viewportTop, this.viewportBottom);\n  }\n\n  save() {\n    return idb.updateItem(this.instance, item => {\n      const ci = item.dataset\n        .findIndex(e => e.collectionID === this.rows.collectionID);\n      item.dataset[ci] = this.rows.export();\n      const vi = item.views.findIndex(e => e.viewID === this.viewID);\n      item.views[vi] = this.export();\n    });\n  }\n\n  export() {\n    return {\n      $schema: \"https://mojaie.github.io/kiwiii/specs/datagrid_v1.0.json\",\n      viewID: this.viewID,\n      name: this.name,\n      viewType: \"datagrid\",\n      rows: this.rows.collectionID,\n      sortOrder: this.sortOrder,\n      filterText: this.filterText\n    };\n  }\n}\n","\n/** @module datagrid/rowFilter */\n\nimport {default as box} from '../component/formBox.js';\n\n\nfunction setFilter(selection, state) {\n  const searchBox = selection\n      .classed('row', true)\n      .classed('justify-content-end', true)\n    .append('div')\n      .classed('col-5', true)\n      .call(box.textBox, 'Search');\n  searchBox.select('label').classed('text-right', true);\n  searchBox.select('input')\n    .on('keyup', function () {\n      state.updateFilterNotifier(box.formValue(searchBox));\n    });\n}\n\n\nexport default {\n  setFilter\n};\n","\n/** @module datagrid/sort */\n\nimport d3 from 'd3';\n\nimport {default as misc} from '../common/misc.js';\nimport {default as component} from './component.js';\n\n\nfunction setSort(selection, state) {\n  state.headerCellRenderer = header => {\n    header.style('display', 'inline-block')\n      .style('width', d => `${d.width}%`)\n      .text(d => d.name)\n      .filter(d => misc.sortType(d.format) !== 'none')\n      .append('span').append('a')\n        .attr('id', d => `sort-${d.key}`)\n        .text('^v')\n        .style('display', 'inline-block')\n        .style('width', '30px')\n        .style('text-align', 'center')\n      .on('click', d => {\n        const isAsc = d3.select(`#sort-${d.key}`).text() === 'v';\n        d3.select(`#sort-${d.key}`).text(isAsc ? '^' : 'v');\n        state.setSortOrder(d.key, isAsc ? 'desc' : 'asc');\n        selection.call(component.updateRows, state);\n      });\n  };\n}\n\n\nexport default {\n  setSort\n};\n","\n/** @module datagrid/table */\n\nimport Collection from '../common/collection.js';\n\nimport DatagridState from './state.js';\nimport {default as component} from './component.js';\nimport {default as rowf} from './rowFilter.js';\nimport {default as sort} from './sort.js';\n\n\nfunction table(selection, fields, records, rowFactory, height) {\n  const data = {\n    fields: fields,\n    records: records\n  };\n  const state = new DatagridState({}, data);\n  state.keyFunc = d => d;\n  if (rowFactory) {\n    state.rowFactory = () => rowFactory(state.visibleFields);\n  }\n  state.fixedViewportHeight = height || 300;\n  selection.append('div')\n    .classed('table', true)\n    .call(component.datagrid, state);\n  selection.datum(state);\n}\n\n\nfunction filterTable(selection, fields, records, rowFactory, height) {\n  const data = {\n    fields: fields,\n    records: records\n  };\n  const state = new DatagridState({}, data);\n  if (rowFactory) {\n    state.rowFactory = () => rowFactory(state.visibleFields);\n  }\n  state.fixedViewportHeight = height || 300;\n  selection.append('div')\n    .classed('search', true)\n    .call(rowf.setFilter, state);\n  selection.append('div')\n    .classed('table', true)\n    .call(component.datagrid, state);\n  selection.datum(state);\n}\n\n\nfunction filterSortTable(selection, fields, records, rowFactory, height) {\n  const data = {\n    fields: fields,\n    records: records\n  };\n  const state = new DatagridState({}, data);\n  if (rowFactory) {\n    state.rowFactory = () => rowFactory(state.visibleFields);\n  }\n  state.fixedViewportHeight = height || 300;\n  selection.append('div')\n    .classed('search', true)\n    .call(rowf.setFilter, state);\n  selection.append('div')\n    .classed('table', true)\n    .call(sort.setSort, state)\n    .call(component.datagrid, state);\n  selection.datum(state);\n}\n\n\nfunction update(selection, fields, records) {\n  const data = {\n    fields: fields,\n    records: records\n  };\n  const state = selection.datum();\n  state.rows = new Collection(data);\n  state.updateContentsNotifier();\n}\n\n\nfunction updateRecords(selection, records) {\n  const state = selection.datum();\n  state.rows.contents[0].records = records;\n  state.updateContentsNotifier();\n}\n\n\nfunction tableRecords(selection) {\n  const state = selection.datum();\n  return state.rows.records();\n}\n\n\nexport default {\n  table, filterTable, filterSortTable, update, updateRecords, tableRecords\n};\n","\n/** @module dashboardApp */\n\nimport d3 from 'd3';\n\nimport {default as client} from './common/client.js';\nimport Collection from './common/collection.js';\nimport {default as fetcher} from './common/fetcher.js';\nimport {default as hfile} from './common/file.js';\nimport {default as idb} from './common/idb.js';\nimport {default as specs} from './common/specs.js';\n\nimport {default as badge} from './component/badge.js';\nimport {default as button} from './component/button.js';\nimport {default as modal} from './component/modal.js';\nimport {default as tree} from './component/tree.js';\n\nimport {default as searchDialog} from './dialog/search.js';\nimport {default as structDialog} from './dialog/struct.js';\nimport {default as filterDialog} from './dialog/filter.js';\nimport {default as screenerDialog} from './dialog/screener.js';\nimport {default as sdfDialog} from './dialog/sdf.js';\nimport {default as renameDialog} from './dialog/rename.js';\n\nimport {default as table} from './datagrid/table.js';\n\n\nfunction viewNode(selection, record) {\n  const instance = record.instance || record.parent;\n  selection.append('span').classed('arrow', true);\n  const node = record.viewID\n    ? selection.append('a')\n      .attr(\n        'href',\n        `${record.viewType}.html?instance=${instance}&view=${record.viewID}`\n      )\n      .attr('target', '_blank')\n    : selection;\n  node.append('img')\n      .classed('icon', true)\n      .classed('mr-1', true)\n      .style('width', '2rem')\n      .style('height', '2rem');\n  node.append('span')\n      .classed('title', true)\n      .classed('mr-1', true);\n  selection.append('span')\n      .classed('status', true)\n      .classed('mr-1', true);\n  selection.append('span')\n      .classed('action', true)\n      .classed('p-1', true)\n      .style('border', '1px solid #999999')\n      .style('border-radius', '5px');\n}\n\n\nfunction updateViewNode(selection, record) {\n  const iconv = {\n    'datagrid': 'table-darkorange', 'network': 'network-turquoise',\n    'tile': 'tiles-yellowgreen'\n  };\n  const icon = record.viewID ? iconv[record.viewType] : 'file-seagreen';\n  selection.select('.icon')\n      .attr('src', icon ? `${button.iconBaseURL}${icon}.svg` : null);\n  selection.select('.title')\n      .text(record.name);\n  const colors = {\n    done: 'green', running: 'darkorange',\n    ready: 'cornflowerblue', queued: 'cornflowerblue',\n    interrupted: 'salmon', aborted: 'salmon', failure: 'salmon',\n    rows: 'gray', items: 'gray',\n    nodes: 'gray', edges: 'gray'\n  };\n  const icons = {\n    done: 'check-green', running: 'running-darkorange',\n    ready: 'clock-cornflowerblue', queued: 'clock-cornflowerblue',\n    interrupted: 'caution-salmon', aborted: 'caution-salmon',\n    failure: 'caution-salmon',\n    rows: 'table-gray', items: 'tiles-gray',\n    nodes: 'nodes-gray', edges: 'edges-gray'\n  };\n\n  // View status\n  const status = selection.select('.status');\n  status.selectAll('*').remove();\n  if (record.viewID) {\n    record.stats.forEach(stat => {\n      status.append('img')\n          .attr('src', `${button.iconBaseURL}${icons[stat[0]]}.svg`)\n          .style('width', '1rem')\n          .style('height', '1rem');\n      status.append('span')\n          .style('font-size', '0.8rem')\n          .style('color', colors[stat[0]])\n          .text(stat[1]);\n    });\n  } else {\n    status.append('span')\n        .style('font-size', '0.7rem')\n        .style('color', '#999999')\n        .text(record.sessionStarted);\n  }\n\n  // Actions\n  const action = selection.select('.action');\n  action.selectAll('*').remove();\n  const actionIcon = (sel, icon) => sel.append('img')\n      .attr('src', `${button.iconBaseURL}${icon}.svg`)\n      .classed('mx-1', true)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  if (!record.viewID) {\n    action.append('a').call(actionIcon, 'menu-export')\n        .on('click', () => {\n          const data = JSON.parse(JSON.stringify(record));\n          delete data.instance;\n          delete data.sessionStarted;\n          hfile.downloadJSON(data, data.name);\n        });\n  }\n  action.append('a')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', '#rename-dialog')\n      .call(actionIcon, 'menu-edittext')\n      .on('click', () =>{\n        d3.select('#rename-dialog')\n          .call(renameDialog.updateBody, record.name)\n          .on('submit', function () {\n            d3.select('#menubar .loading-circle')\n                .style('display', 'inline-block');\n            if (record.viewID) {\n              idb.updateView(record.parent, record.viewID, view => {\n                view.name = renameDialog.value(d3.select(this));\n              }).then(updateApp);\n            } else {\n              idb.updateItem(record.instance, item => {\n                item.name = renameDialog.value(d3.select(this));\n              }).then(updateApp);\n            }\n          });\n      });\n  if (!record.ongoing) {\n    const recordType = record.viewID ? record.viewType : 'package';\n    const deleteType = record.alone ? 'package' : recordType;\n    const deleteName = record.alone ? record.parentName : record.name;\n    action.append('a')\n        .attr('data-toggle', 'modal')\n        .attr('data-target', '#delete-dialog')\n        .call(actionIcon, 'delete-gray')\n        .on('click', () =>{\n          d3.select('#delete-dialog')\n            .call(\n              modal.updateConfirmDialog,\n              `Are you sure you want to delete ${deleteType} ${deleteName} ?`\n            )\n            .on('submit', () => {\n              d3.select('#menubar .loading-circle')\n                  .style('display', 'inline-block');\n              if (record.viewID && !record.alone) {\n                idb.deleteView(record.parent, record.viewID)\n                  .then(updateApp);\n              } else {\n                idb.deleteItem(record.id || record.parent)\n                  .then(updateApp);\n              }\n            });\n        });\n  }\n  action.selectAll('img')\n    .on('mouseenter', function() {\n      d3.select(this).style('background-color', '#ffcccc');\n    })\n    .on('mouseleave', function() {\n      d3.select(this).style('background-color', null);\n    });\n}\n\n\nfunction app() {\n  // Menubar\n  const menubar = d3.select('#menubar')\n      .classed('my-1', true);\n  // Start\n  const startMenu = menubar.append('div')\n      .call(button.dropdownMenuButton, 'Start', 'primary', 'plus-white')\n      .select('.dropdown-menu');\n  startMenu.append('a').classed('online-command', true)\n      .call(searchDialog.menuLink);\n  startMenu.append('a').classed('online-command', true)\n      .call(structDialog.menuLink);\n  startMenu.append('a').classed('online-command', true)\n      .call(filterDialog.menuLink);\n  startMenu.append('a').classed('online-command', true)\n      .call(screenerDialog.menuLink);\n  startMenu.append('a').classed('online-command', true)\n      .call(sdfDialog.menuLink);\n  startMenu.append('a')\n      .call(button.dropdownMenuFile, 'Open file',\n            '.apc,.apr,.ndc,.ndr,.gfc,.gfr,.json,.gz', 'menu-import')\n      .on('change', function () {\n        d3.select('#menubar .loading-circle').style('display', 'inline-block');\n        const file = button.dropdownMenuFileValue(d3.select(this));\n        return hfile.loadJSON(file)\n          .then(idb.importItem)\n          .then(updateApp);\n      });\n  // Refresh\n  menubar.append('a')\n      .classed('refresh', true)\n      .classed('online-command', true)\n      .call(button.menuButtonLink,\n            'Refresh all', 'outline-secondary', 'refresh-gray')\n      .on('click', () => {\n        d3.select('#menubar .loading-circle').style('display', 'inline-block');\n        return updateApp();\n      });\n  // Delete all\n  menubar.append('a')\n      .classed('reset', true)\n      .call(button.menuModalLink, 'reset-dialog',\n            'Reset local datastore', 'warning', 'delete-gray');\n  // Status\n  menubar.append('span')\n      .classed('loading-circle', true)\n      .call(badge.loadingCircle);\n\n  // Contents\n  const contents = d3.select('#contents')\n      .style('padding-left', '10%')\n      .style('padding-right', '10%');\n\n  // Stored analysis packages\n  contents.append('h5').classed('mt-5', true).text('Packages on local storage');\n  contents.append('div').classed('mb-5', true)\n      .classed('stored', true)\n      .style('border', '1px solid #333333');\n\n  // Server calc jobs\n  // TODO: only for admin\n  const calcFields = [\n    {key: 'workflowID', name: 'WorkflowID', format: 'text'},\n    {key: 'name', name: 'Name', format: 'text'},\n    {key: 'size', name: 'File size', format: 'd3_format', d3_format: '.3s'},\n    {key: 'status', name: 'Status', format: 'text'},\n    {key: 'created', name: 'Created', format: 'date', height: 40}\n  ];\n  contents.append('h5').classed('mt-5', true).text('Server calculation job');\n  contents.append('div').classed('mb-5', true).classed('calc', true)\n  .call(table.table, calcFields, [], null, 300);\n\n  // Server status\n  const serverFields = [\n    {key: 'key', name: 'Key', format: 'text'},\n    {key: 'value', name: 'Value', format: 'text'}\n  ];\n  contents.append('h5').classed('mt-5', true).text('Server status');\n  contents.append('div').classed('mb-5', true).classed('server', true)\n  .call(table.table, serverFields, [], null, 300);\n\n  // Dialogs\n  const dialogs = d3.select('#dialogs');\n  dialogs.append('div')\n      .classed('searchd', true)\n      .call(searchDialog.body);\n  dialogs.append('div')\n      .classed('structd', true)\n      .call(structDialog.body);\n  dialogs.append('div')\n      .classed('filterd', true)\n      .call(filterDialog.body);\n  dialogs.append('div')\n      .classed('screenerd', true)\n      .call(screenerDialog.body);\n  dialogs.append('div')\n      .classed('sdfd', true)\n      .call(sdfDialog.body);\n  dialogs.append('div')\n      .classed('renamed', true)\n      .call(renameDialog.body);\n  dialogs.append('div')\n      .call(modal.confirmDialog, 'reset-dialog')\n      .call(modal.updateConfirmDialog,\n            'Are you sure you want to delete all local tables and reset the datastore ?')\n      .on('submit', () => {\n        d3.select('#menubar .loading-circle').style('display', 'inline-block');\n        return idb.clearAll().then(updateApp);\n      });\n  dialogs.append('div')\n      .call(modal.confirmDialog, 'delete-dialog');\n\n  // Update\n  return updateApp();\n}\n\n\nfunction updateApp() {\n  const onLoading = d3.select('#menubar .loading-circle');\n  const dialogs = d3.select('#dialogs');\n\n  // Server bound tasks\n  return fetcher.serverStatus().then(response => {\n    // Update server status table\n    d3.select('#contents').select('.calc')\n      .call(table.updateRecords, response.server.calc.records);\n    const serverRecords = Object.entries(response.server)\n      .filter(e => e[0] !== 'calc')\n      .map(e => {\n        const v = e[0] === 'externalModules'\n          ? JSON.stringify(e[1].map(e => e.name)) : e[1];\n        return {key: e[0], value: v};\n      });\n    d3.select('#contents').select('.server')\n      .call(table.updateRecords, serverRecords);\n\n    // Dialogs\n    const chemrsrc = response.schema.resources.filter(e => e.domain === 'chemical');\n    dialogs.select('.searchd')\n        .call(searchDialog.updateBody, chemrsrc)\n        .on('submit', function () {\n          return searchDialog.execute(d3.select(this), chemrsrc)\n            .then(idb.newDatagrid)\n            .then(r => {\n              onLoading.style('display', 'none');\n              window.open(\n                `datagrid.html?instance=${r.instance}&view=${r.viewID}`, '_blank');\n            });\n        });\n    dialogs.select('.structd')\n        .call(structDialog.updateBody, chemrsrc, response.server.rdkit)\n        .on('submit', function () {\n          return structDialog.execute(d3.select(this))\n            .then(idb.newDatagrid)\n            .then(r => {\n              onLoading.style('display', 'none');\n              window.open(\n                `datagrid.html?instance=${r.instance}&view=${r.viewID}`, '_blank');\n            });\n        });\n    dialogs.select('.filterd')\n        .call(filterDialog.updateBody, chemrsrc)\n        .on('submit', function () {\n          return filterDialog.execute(d3.select(this))\n            .then(idb.newDatagrid)\n            .then(r => {\n              onLoading.style('display', 'none');\n              window.open(\n                `datagrid.html?instance=${r.instance}&view=${r.viewID}`, '_blank');\n            });\n        });\n\n    // screener extention\n    const mod = response.server.externalModules\n      .find(e => e.module === 'contrib.screenerapi');\n    if (mod) {\n      dialogs.select('.screenerd')\n          .call(screenerDialog.updateBody, mod.base_url)\n          .on('submit', function () {\n            screenerDialog.execute(d3.select(this))\n              .then(() => {\n                onLoading.style('display', 'none');\n                return updateApp();\n              });\n          });\n    }\n\n    dialogs.select('.sdfd')\n        .call(sdfDialog.updateBody, chemrsrc)\n        .on('submit', function () {\n          return sdfDialog.execute(d3.select(this))\n            .then(idb.newDatagrid)\n            .then(r => {\n              onLoading.style('display', 'none');\n              window.open(\n                `datagrid.html?instance=${r.instance}&view=${r.viewID}`, '_blank');\n            });\n        });\n\n    // Form auto-fill for debug (Ctrl+F)\n    client.registerCtrlCommand('f', () => {\n      const activeID = dialogs.select('.show').attr('id');\n      const modals = {\n        'search-dialog': searchDialog,\n        'struct-dialog': structDialog,\n        'filter-dialog': filterDialog\n      };\n      dialogs.select(`#${activeID}`).call(modals[activeID].fill);\n    });\n\n    // Fetch all ongoing tasks\n    return idb.getAllCollections()\n      .then(colls => {\n        const ongoings = colls.map(e => new Collection(e))\n          .filter(e => e.ongoing());\n        return Promise.all(ongoings.map(o => o.pull()));\n      });\n  })\n  .catch(err => {\n    console.info('Server did not respond');\n    console.error(err);\n    // disable on-line commands\n    d3.select('#menubar').selectAll('.online-command')\n      .attr('data-target', null)\n      .classed('disabled', true);\n    d3.select('#contents').select('.calc').text('Off-line');\n    d3.select('#contents').select('.server').text('Off-line');\n  })\n  .finally(() => {\n    // update stored package tree\n    return idb.getAllItems().then(items => {\n      const treeNodes = [{id: 'root'}];\n      const ogs = [];\n      items.forEach(pkg => {\n        pkg.parent = 'root';\n        pkg.ongoing = specs.isRunning(pkg);\n        ogs.push(pkg.ongoing);\n        treeNodes.push(pkg);\n        pkg.views.forEach(view => {\n          view.parent = pkg.id;\n          view.ongoing = pkg.ongoing;\n          view.alone = pkg.views.length <= 1;\n          view.parentName = pkg.name;\n          view.stats = ['nodes', 'edges', 'rows', 'items']\n            .filter(e => view.hasOwnProperty(e))\n            .map(e => [e,\n              d3.format(\".3~s\")(\n                pkg.dataset.find(d => d.collectionID === view[e])\n                  .contents.reduce((a, b) => a + b.records.length, 0))]);\n          const coll = new Collection(pkg.dataset\n            .find(d => d.collectionID === view[\n              ['edges', 'rows', 'items'].filter(e => view.hasOwnProperty(e))[0]\n            ]));\n          const statusText = coll.status() === 'done' ? '' : coll.status();\n          const progText = coll.ongoing() ? `${coll.progress()}%` : '';\n          view.stats.push([coll.status(), `${statusText}${progText}`]);\n          treeNodes.push(view);\n        });\n      });\n      d3.select('.reset')\n          .classed('disabled', ogs.some(e => e));\n      d3.select('.stored')\n          .call(tree.tree()\n            .bodyHeight(300)\n            .nodeEnterFactory(viewNode)\n            .nodeMergeFactory(updateViewNode), treeNodes\n          );\n      onLoading.style('display', 'none');\n    });\n  });\n}\n\n\nfunction run() {\n  const err = client.compatibility();\n  if (err) {\n    d3.select('body')\n      .style('color', '#ff0000')\n      .text(err);\n    return;\n  }\n  // TODO: show browser status\n  // TODO: offline mode flags\n  const localFile = document.location.protocol !== \"file:\";  // TODO\n  const offLine = 'onLine' in navigator && !navigator.onLine;  // TODO\n  console.info(`Kiwiii version ${kwVersion}`)\n  client.registerServiceWorker();\n  app();\n}\n\n\nexport default {\n  run\n};\n"],"names":["URLQuery","pairs","window","location","search","substring","split","map","e","_","fromPairs","compatibility","indexedDB","registerServiceWorker","navigator","isDebugBuild","console","info","addEventListener","serviceWorker","register","registerCtrlCommand","key","callback","document","event","ctrlKey","sortType","fmt","includes","formatNum","value","d3format","undefined","Number","isNaN","parseFloat","d3","format","partialMatch","query","target","toString","toUpperCase","indexOf","uuidv4","replace","c","r","Math","random","statusConv","Queued","In progress","Aborting","Aborted","Completed","Failure","dataTypeConv","datatable","connection","v07_to_v08_nodes","json","fields","columns","sort","id","name","dataType","schemaVersion","revision","status","records","taskCount","searchCount","doneCount","searchDoneCount","resultCount","recordCount","progress","execTime","created","startDate","responseDate","v10_nodes","reference","convertNetwork","data","edges","hasOwnProperty","nodes","nodeFields","snp","fieldTransform","snapshot","nodePositions","nodeColor","nodeSize","nodeLabel","edge","scale","field","find","column","domain","range","unknown","size","text","visible","nodeContent","structure","label","nodeTableId","networkThreshold","v07_to_v08_edges","nodesID","idx_converter","forEach","i","index","_structure","_index","source","v08_graph","nodeContentVisible","schemeCategory20","nodeLabelColor","edgeVisible","edgeWidth","edgeLabel","threshold","coords","params","v10_edges","$schema","convertPackage","specs","now","Date","isNW","v08_nodes","width","height","convertTable","views","dataset","push","collectionID","contents","workflowID","workflow","viewID","viewType","rows","sortOrder","filterText","checkpoints","type","date","description","networkThresholdCutoff","filter","view","minConnThld","currentConnThld","edgeColor","color","edgeLabelColor","connect","version","createObj","Promise","resolve","reject","request","open","onsuccess","this","result","onerror","onupgradeneeded","currentTarget","instance","pkgs","db","createObjectStore","keyPath","assets","clear","dbid","then","req","transaction","objectStore","getAllItems","res","openCursor","cursor","continue","getItem","get","putItem","put","updateItem","updater","obj","upd","clearAll","all","deleteItem","delete","getView","pkg","appendView","viewObj","item","pos","findIndex","splice","updateView","isFunction","deleteView","bin","Object","entries","entry","getAllCollections","items","flatten","coll","getCollection","collID","addCollection","collObj","updateCollection","importItem","legacy","misc","slice","sessionStarted","newDatagrid","response","toLocaleString","timeZone","addDatagrid","add384Tiles","rowCount","columnCount","chunksPerRow","newNetwork","nodesName","edgesID","getAsset","putAsset","content","baseURL","url","q","keys","length","JSON","stringify","fetch","credentials","Error","statusText","blob","post","formdata","method","body","error","err","serverStatus","server","schema","batchRequest","reqs","interval","ress","setTimeout","singleToMulti","mapping","newMapping","m","mappingToTable","mp","concat","rcd","f","tableToMapping","table","ignore","row","csvToMapping","csvString","lines","header","shift","headerIdx","h","line","values","k","Array","apply","fd","uniqBy","Collection","[object Object]","autoIndex","addField","fs","mapper","func","command","fetcher","idb","sum","some","min","readFile","file","sizeLimit","reader","FileReader","truncated","onload","readAsArrayBuffer","readAsText","parseJSON","compressed","pako","inflate","to","parse","downloadDataFile","URL","createObjectURL","Blob","a","createElement","download","href","dispatchEvent","MouseEvent","bubbles","cancelable","loadJSON","endsWith","fetchJSON","decoded","decodeURIComponent","arrayBuffer","downloadJSON","compress","str","gzip","isRunning","assetBaseURL","iconBaseURL","badge","selection","classed","append","style","updateBadge","icon","select","attr","notify","transition","duration","ease","easeLinear","delay","on","loadingCircle","alert","updateAlert","invalidFeedback","updateInvalidMessage","msg","buttonBox","menuButton","menuButtonLink","menuModalLink","dropdownMenuButton","button","dropdownMenuItem","dropdownMenuModal","dropdownMenuFile","accept","node","click","dropdownMenuFileValue","files","dialogBase","confirmDialog","base","call","footer","dispatch","updateConfirmDialog","message","submitDialog","title","html","$","modal","tree","bodyHeight","keyDef","d","parentDef","parent","defaultLevel","nodeEnterFactory","nodeMergeFactory","nextLevel","selectAll","exit","remove","enter","each","merge","children","depth","childList","expanded","_tree","root","stratify","parentId","lv","checkboxNode","updateCheckbox","record","checkboxValues","formValue","property","formValid","checkValidity","setValidity","valid","textareaValid","test","fileInputBox","fileInputValid","updateFormValue","textBox","readonlyBox","updateReadonlyValue","readonlyValue","textareaBox","placeholder","textareaBoxLines","numberBox","updateNumberRange","max","step","checkBox","box","updateCheckBox","checked","checkBoxValue","colorBox","stopPropagation","clearFileInput","fileInputValue","monocolorBar","colors","group","colorBar","monocolor","bicolor","grad","tricolor","categorical","sw","custom","setSize","checklistValues","anyChecked","setChecklistValidity","setSelectedColorScale","selected","datum","shape","selectBox","updateSelectBoxOptions","options","selectedRecord","checklistBox","updateChecklistItems","listitems","form","checkRequired","updateChecklistValues","colorScaleBox","dropdown","colorScaleBoxItems","updateColorScaleBox","colorScaleBoxValue","colorScaleBoxItem","menuLink","mbody","lbox","updateBody","resources","def","execute","targets","fill","dropdownFormGroup","queryMolValues","textquery","areaquery","queryMolGroup","queryBox","ctabBox","popover","trigger","updateQueryMolResources","updateQueryMolValues","queryMolValid","textValid","ctabValid","simOptionGroup","collapse","timeoutBox","diamBox","updateSimOptionValues","ignoreHs","timeout","diameter","simOptionValues","diam","simOptionValid","timeoutValid","diamValid","dialogFormValid","qmolValid","thldValid","targetChecked","mcs","strMatch","rs","thldBox","rdk","methodList","measure","thld","queryMol","numValid","textValueBox","numValueBox","operator","qcsNode","updateQcsNode","iconType","dialog","screenerURL","off","meta","totalHitCount","cnt","chunks","ceil","limit","offset","op","rcds","treeNodes","dirs","experiment","folderName","dir","qcsRefId","qcsid","qcsRefIds","pv","cp","hfile","re","uniqCols","Set","arr","exec","add","from","getSDFPropList","fieldChecked","implh","recalc","formData","FormData","renameBox","updateHeader","state","visibleFields","headerCellRenderer","updateRows","recordsToShow","keyFunc","rowHeight","rowIndex","viewportTop","rowPos","rowFactory","updateViewport","scrollPos","setScrollPosition","scrollTop","resize","viewport","getBoundingClientRect","top","resizeViewport","innerHeight","viewportHeight","datagrid","floor","previousViewportTop","updateContentsNotifier","applyHeader","applyData","updateFilterNotifier","setFilterText","d3Format","d3_format","compoundID","image","checkbox","disabled","textField","asyncImage","asyncHtml","txt","cellFunc","numeric","raw","compound_id","assay_id","list","plot","plotCell","vega","View","initialize","run","plotThumbnail","vegaSpec","toImageURL","binaryToDataURI","binary","readAsDataURL","text_field","control","svg","async_image","async_html","rowCell","cell","DatagridState","sortedRecords","filteredRecords","defaultColumnHeight","none","scrollBarSpace","numViewportRows","viewportBottom","fixedViewportHeight","component","factory","position","setViewportSize","setNumViewportRows","widthfSum","reduce","widthf","assign","b","applyOrder","order","orderBy","orders","applyFilter","ki","updateFields","joinFields","ci","export","vi","setFilter","searchBox","setSort","isAsc","setSortOrder","filterTable","rowf","filterSortTable","update","updateRecords","tableRecords","viewNode","updateViewNode","network","tile","done","running","ready","queued","interrupted","aborted","failure","icons","stats","stat","action","actionIcon","sel","renameDialog","updateApp","ongoing","recordType","deleteType","alone","deleteName","parentName","onLoading","dialogs","calc","serverRecords","v","chemrsrc","searchDialog","structDialog","rdkit","filterDialog","mod","externalModules","module","screenerDialog","base_url","sdfDialog","client","activeID","modals","search-dialog","struct-dialog","filter-dialog","colls","ongoings","o","pull","catch","finally","ogs","progText","protocol","onLine","kwVersion","menubar","startMenu","app"],"mappings":"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"}