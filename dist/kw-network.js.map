{"version":3,"file":"kw-network.js","sources":["../src/common/misc.js","../src/common/legacySchema.js","../src/common/idb.js","../src/common/fetcher.js","../src/common/mapper.js","../src/common/collection.js","../src/common/transform.js","../src/common/scale.js","../src/component/formBox.js","../src/component/shape.js","../src/component/formListBox.js","../src/component/formRangeBox.js","../src/component/formBoxGroup.js","../src/component/controlBox.js","../src/component/button.js","../src/network/controlBox.js","../src/component/transform.js","../src/network/component.js","../src/network/interaction.js","../src/network/force.js","../src/network.js","../src/network/state.js"],"sourcesContent":["\n/** @module common/misc */\n\nimport d3 from 'd3';\n\n\n// TODO: re-define\nfunction sortType(fmt) {\n  if (['numeric', 'd3_format'].includes(fmt)) return 'numeric';\n  if (['text', 'compound_id', 'assay_id', 'list'].includes(fmt)) return 'text';\n  if (['text_field', 'checkbox', 'html'].includes(fmt)) return 'html';\n  return 'none';\n}\n\n\n/**\n * Format number\n * @param {object} value - value\n * @param {string} type - si | scientific | rounded | raw\n */\nfunction formatNum(value, d3format) {\n  if (value === undefined || value === null || Number.isNaN(value)) return '';\n  return value == parseFloat(value) ? d3.format(d3format)(value) : value;\n}\n\n\nfunction partialMatch(query, target) {\n  if (target === undefined || target === null || target === '') return false;\n  return target.toString().toUpperCase()\n    .indexOf(query.toString().toUpperCase()) !== -1;\n}\n\n\n// Ref. https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\nfunction uuidv4() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\n\nexport default {\n  sortType, formatNum, partialMatch, uuidv4\n};\n","\n/** @module common/legacySchema */\n\nimport d3 from 'd3';\n\n\nconst statusConv = {\n  Queued: 'ready',\n  'In progress': 'running',\n  Aborting: 'running',\n  Aborted: 'aborted',\n  Completed: 'done',\n  Failure: 'failure'\n};\n\nconst dataTypeConv = {\n  datatable: 'nodes',\n  connection: 'edges'\n};\n\nfunction v07_to_v08_nodes(json) {\n  const fields = json.columns.map(e => {\n    if (e.sort === 'numeric') {\n      e.format = 'numeric';\n    } else if (e.sort === 'text') {\n      e.format = 'text';\n    } else if (e.sort === 'none') {\n      e.format = 'raw';\n    }\n    return e;\n  });\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    status: statusConv[json.status],\n    fields: fields,\n    records: json.records,\n    query: json.query,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n  };\n}\n\nfunction v07_to_v08_edges(json, nodeFields) {\n  const snp = {\n    fieldTransform: json.snapshot.fieldTransform,\n    nodePositions: json.snapshot.nodePositions,\n    nodeColor: {},\n    nodeSize: {},\n    nodeLabel: {},\n    edge: {}\n  };\n  if (json.snapshot.hasOwnProperty('nodeColor')) {\n    snp.nodeColor.id = json.snapshot.nodeColor.id;\n    snp.nodeColor.scale = json.snapshot.nodeColor.scale;\n    snp.nodeColor.field = nodeFields.find(e => e.key === json.snapshot.nodeColor.column);\n  } else {\n    snp.nodeColor = {\n      id: 'color', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeSize')) {\n    snp.nodeSize.id = json.snapshot.nodeSize.id;\n    snp.nodeSize.scale = json.snapshot.nodeSize.scale;\n    snp.nodeSize.field = nodeFields.find(e => e.key === json.snapshot.nodeSize.column);\n  } else {\n    snp.nodeSize = {\n      id: 'size', field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: [20, 20], unknown: 20}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeLabel')) {\n    snp.nodeLabel.id = json.snapshot.nodeLabel.id;\n    snp.nodeLabel.size = json.snapshot.nodeLabel.size;\n    snp.nodeLabel.text = json.snapshot.nodeLabel.text;\n    snp.nodeLabel.visible = json.snapshot.nodeLabel.visible;\n    snp.nodeLabel.scale = json.snapshot.nodeLabel.scale;\n    snp.nodeLabel.field = nodeFields.find(e => e.key === json.snapshot.nodeLabel.column);\n  } else {\n    snp.nodeLabel = {\n      id: 'label', size: 12, text: 'index', visible: false, field: nodeFields[0],\n      scale: {scale: 'linear', domain: [0, 1], range: ['black', 'white'], unknown: 'gray'}\n    };\n  }\n  if (json.snapshot.hasOwnProperty('nodeContent')) {\n    snp.nodeContent = json.snapshot.nodeContent;\n  } else {\n    snp.nodeContent = {structure: {visible: false}};\n  }\n  if (json.snapshot.hasOwnProperty('edge')) {\n    snp.edge = json.snapshot.edge;\n  } else {\n    snp.edge = {\n      id: 'label', label: {size: 10, visible: false}, visible: true,\n      scale: {scale: 'linear', domain: [0, 1], range: [5, 5], unknown: 5}\n    };\n  }\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: dataTypeConv[json.format],\n    schemaVersion: 0.8,\n    revision: 0,\n    reference: {\n      nodes: json.nodeTableId\n    },\n    status: statusConv[json.status],\n    fields: [\n      {'key': 'source'},\n      {'key': 'target'},\n      {'key': 'weight'}\n    ],\n    records: json.records,\n    query: json.query,\n    networkThreshold: json.networkThreshold,\n    taskCount: json.searchCount,\n    doneCount: json.searchDoneCount | json.searchCount,\n    resultCount: json.recordCount,\n    progress: json.progress | 100,\n    execTime: json.execTime,\n    created: json.startDate | json.responseDate,\n    snapshot: snp\n  };\n}\n\n\nfunction v08_nodes(json) {\n  json.records.forEach((e, i) => {\n    e.index = i;\n    e.structure = e._structure;\n    delete e._index;\n    delete e._structure;\n  });\n  json.fields.forEach(e => {\n    if (e.key === '_index') e.key = 'index';\n    if (e.key === '_structure') e.key = 'structure';\n    if (e.sort === 'numeric') e.format = 'numeric';\n    if (e.sort === 'text') e.format = 'text';\n    if (e.sort === 'none') e.format = 'raw';\n  });\n  return json;\n}\n\nfunction v08_graph(json) {\n  if (!json.edges.hasOwnProperty('reference')) { // ver0.8.0-0.8.1\n    json.edges.reference = {nodes: json.edges.nodesID};\n  }\n  if (json.nodes.fields.find(e => e.key === '_index')) {\n    const idx_converter = {};\n    json.nodes.records.forEach((e, i) => {\n        e.index = i;\n        e.structure = e._structure;\n        idx_converter[e._index] = e.index;\n        delete e._index;\n        delete e._structure;\n    });\n    json.edges.records.forEach(e => {\n        e.source = idx_converter[e.source];\n        e.target = idx_converter[e.target];\n    });\n    json.nodes.fields.forEach(e => {\n      if (e.key === '_index') e.key = 'index';\n      if (e.key === '_structure') e.key = 'structure';\n      if (e.sort === 'numeric') e.format = 'numeric';\n      if (e.sort === 'text') e.format = 'text';\n      if (e.sort === 'none') e.format = 'raw';\n    });\n  }\n  return json;\n}\n\nfunction v10_nodes(json) {\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: json.dataType,\n    schemaVersion: '0.10',\n    revision: json.revision,\n    status: json.status,\n    fields: json.fields,\n    records: json.records,\n    query: json.query,\n    progress: json.progress,\n    execTime: json.execTime,\n    created: json.created,\n    reference: {}\n  };\n}\n\n\nfunction v10_edges(json) {\n  const snapshot = {\n    networkThreshold: json.networkThreshold\n  };\n  snapshot.nodeContentVisible = json.snapshot.nodeContent.structure.visible;\n  snapshot.nodeColor = json.snapshot.nodeColor.scale || {};\n  if (snapshot.nodeColor.field) {\n    snapshot.nodeColor.field = json.snapshot.nodeColor.field.key;\n    if (snapshot.nodeColor.field === '_index') {\n      snapshot.nodeColor.field = 'index';\n    }\n  }\n  if (snapshot.nodeColor.scale === 'ordinal') {\n    snapshot.nodeColor.range = d3.schemeCategory20;\n  }\n  snapshot.nodeSize = json.snapshot.nodeSize.scale || {};\n  if (json.snapshot.nodeSize.field) {\n    snapshot.nodeSize.field = json.snapshot.nodeSize.field.key;\n    if (snapshot.nodeSize.field === '_index') {\n      snapshot.nodeSize.field = 'index';\n    }\n  }\n  snapshot.nodeLabel = {};\n  if (json.snapshot.nodeLabel.text) {\n    snapshot.nodeLabel.text = json.snapshot.nodeLabel.text.key;\n    if (snapshot.nodeLabel.text === '_index') {\n      snapshot.nodeLabel.text = 'index';\n    }\n  }\n  snapshot.nodeLabel.size = json.snapshot.nodeLabel.size;\n  snapshot.nodeLabel.visible = json.snapshot.nodeLabel.visible;\n  snapshot.nodeLabelColor = json.snapshot.nodeLabel.scale || {};\n  if (json.snapshot.nodeLabel.field) {\n    snapshot.nodeLabelColor.field = json.snapshot.nodeLabel.field.key;\n    if (snapshot.nodeLabelColor.field === '_index') {\n      snapshot.nodeLabelColor.field = 'index';\n    }\n  }\n  if (snapshot.nodeLabelColor.scale === 'ordinal') {\n    snapshot.nodeLabelColor.range = d3.schemeCategory20;\n  }\n  snapshot.edgeVisible = json.snapshot.edge.visible;\n  snapshot.edgeWidth = json.snapshot.edge.scale || {};\n  snapshot.edgeLabel = {};\n  snapshot.edgeLabel.size = json.snapshot.edge.label.size;\n  snapshot.edgeLabel.visible = json.snapshot.edge.label.visible;\n  snapshot.networkThreshold = json.networkThreshold || json.query.threshold;\n  snapshot.coords = json.snapshot.nodePositions;\n  // TODO: when created date is lost\n  return {\n    id: json.id,\n    name: json.name,\n    dataType: json.dataType,\n    schemaVersion: '0.10',\n    revision: json.revision,\n    status: json.status,\n    fields: json.fields,\n    records: json.records,\n    query: {params: json.query},\n    progress: json.progress,\n    execTime: json.execTime,\n    created: json.created,\n    snapshot: snapshot,\n    reference: json.reference\n  };\n}\n\nfunction convertTable(json) {\n  let data = json;\n  if (!(data.hasOwnProperty('schemaVersion') || data.hasOwnProperty('$schema'))) { // v0.7\n    data = v07_to_v08_nodes(data);\n  }\n  if (data.schemaVersion == '0.8') {\n    data = v08_nodes(data);\n    data = v10_nodes(data);\n  }\n  if (!data.hasOwnProperty('$schema')) {\n    delete data.schemaVersion;\n    delete data.revision;\n    data.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n  }\n  data.fields.forEach(e => {\n    if (e.key === 'structure') {\n      e.format = 'svg';\n    }\n    delete e.width;\n    delete e.height;\n  });\n  return data;\n}\n\nfunction convertNetwork(json) {\n  let data = json;\n  if (!(data.edges.hasOwnProperty('schemaVersion') || data.edges.hasOwnProperty('$schema'))) { // v0.7\n    data.nodes = v07_to_v08_nodes(data.nodes);\n    data.edges = v07_to_v08_edges(data.edges, data.nodes.fields);\n  }\n  if (data.edges.schemaVersion == '0.8' || data.edges.schemaVersion === 0.1) {  // wrong conversion of '0.10'\n    data = v08_graph(data);\n    data.nodes = v10_nodes(data.nodes);\n    data.edges = v10_edges(data.edges);\n  }\n  if (!data.edges.hasOwnProperty('$schema')) {\n    delete data.nodes.schemaVersion;\n    delete data.edges.schemaVersion;\n    delete data.nodes.revision;\n    delete data.edges.revision;\n    data.nodes.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n    data.edges.$schema = \"https://mojaie.github.io/flashflood/_static/specs/job_result_v1.0.json\";\n  }\n  return data;\n}\n\n\nfunction convertPackage(json) {\n  let specs = {};\n  if (!json.hasOwnProperty('views')) {\n    const now = new Date();\n    const isNW = json.hasOwnProperty('edges');\n    const data = isNW ? convertNetwork(json) : convertTable(json);\n    const nodes = isNW ? data.nodes : data;\n    specs = {\n      $schema: \"https://mojaie.github.io/kiwiii/specs/package_v1.0.json\",\n      name: data.edges.name,\n      views: [],\n      dataset: []\n    };\n    specs.dataset.push({\n      $schema: \"https://mojaie.github.io/kiwiii/specs/collection_v1.0.json\",\n      collectionID: nodes.id,\n      name: nodes.name,\n      contents: [{\n        $schema: nodes.$schema,\n        workflowID: nodes.reference.workflow,\n        name: nodes.name,\n        fields: nodes.fields,\n        records: nodes.records,\n        created: nodes.created,\n        status: nodes.status,\n        query: nodes.query,\n        execTime: nodes.execTime,\n        progress: nodes.progress\n      }]\n    });\n    specs.views.push({\n      $schema: \"https://mojaie.github.io/kiwiii/specs/datagrid_v1.0.json\",\n      viewID: nodes.id,\n      name: nodes.name,\n      viewType: \"datagrid\",\n      rows: nodes.id,\n      fields: nodes.fields,\n      sortOrder: null,\n      filterText: null,\n      checkpoints: [{\n        type: 'convert',\n        date: now.toString(),\n        description: 'converted from legacy format'\n      }]\n    });\n    if (isNW) {\n      specs.dataset.push({\n        $schema: \"https://mojaie.github.io/kiwiii/specs/collection_v1.0.json\",\n        collectionID: data.edges.id,\n        name: data.edges.name,\n        contents: [{\n          $schema: data.edges.$schema,\n          workflowID: data.edges.reference.workflow,\n          name: data.edges.name,\n          fields: data.edges.fields,\n          records: data.edges.records,\n          created: data.edges.created,\n          status: data.edges.status,\n          query: data.edges.query,\n          execTime: data.edges.execTime,\n          progress: data.edges.progress\n        }]\n      });\n      specs.views.push({\n        $schema: \"https://mojaie.github.io/kiwiii/specs/network_v1.0.json\",\n        viewID: data.edges.id,\n        name: data.edges.name,\n        viewType: \"network\",\n        nodes: nodes.id,\n        edges: data.edges.id,\n        nodeColor: data.edges.snapshot.nodeColor,\n        nodeSize: data.edges.snapshot.nodeSize,\n        nodeLabel: data.edges.snapshot.nodeLabel,\n        nodeLabelColor: data.edges.snapshot.nodeLabelColor,\n        edgeWidth: data.edges.snapshot.edgeWidth,\n        edgeLabel: data.edges.snapshot.edgeLabel,\n        networkThreshold: data.edges.snapshot.networkThreshold,\n        networkThresholdCutoff: data.edges.snapshot.networkThresholdCutoff,\n        fieldTransform: data.edges.snapshot.fieldTransform,\n        coords: data.edges.snapshot.coords,\n        checkpoints: [{\n          type: 'convert',\n          date: now.toString(),\n          description: 'converted from legacy format'\n        }]\n      });\n    }\n    specs.views.filter(e => e.viewType === 'network')\n      .forEach(view => {\n        view.minConnThld = view.networkThresholdCutoff;\n        view.currentConnThld = view.networkThreshold;\n        if (view.hasOwnProperty('nodeLabel')) {\n          view.nodeLabel.field = view.nodeLabel.text;\n        }\n        if (view.hasOwnProperty('edgeLabel')) {\n          view.edgeLabel.field = 'weight';\n        }\n        if (view.hasOwnProperty('edgeWidth')) {\n          view.edgeWidth.field = 'weight';\n        }\n      });\n  } else {\n    specs = json;\n  }\n  specs.views.filter(e => e.viewType === 'network')\n    .forEach(view => {\n      if (!view.nodeColor.field) { view.nodeColor.field = 'index' ;}\n      if (!view.nodeSize.field) { view.nodeSize.field = 'index' ;}\n      if (!view.nodeLabel.field) { view.nodeLabel.field = 'index' ;}\n      if (!view.nodeLabelColor.field) { view.nodeLabelColor.field = 'index' ;}\n      if (!view.edgeColor) {\n        view.edgeColor = {\n          field: 'weight', color: 'monogray',\n          scale: 'linear', domain: [0, 1],\n          range: ['#999999', '#999999'], unknown: '#cccccc'\n        };\n      } else if (!view.edgeColor.field) { view.edgeColor.field = 'weight' ;}\n      if (!view.edgeWidth.field) { view.edgeWidth.field = 'weight' ;}\n      if (!view.edgeLabel.field) { view.edgeLabel.field = 'weight' ;}\n      if (!view.edgeLabelColor) {\n        view.edgeLabelColor = {\n          field: 'weight', color: 'monoblack',\n          scale: 'linear', domain: [1, 1],\n          range: ['#333333', '#333333'], unknown: '#cccccc'\n        };\n      } else if (!view.edgeLabelColor.field) { view.edgeLabelColor.field = 'weight' ;}\n    });\n  return specs;\n}\n\n\nexport default {\n  convertPackage\n};\n","\n/** @module common/idb */\n\nimport _ from 'lodash';\nimport Dexie from 'Dexie';\n\nimport {default as misc} from './misc.js';\nimport {default as legacy} from './legacySchema.js';\n\n// TODO: need package, view and dataset tables?\nconst schema = {\n  items: 'storeID, sessionStarted'\n};\n\nlet idb = new Dexie('Store');\nidb.version(1).stores(schema);\n\n\n/**\n * Delete all data store\n * Try this before dealing with local db issues\n */\nfunction reset() {\n  return idb.delete().then(() => {\n    idb = new Dexie('Store');\n    idb.version(1).stores(schema);\n  });\n}\n\n\n/**\n * Returns all data store items\n * @return {array} data store objects\n */\nfunction getAllItems() {\n  return idb.items\n    .orderBy('sessionStarted')\n    .reverse()\n    .toArray();\n}\n\n\n/**\n * Get data store items by store ID\n * @param {string} storeID - store ID\n * @return {array} data store object\n */\nfunction getItem(storeID) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .first()\n    .catch(err => {\n      console.error(`IDBError: Unexpected table ID: ${storeID}`, err);\n    });\n}\n\n\n/**\n * Update data object in the store\n * @param {string} storeID - store ID\n * @param {function} updateFunc - update function\n * @return {integer} - number of updated items\n */\nfunction updateItem(storeID, updateFunc) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .modify(updateFunc)\n    .catch(err => {\n      console.error('IDBError: Update failed', err);\n    });\n}\n\n\n/**\n * Delete a data object from the store\n * @param {string} storeID - store ID\n * @return {integer} - number of deleted items\n */\nfunction deleteItem(storeID) {\n  return idb.items\n    .where('storeID')\n    .equals(storeID)\n    .delete();\n}\n\n\n/**\n * Returns a view\n * @param {string} storeID - store ID\n * @param {string} viewID - view ID\n * @return {array} view objects\n */\nfunction getView(storeID, viewID) {\n  return getAllItems()\n    .then(items => items.find(e => e.storeID === storeID).views)\n    .then(views => {\n      const view = views.find(e => e.viewID === viewID);\n      if (!view) return;\n      view.storeID = storeID;\n      return view;\n    });\n}\n\n\n/**\n * Append a view next to a specific view\n * @param {string} storeID - store ID\n * @param {string} viewID - view ID\n * @param {object} viewObj - view object\n */\nfunction appendView(storeID, viewID, viewObj) {\n  return updateItem(storeID, item => {\n    const pos = item.views.findIndex(e => e.viewID === viewID);\n    item.views.splice(pos + 1, 0, viewObj);\n  });\n}\n\n\n/**\n * Update view\n * @param {string} storeID - store ID\n * @param {string} viewID - view ID\n * @param {object} viewObj - view object or update function\n */\nfunction updateView(storeID, viewID, viewObj) {\n  return updateItem(storeID, item => {\n    const pos = item.views.findIndex(e => e.viewID === viewID);\n    if (_.isFunction(viewObj)) {\n      viewObj(item.views[pos]);\n    } else {\n      item.views[pos] = viewObj;\n    }\n  });\n}\n\n\n/**\n * Delete a data object from the store\n * @param {string} storeID - store ID\n * @return {integer} - number of deleted items\n */\nfunction deleteView(storeID, viewID) {\n  return updateItem(storeID, item => {\n    const pos = item.views.findIndex(e => e.viewID === viewID);\n    item.views.splice(pos, 1);\n    // prune orphaned collections\n    const bin = {};\n    item.dataset.forEach(e => { bin[e.collectionID] = 0; });\n    item.views.forEach(view => {\n      ['rows', 'items', 'nodes', 'edges']\n        .filter(e => view.hasOwnProperty(e))\n        .forEach(e => { bin[view[e]] += 1; });\n    });\n    Object.entries(bin).forEach(entry => {\n      if (!entry[1]) {\n        const i = item.dataset.findIndex(e => e.collectionID === entry[0]);\n        item.dataset.splice(i, 1);\n      }\n    });\n  });\n}\n\n\n/**\n * Returns all collections in the store\n * @return {array} Collection objects\n */\nfunction getAllCollections() {\n  return getAllItems()\n    .then(items => _.flatten(\n      items.map(item => {\n        return item.dataset.map(coll => {\n          coll.storeID = item.storeID;\n          return coll;\n        });\n      })\n    ));\n}\n\n\n/**\n * Returns a collection\n * @param {string} storeID - store ID\n * @param {string} collID - Collection ID\n * @return {array} Collection objects\n */\nfunction getCollection(storeID, collID) {\n  return getAllItems()\n    .then(items => items.find(e => e.storeID === storeID).dataset)\n    .then(colls => {\n      const coll = colls.find(e => e.collectionID === collID);\n      if (!coll) return;\n      coll.storeID = storeID;\n      return coll;\n    });\n}\n\n\n/**\n * Update collection\n * @param {string} storeID - store ID\n * @param {string} collID - Collection ID\n * @param {object} collObj - Collection object or update function\n */\nfunction updateCollection(storeID, collID, collObj) {\n  return updateItem(storeID, item => {\n    const pos = item.dataset.findIndex(e => e.collectionID === collID);\n    if (_.isFunction(collObj)) {\n      collObj(item.dataset[pos]);\n    } else {\n      item.dataset[pos] = collObj;\n    }\n  });\n}\n\n\n/**\n * Insert a data object to the store\n * @param {object} data - data\n * @return {string} - storeID if sucessfully added\n */\nfunction importItem(data) {\n  // Legacy format converter\n  data = legacy.convertPackage(data);\n\n  const now = new Date();\n  data.storeID = misc.uuidv4().slice(0, 8);\n  data.sessionStarted = now.toString();\n  return idb.items.put(data);\n}\n\n\n/**\n * Insert a data object to the store\n * @param {object} response - response data\n * @return {string} - viewID if sucessfully added\n */\nfunction newDatagrid(response) {\n  const now = new Date();\n  const date = now.toLocaleString('en-GB', { timeZone: 'Asia/Tokyo'});\n  const storeID = misc.uuidv4().slice(0, 8);\n  const viewID = misc.uuidv4().slice(0, 8);\n  const collectionID = response.workflowID.slice(0, 8);\n  const data = {\n    $schema: \"https://mojaie.github.io/kiwiii/specs/package_v1.0.json\",\n    storeID: storeID,\n    name: response.name,\n    views: [\n      {\n        $schema: \"https://mojaie.github.io/kiwiii/specs/datagrid_v1.0.json\",\n        viewID: viewID,\n        name: response.name,\n        viewType: \"datagrid\",\n        rows: collectionID,\n        checkpoints: [\n          {type: 'creation', date: date}\n        ]\n      }\n    ],\n    dataset: [\n      {\n        $schema: \"https://mojaie.github.io/kiwiii/specs/collection_v1.0.json\",\n        collectionID: collectionID,\n        name: response.name,\n        contents: [response]\n      }\n    ],\n    sessionStarted: date\n  };\n  return idb.items.put(data)\n    .then(() => ({storeID: storeID, viewID:viewID}));\n}\n\n\n/**\n * Store new network view\n * @param {string} storeID - Store ID\n * @param {string} nodesID - ID of nodes collection\n * @param {string} nodesName - Name of nodes collection\n * @param {object} response - Response object\n */\nfunction newNetwork(storeID, nodesID, nodesName, response) {\n  const viewID = misc.uuidv4().slice(0, 8);\n  const edgesID = response.workflowID.slice(0, 8);\n  return updateItem(storeID, item => {\n    item.views.push({\n      $schema: \"https://mojaie.github.io/kiwiii/specs/network_v1.0.json\",\n      viewID: viewID,\n      name: `${nodesName}_${response.name}`,\n      viewType: 'network',\n      nodes: nodesID,\n      edges: edgesID,\n      minConnThld: response.query.params.threshold\n    });\n    item.dataset.push({\n      $schema: \"https://mojaie.github.io/kiwiii/specs/collection_v1.0.json\",\n      collectionID: edgesID,\n      name: response.name,\n      contents: [response]\n    });\n  }).then(() => viewID);\n}\n\n\nexport default {\n  reset, getAllItems, getItem, updateItem, deleteItem,\n  getView, appendView, updateView, deleteView,\n  getAllCollections, getCollection, updateCollection,\n  importItem, newDatagrid, newNetwork\n};\n","\n/** @module common/fetcher */\n\n\nconst baseURL = '../req/';\n\nfunction get(url, query={}) {\n  const isEmpty = Object.keys(query).length;\n  const q = isEmpty ? `?query=${JSON.stringify(query)}` : '';\n  return fetch(\n    `${baseURL}${url}${q}`,\n    {\n      credentials: 'include'\n    }\n  ).then(res => {\n    if (res.status !== 200) {\n      return Promise.reject(new Error(res.statusText));\n    }\n    return Promise.resolve(res);\n  });\n}\n\nfunction json(response) {\n  return response.json();\n}\n\nfunction text(response) {\n  return response.text();\n}\n\nfunction blob(response) {\n  return response.blob();\n}\n\nfunction post(url, formdata) {\n  return fetch(\n    `${baseURL}${url}`,\n    {\n      method: 'POST',\n      body: formdata,\n      credentials: 'include'\n    }\n  ).then(res => {\n    if (res.status !== 200) {\n      return Promise.reject(new Error(res.statusText));\n    }\n    return Promise.resolve(res);\n  });\n}\n\nfunction error(err) {\n  console.error(err);\n  return null;\n}\n\nfunction serverStatus() {\n  const response = {};\n  return get('server')\n    .then(json)\n    .then(res => {\n      response.server = res;\n    })\n    .then(() => get('schema'))\n    .then(json)\n    .then(res => {\n      response.schema = res;\n    })\n    .then(() => response);\n}\n\n\nexport default {\n  get, json, text, blob, post, error, serverStatus\n};\n","\n/** @module common/mapper */\n\nimport _ from 'lodash';\n\n\n/**\n * Convert single field mapping to multi field mapping\n * @param {object} mapping - single field mapping\n * @return {object} multi field mapping\n */\nfunction singleToMulti(mapping) {\n  const newMapping = {};\n  Object.entries(mapping.mapping).forEach(m => {\n    newMapping[m[0]] = [m[1]];\n  });\n  return {\n    created: mapping.created,\n    fields: [mapping.field],\n    key: mapping.key,\n    mapping: newMapping\n  };\n}\n\n\n/**\n * Convert field mapping to table\n * @param {object} mapping - field mapping\n * @return {object} table object\n */\nfunction mappingToTable(mapping) {\n  const mp = mapping.hasOwnProperty('field') ? singleToMulti(mapping) : mapping;\n  const keyField = {key: mp.key, format: 'text'};\n  const data = {\n    fields: [keyField].concat(mp.fields),\n    records: Object.entries(mp.mapping).map(entry => {\n      const rcd = {};\n      rcd[mp.key] = entry[0];\n      mp.fields.forEach((f, i) => {\n        rcd[f.key] = entry[1][i];\n      });\n      return rcd;\n    })\n  };\n  return data;\n}\n\n\n/**\n * Convert table to field mapping\n * @param {object} table - table\n * @param {object} key - key\n * @return {object} field mapping\n */\nfunction tableToMapping(table, key, ignore=['index']) {\n  const now = new Date();\n  const mapping = {\n    created: now.toString(),\n    fields: table.fields.filter(e => e.key !== key)\n      .filter(e => !ignore.includes(e.key)),\n    key: key,\n    mapping: {}\n  };\n  table.records.forEach(row => {\n    mapping.mapping[row[key]] = mapping.fields.map(e => row[e.key]);\n  });\n  return mapping;\n}\n\n\n/**\n * Convert csv text to field mapping\n * @param {string} csvString - csv data text\n * @return {object} field mapping\n */\nfunction csvToMapping(csvString) {\n  const lines = csvString.split(/\\n|\\r|\\r\\n/);\n  const header = lines.shift().split(',');\n  const key = header.shift();\n  const now = new Date();\n  const headerIdx = [];\n  const fields = [];\n  header.forEach((h, i) => {\n    if (h === '') return;\n    headerIdx.push(i);\n    fields.push({key: h, format: 'text'});\n  });\n  const mapping = {\n    created: now.toString(),\n    fields: fields,\n    key: key,\n    mapping: {}\n  };\n  lines.forEach(line => {\n    const values = line.split(',');\n    const k = values.shift();\n    mapping.mapping[k] = Array(headerIdx.length);\n    headerIdx.forEach(i => {\n      mapping.mapping[k][i] = values[i];\n    });\n  });\n  return mapping;\n}\n\n\n/**\n * Apply mapping to the data (in-place)\n * @param {object} data - datatable JSON\n * @param {object} mapping - mapping JSON\n * @return {undefined} undefined\n */\nfunction apply(data, mapping) {\n  const mp = mapping.hasOwnProperty('field') ? singleToMulti(mapping) : mapping;\n  data.records\n    .filter(rcd => mp.mapping.hasOwnProperty(rcd[mp.key]))\n    .forEach(rcd => {\n      mp.fields.forEach((fd, i) => {\n        rcd[fd.key] = mp.mapping[rcd[mp.key]][i];\n      });\n    });\n  data.fields =  _(data.fields)\n    .concat(mp.fields)\n    .uniqBy('key')\n    .value();\n}\n\nexport default {\n  singleToMulti, mappingToTable, tableToMapping, csvToMapping, apply\n};\n","\n/** @module common/collection */\n\nimport _ from 'lodash';\n\nimport {default as idb} from './idb.js';\nimport {default as fetcher} from './fetcher.js';\nimport {default as mapper} from './mapper.js';\n\n\nexport default class Collection {\n  /**\n   * Create Collection from a flashflood response datatable\n   * If data is not specified, put datatables later by this.append(data)\n   * @param {object} coll - Collection or response object\n   */\n  constructor(coll) {\n    // Settings\n    this.autoIndex = 'index';  // enumerate records\n\n    this.collectionID = coll.collectionID || null;\n    this.storeID = coll.storeID || null;\n    this.name = coll.name || null;\n    if (coll.records) {\n      this.contents = [coll];\n      this.fields = [];\n    } else {\n      this.contents = coll.contents;\n      this.fields = coll.fields || [];\n    }\n    this.contents.forEach(content => {\n      content.fields.forEach(e => this.addField(e));\n    });\n  }\n\n  /**\n   * Add fields\n   * @param {array} fs - list of fields\n   */\n  addField(field) {\n    if (this.fields.find(e => e.key === field.key)) return;\n    if (!field.hasOwnProperty('name')) field.name = field.key;\n    if (!field.hasOwnProperty('visible')) field.visible = true;\n    if (field.hasOwnProperty('d3_format')) field.format = 'd3_format';\n    if (!field.hasOwnProperty('format')) field.format = 'raw';\n    this.fields.push(field);\n  }\n\n  /**\n   * Update fields properties\n   * @param {array} fs - list of fields\n   */\n  updateFields(fs) {\n    this.fields = [];\n    fs.forEach(e => this.addField(e));\n  }\n\n  /**\n   * Join fields\n   * @param {object} mapping - column mapper object\n   */\n  joinFields(mapping) {\n    this.contents.forEach(c => {\n      mapper.apply(c, mapping);\n    });\n    if (mapping.hasOwnProperty('fields')) {\n      mapping.fields.forEach(e => this.addField(e));\n    } else {\n      this.addField(mapping.field);\n    }\n  }\n\n  /**\n   * Apply function to the original data records\n   * new fields should be manually added by Collection.addField\n   * @param {function} func - function to be applied\n   */\n  apply(func) {\n    this.contents.forEach(content => {\n      content.records.forEach(rcd => {\n        func(rcd);\n      });\n    });\n  }\n\n  /**\n   * Return all records of the collection\n   * @return {array} records\n   */\n  records() {\n    return _.flatten(this.contents.map(e => e.records));\n  }\n\n  fetch(command) {\n    const fs = this.contents\n      .filter(e => ['running', 'ready', 'interrupted', 'queued'].includes(e.status))\n      .map(content => {\n        const query = {id: content.workflowID, command: command};\n        return fetcher.get('progress', query)\n          .then(fetcher.json)\n          .then(data => {\n            return idb.updateCollection(this.storeID, this.collectionID, coll => {\n              const i = coll.contents\n                .findIndex(e => e.workflowID === query.id);\n              if (data.status === 'failure') {  // No data found on server\n                coll.contents[i].status = 'failure';\n              } else {\n                coll.contents[i] = data;\n              }\n            });\n          });\n      });\n    return Promise.all(fs)\n      .then(() => idb.getCollection(this.storeID, this.collectionID))\n      .then(coll => {\n        this.contents = coll.contents;\n      });\n  }\n\n  /**\n   * Retrieve workflows and store it into a local store.\n   * @return {Promise}\n   */\n  pull() {\n    return this.fetch('pull');\n  }\n\n  /**\n   * Retrieve workflows, abort all ongoing workflow task\n   * and store it into a local store.\n   * @return {Promise}\n   */\n  abort() {\n    return this.fetch('abort');\n  }\n\n  /**\n   * Return total number of records\n   * @return {float} total number of records\n   */\n  size() {\n    return _.sum(this.contents.map(e => e.records.length));\n  }\n\n  /**\n   * Return status\n   * @return {string} status\n   */\n  status() {\n    if (this.contents.some(e => e.status === 'interrupted')) return 'interrupted';\n    if (this.contents.some(e => e.status === 'running')) return 'running';\n    if (this.contents.some(e => e.status === 'queued')) return 'queued';\n    if (this.contents.some(e => e.status === 'ready')) return 'ready';\n    if (this.contents.some(e => e.status === 'aborted')) return 'aborted';\n    if (this.contents.some(e => e.status === 'failure')) return 'failure';\n    return 'done';\n  }\n\n  /**\n   * Return ongoing or not\n   * @return {bool} ongoing or not\n   */\n  ongoing() {\n    const s = ['ready', 'queued', 'running', 'interrupted'];\n    return s.includes(this.status());\n  }\n\n  /**\n   * Return percentage of workflow progress\n   * @return {float} progress in percent\n   */\n  progress() {\n    return _.min(this.contents.map(e => e.progress));\n  }\n\n  /**\n   * Return total execution time\n   * @return {float} total time\n   */\n  execTime() {\n    return _.sum(this.contents.map(e => e.execTime));\n  }\n\n  /**\n   * Export collection object as JSON\n   * @return {object} collection JSON\n   */\n  export() {\n    return {\n      $schema: \"https://mojaie.github.io/kiwiii/specs/collection_v1.0.json\",\n      collectionID: this.collectionID,\n      name: this.name,\n      fields: this.fields,\n      contents: this.contents\n    };\n  }\n}\n","\n/** @module common/transform */\n\nimport d3 from 'd3';\n\n\nexport default class TransformState {\n  constructor(width, height, transform) {\n    this.fieldWidth = width;\n    this.fieldHeight = height;\n\n    this.viewBox = {\n      top: 0,\n      right: this.fieldWidth,\n      bottom: this.fieldHeight,\n      left: 0\n    };\n\n    this.focusArea = {};\n    this.focusAreaMargin = 50;\n\n    this.boundary = {\n      top: 0,\n      right: this.fieldWidth,\n      bottom: this.fieldHeight,\n      left: 0\n    };\n\n    this.transform = transform || {x: 0, y: 0, k: 1};\n    this.prevTransform = {\n      x: this.transform.x,\n      y: this.transform.y,\n      k: this.transform.k\n    };\n\n    this.resizeNotifier = () => {};\n  }\n\n  setFocusArea() {\n    const tx = this.transform.x;\n    const ty = this.transform.y;\n    const tk = this.transform.k;\n    const margin = this.focusAreaMargin;\n    this.focusArea.top = (this.viewBox.top - ty) / tk - margin;\n    this.focusArea.left = (this.viewBox.left - tx) / tk - margin;\n    this.focusArea.bottom = (this.viewBox.bottom - ty) / tk + margin;\n    this.focusArea.right = (this.viewBox.right - tx) / tk + margin;\n    // this.showFocusArea();  // debug\n  }\n\n  setViewBox(width, height) {\n    this.viewBox.right = width;\n    this.viewBox.bottom = height;\n    // this.showViewBox();  // debug\n    this.setFocusArea();\n  }\n\n  setTransform(tx, ty, tk) {\n    this.transform.x = tx;\n    this.transform.y = ty;\n    this.transform.k = tk;\n    // this.showTransform(); // debug\n    this.setFocusArea();\n  }\n\n  fitTransform() {\n    const vh = this.viewBox.bottom;\n    const vw = this.viewBox.right;\n    const vr = vw / vh;\n    const bh = this.boundary.bottom - this.boundary.top;\n    const bw = this.boundary.right - this.boundary.left;\n    const br = bw / bh;\n    const isPortrait = vr >= br;\n    const tk = isPortrait ? vh / bh : vw / bw;\n    const adjustH = isPortrait ? (vw - bw * tk) / 2 : 0;\n    const adjustV = isPortrait ? 0 : (vh - bh * tk) / 2;\n    const tx = -(this.boundary.left) * tk + adjustH;\n    const ty = -(this.boundary.top) * tk + adjustV;\n    this.setTransform(tx, ty, tk);\n  }\n\n  showTransform() {\n    d3.select('#debug-transform')\n      .text(JSON.stringify(this.transform));\n  }\n\n  showFocusArea() {\n    d3.select('#debug-focusarea')\n      .text(JSON.stringify(this.focusArea));\n  }\n\n  showViewBox() {\n    d3.select('#debug-viewbox')\n      .text(JSON.stringify(this.viewBox));\n  }\n}\n","\n/** @module common/scale */\n\nimport d3 from 'd3';\n\n\nconst colorScales = [\n  {key: 'monoblack', type: 'monocolor', colors: ['#333333'], unknown: '#333333'},\n  {key: 'monogray', type: 'monocolor', colors: ['#cccccc'], unknown: '#cccccc'},\n  {key: 'nodeDefault', type: 'monocolor', colors: ['#7fffd4'], unknown: '#7fffd4'},\n  {key: 'aquamarine', type: 'bicolor',\n   colors: ['#778899', '#7fffd4'], unknown: '#f0f0f0'},\n  {key: 'chartreuse', type: 'bicolor',\n   colors: ['#778899', '#7fff00'], unknown: '#f0f0f0'},\n  {key: 'salmon', type: 'bicolor',\n   colors: ['#778899', '#fa8072'], unknown: '#f0f0f0'},\n  {key: 'violet', type: 'bicolor',\n   colors: ['#778899', '#ee82ee'], unknown: '#f0f0f0'},\n  {key: 'temperature', type: 'tricolor',\n   colors: ['#87ceeb', '#fff5ee', '#fa8072'], unknown: '#f0f0f0'},\n  {key: 'spectrum', type: 'tricolor',\n   colors: ['#6495ed', '#ccff66', '#ffa500'], unknown: '#f0f0f0'},\n  {key: 'category10', type: 'categorical',\n   colors: ['#8dd3c7','#ffffb3','#bebada','#fb8072','#80b1d3','#fdb462',\n    '#b3de69','#fccde5','#bc80bd','#ccebc5'], unknown: '#f0f0f0'},\n  {key: 'cbsafe', type: 'categorical',\n   colors: ['#543005','#8c510a','#bf812d','#dfc27d','#f6e8c3','#c7eae5',\n   '#80cdc1','#35978f','#01665e','#003c30'], unknown: '#f0f0f0'},\n  {key: 'category20', type: 'categorical',\n   colors: d3.schemePaired.concat(d3.schemeSet2), unknown: '#f0f0f0'},\n  {key: 'category40', type: 'categorical',\n   colors: d3.schemePaired.concat(d3.schemePastel2, d3.schemeSet2, d3.schemeSet3),\n   unknown: '#f0f0f0'},\n  {key: 'custom', type: 'custom', colors: ['#ffffff'], text: 'custom'}\n];\n\n\nconst types = [\n  {key: 'linear', name: 'Linear', func: d3.scaleLinear},\n  {key: 'log', name: 'Log', func: d3.scaleLog},\n  {key: 'quantize', name: 'Quantize', func: d3.scaleQuantize},\n  {key: 'ordinal', name: 'Ordinal', func: d3.scaleOrdinal}\n];\n\n\nfunction scaleFunction(state) {\n  const cscale = colorScales.find(e => e.key === state.color);\n  let range;\n  let unknown;\n  if (cscale && cscale.key !== 'custom') {\n      range = cscale.colors;\n      unknown = cscale.unknown;\n  } else {\n    range = state.range;\n    unknown = state.unknown;\n  }\n  let domain = null;\n  if (range.length === 3) {\n    const mid = (parseFloat(state.domain[0]) + parseFloat(state.domain[1])) / 2;\n    domain = [state.domain[0], mid, state.domain[1]];\n  } else {\n    domain = state.domain;\n  }\n  // Build\n  let scaleFunc = types.find(e => e.key === state.scale).func();\n  scaleFunc = scaleFunc.domain(domain);\n  scaleFunc = scaleFunc.range(range);\n  if (['linear', 'log'].includes(state.scale)) {\n    scaleFunc = scaleFunc.clamp(true);\n  }\n\n  return d => {\n    // Sanitize\n    if (d === '' || typeof d === 'undefined' || d === null) {\n      return unknown;  // invalid values\n    }\n    if (['linear', 'log'].includes(state.scale) && parseFloat(d) != d) {\n      return unknown;  // texts\n    }\n    if (state.scale === 'log' && d <= 0) {\n      return unknown;  // negative values in log scale\n    }\n    // Apply function\n    const result = scaleFunc(d);\n    if (result === undefined) {\n      return unknown;  // TODO: specify unexpected behavior\n    }\n    return result;\n  };\n}\n\n\nfunction isD3Format(notation) {\n  try {\n    d3.format(notation);\n  } catch (err) {\n    return false;\n  }\n  return true;\n}\n\n\nexport default {\n  colorScales, types, scaleFunction, isD3Format\n};\n","\n/** @module component/formBox */\n\n\nimport d3 from 'd3';\n\n\nfunction textBox(selection, label) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('type', 'text');\n}\n\nfunction updateTextBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\nfunction textBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n\nfunction readonlyBox(selection, label) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label);\n  selection.append('input')\n      .classed('form-control-plaintext', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('type', 'text')\n      .attr('readonly', 'readonly');\n}\n\n\nfunction textareaBox(selection, label, rows) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label);\n  selection.append('textarea')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('rows', rows);\n}\n\nfunction updateTextareaBox(selection, value) {\n  selection.select('textarea').property('value', value);\n}\n\nfunction updateTextareaPlaceholder(selection, placeholder) {\n  selection.select('textarea').attr('placeholder', placeholder);\n}\n\nfunction textareaBoxValue(selection) {\n  const value = selection.select('textarea').property('value');\n  if (value) return value;  // TODO: 0 is falsy\n  const placeholder = selection.select('textarea').attr('placeholder');\n  if (placeholder) return placeholder;\n  return '';\n}\n\nfunction textareaBoxLines(selection) {\n  const value = selection.select('textarea').property('value');\n  if (value) return value.split('\\n').filter(e => e.length > 0);\n  const placeholder = selection.select('textarea').attr('placeholder');\n  if (placeholder) return placeholder.split('\\n').filter(e => e.length > 0);\n  return [];\n}\n\n\nfunction checkBox(selection, label) {\n  const box = selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('form-check', true)\n    .append('label')\n      .classed('form-check-label', true)\n      .classed('col-form-label-sm', true);\n  box.append('input')\n      .classed('form-check-input', true)\n      .attr('type', 'checkbox');\n  box.append('span')\n      .text(label);\n}\n\nfunction updateCheckBox(selection, checked) {\n  selection.select('input').property('checked', checked);\n}\n\nfunction checkBoxValue(selection) {\n  return selection.select('input').property('checked');\n}\n\n\nfunction numberBox(selection, label, min, max, step) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label);\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true)\n      .attr('type', 'number')\n      .attr('min', min)\n      .attr('max', max)\n      .attr('step', step);\n}\n\nfunction updateNumberBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\nfunction numberIntValid(selection) {\n  const value = numberBoxIntValue(selection);\n  const min = parseInt(selection.select('input').attr('min'));\n  const max = parseInt(selection.select('input').attr('max'));\n  const valid = !isNaN(value) && value >= min && value <= max;\n  selection.select('input')\n      .style('background-color', valid ? '#ffffff' : '#ffcccc');\n  return valid;\n}\n\nfunction numberFloatValid(selection) {\n  const value = numberBoxFloatValue(selection);\n  const min = parseInt(selection.select('input').attr('min'));\n  const max = parseInt(selection.select('input').attr('max'));\n  const valid = !isNaN(value) && value >= min && value <= max;\n  selection.select('input')\n      .style('background-color', valid ? '#ffffff' : '#ffcccc');\n  return valid;\n}\n\nfunction numberBoxIntValue(selection) {\n  return parseInt(selection.select('input').property('value'));\n}\n\nfunction numberBoxFloatValue(selection) {\n  return parseFloat(selection.select('input').property('value'));\n}\n\n\n/**\n * Render color scale box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction colorBox(selection, label) {\n  selection\n      .classed('form-row', true)\n      .classed('align-items-center', true)\n      .on('change', () => {\n        // avoid update by mousemove on the colorpicker\n        d3.event.stopPropagation();\n      });\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true)\n      .text(label);\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true)\n    .append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .attr('type', 'color');\n}\n\n\nfunction updateColorBox(selection, value) {\n  selection.select('input').property('value', value);\n}\n\n\nfunction colorBoxValue(selection) {\n  return selection.select('input').property('value');\n}\n\n\nfunction fileInputBox(selection, label, accept) {\nselection\n    .classed('form-group', true)\n    .classed('form-row', true);\nselection.append('label')\n    .classed('col-form-label', true)\n    .classed('col-form-label-sm', true)\n    .classed('col-4', true)\n    .text(label);\nselection.append('input')\n    .classed('form-control', true)\n    .classed('form-control-sm', true)\n    .classed('form-control-file', true)\n    .classed('col-8', true)\n    .attr('type', 'file')\n    .attr('accept', accept);\n}\n\nfunction clearFileInput(selection) {\n  // TODO: FileList object (input.files) may be a readonly property\n  const accept = selection.select('input').attr();\n  selection.select('input').remove();\n  selection.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('form-control-file', true)\n      .classed('col-8', true)\n      .attr('type', 'file')\n      .attr('accept', accept);\n}\n\nfunction fileInputBoxValue(selection) {\n  return selection.select('input').property('files')[0];\n}\n\n\nexport default {\n  textBox, updateTextBox, textBoxValue, readonlyBox,\n  textareaBox, updateTextareaBox, updateTextareaPlaceholder,\n  textareaBoxValue, textareaBoxLines,\n  checkBox, updateCheckBox, checkBoxValue,\n  numberBox, updateNumberBox, numberIntValid, numberFloatValid,\n  numberBoxIntValue, numberBoxFloatValue,\n  colorBox, updateColorBox, colorBoxValue,\n  fileInputBox, clearFileInput, fileInputBoxValue\n};\n","\n/** @module component/shape */\n\nimport {default as misc} from '../common/misc.js';\n\n\nfunction monocolorBar(selection, colors, text) {\n  selection.attr('viewBox', '0 0 100 10')\n      .attr('preserveAspectRatio', 'none');\n  const group = selection.append('g');\n  group.append('rect')\n      .attr('x', 0).attr('y', 0)\n      .attr('width', 100).attr('height', 10)\n      .attr('fill', colors[0]);\n  group.append('text')\n      .attr('text-anchor', 'middle')\n      .attr('x', 50).attr('y', 10)\n      .attr('font-size', 12)\n      .text(text);\n}\n\nfunction bicolorBar(selection, colors, text) {\n  const id = misc.uuidv4().slice(0, 8);  // Aboid inline SVG ID dupulicate\n  selection.call(monocolorBar, colors, text);\n  const grad = selection.append('defs')\n    .append('linearGradient')\n      .attr('id', id);\n  grad.append('stop')\n      .attr('offset', 0).attr('stop-color', colors[0]);\n  grad.append('stop')\n      .attr('offset', 1).attr('stop-color', colors[1]);\n  selection.select('rect')\n      .attr('fill', `url(#${id})`);\n}\n\nfunction tricolorBar(selection, colors, text) {\n  const id = misc.uuidv4().slice(0, 8);  // Aboid inline SVG ID dupulicate\n  selection.call(monocolorBar, colors, text);\n  const grad = selection.append('defs')\n    .append('linearGradient')\n      .attr('id', id);\n  grad.append('stop')\n    .attr('offset', 0).attr('stop-color', colors[0]);\n  grad.append('stop')\n    .attr('offset', 0.5).attr('stop-color', colors[1]);\n  grad.append('stop')\n    .attr('offset', 1).attr('stop-color', colors[2]);\n  selection.select('rect')\n      .attr('fill', `url(#${id})`);\n}\n\nfunction categoricalBar(selection, colors, text) {\n  selection.attr('viewBox', '0 0 100 10')\n      .attr('preserveAspectRatio', 'none');\n  const sw = 100 / colors.length;\n  const group = selection.append('g');\n  colors.forEach((e, i) => {\n    group.append('rect')\n        .attr('x', sw * i).attr('y', 0)\n        .attr('width', sw).attr('height', 20)\n        .attr('fill', colors[i]);\n  });\n  group.append('text')\n      .attr('text-anchor', 'middle')\n      .attr('x', 50).attr('y', 20)\n      .attr('font-size', 20)\n      .text(text);\n}\n\nfunction setSize(selection, width, height) {\n  selection.attr('width', width).attr('height', height);\n}\n\n\nconst colorBar = {\n  'monocolor': monocolorBar,\n  'bicolor': bicolorBar,\n  'tricolor': tricolorBar,\n  'categorical': categoricalBar,\n  'custom': monocolorBar\n};\n\n\nexport default {\n  colorBar, setSize\n};\n","\n/** @module component/formListBox */\n\nimport d3 from 'd3';\n\nimport {default as shape} from './shape.js';\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction selectBox(selection, label) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label);\n  selection.append('select')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true);\n}\n\nfunction selectBoxItems(selection, items) {\n  const options = selection.select('select')\n    .selectAll('option')\n      .data(items, d => d.key);\n  options.exit().remove();\n  options.enter()\n    .append('option')\n      .attr('value', d => d.key)\n      .text(d => d.name);\n}\n\nfunction updateSelectBox(selection, value) {\n  selection.select('select').property('value', value);\n}\n\nfunction selectBoxValue(selection) {\n  return selection.select('select').property('value');\n}\n\n\n/**\n * Render select box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction checklistBox(selection, label) {\n  // TODO: scroll\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label);\n  selection.append('ul')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true);\n}\n\nfunction checklistBoxItems(selection, items) {\n  const listitems = selection.select('ul')\n    .selectAll('li')\n      .data(items, d => d.key);\n  listitems.exit().remove();\n  const form = listitems.enter()\n    .append('li')\n      .attr('class', 'form-check')\n    .append('label')\n      .attr('class', 'form-check-label');\n  form.append('input')\n      .attr('type', 'checkbox')\n      .attr('class', 'form-check-input')\n      .property('value', d => d.key);\n  form.append('span')\n      .text(d => d.name);\n}\n\nfunction updateChecklistBox(selection, values) {\n  if (!values) return;\n  selection.selectAll('input')\n    .each(function (d) {\n      d3.select(this).property('checked', values.includes(d.key));\n    });\n}\n\nfunction checklistBoxValue(selection) {\n  return selection.selectAll('input:checked').data().map(d => d.key);\n}\n\nfunction anyChecked(selection) {\n  return checklistBoxValue(selection).length > 0;\n}\n\n\nfunction colorScaleBox(selection, label) {\n  selection\n      .classed('form-group', true)\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .text(label || 'Colorscale');\n  const form = selection.append('div')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('col-8', true);\n  const dropdown = form.append('div')\n      .classed('btn-group', true)\n      .classed('mr-1', true);\n  dropdown.append('button')\n      .classed('btn', true)\n      .classed(`btn-light`, true)\n      .classed('btn-sm', true)\n      .classed('dropdown-toggle', true)\n      .attr('data-toggle', 'dropdown');\n  dropdown.append('div')\n      .classed('dropdown-menu', true)\n      .classed('py-0', true);\n  form.append('span')\n      .classed('selected', true);\n}\n\nfunction colorScaleBoxItems(selection, items) {\n  const listitems = selection.select('.dropdown-menu')\n    .selectAll('a')\n      .data(items, d => d);\n  listitems.exit().remove();\n  listitems.enter()\n    .append('a')\n      .classed('dropdown-item', true)\n      .classed('py-0', true)\n      .attr('href', '#')\n      .attr('title', d => d.key)\n      .on('click', function (d) {\n        selection.call(setSelectedColorScale, d);\n        selection.dispatch('change', {bubbles: true});\n      })\n    .append('svg')\n      .each(function (d) {\n        d3.select(this)\n          .call(shape.colorBar[d.type], d.colors, d.text)\n          .call(shape.setSize, 100, 10);\n      });\n}\n\nfunction setSelectedColorScale(selection, item) {\n  const selected = selection.select('.selected');\n  selected.selectAll('svg').remove();\n  selected.datum(item);  // Bind selected item record\n  selected.append('svg')\n      .call(shape.colorBar[item.type], item.colors, item.text)\n      .call(shape.setSize, 100, 10);\n}\n\nfunction updateColorScaleBox(selection, key) {\n  const data = selection.select('.dropdown-menu')\n    .selectAll('a').data();\n  const item = data.find(e => e.key === key);\n  selection.call(setSelectedColorScale, item);\n}\n\nfunction colorScaleBoxValue(selection) {\n  return selection.select('.selected').datum().key;\n}\n\nfunction colorScaleBoxItem(selection) {\n  return selection.select('.selected').datum();\n}\n\n\nexport default {\n  selectBox, selectBoxItems, updateSelectBox, selectBoxValue,\n  checklistBox, checklistBoxItems, updateChecklistBox, checklistBoxValue,\n  anyChecked,\n  colorScaleBox, colorScaleBoxItems, updateColorScaleBox,\n  colorScaleBoxValue, colorScaleBoxItem\n};\n","\n/** @module component/formRangeBox */\n\nimport d3 from 'd3';\n\n\n/**\n * Render range box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction rangeBox(selection, label) {\n  selection\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true)\n      .text(label);\n  const f = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-4', true)\n      .classed('mb-1', true);\n  f.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .text('min');\n  f.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('min', true)\n      .attr('type', 'text');\n  const t = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-4', true)\n      .classed('mb-1', true);\n  t.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .text('max');\n  t.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('max', true)\n      .attr('type', 'text');\n}\n\n\nfunction updateRangeBox(selection, range) {\n  selection.select('.min').property('value', range[0]);\n  selection.select('.max').property('value', range[1]);\n  selection.selectAll('.min,.max')\n    .on('input', function () {\n      if (!rangeBoxValid(selection)) {\n        d3.event.stopPropagation();\n      }\n    })\n    .dispatch('input', {bubbles: true});\n}\n\n\nfunction rangeBoxValid(selection) {\n  const min = selection.select('.min').property('value');\n  const max = selection.select('.max').property('value');\n  const valid = v => v !== '' && !isNaN(v);\n  selection.select('.min')\n      .style('background-color', valid(min) ? '#ffffff' : '#ffcccc');\n  selection.select('.max')\n      .style('background-color', valid(max) ? '#ffffff' : '#ffcccc');\n  return valid(min) && valid(max);\n}\n\n\nfunction rangeBoxValues(selection) {\n  return [\n    parseFloat(selection.select('.min').property('value')),\n    parseFloat(selection.select('.max').property('value'))\n  ];\n}\n\n\n/**\n * Render color scale box components\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction colorRangeBox(selection, label) {\n  selection\n      .classed('form-row', true)\n      .classed('align-items-center', true);\n  selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true)\n      .text(label);\n  const f = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true);\n  f.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .text('min');\n  f.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('min', true)\n      .attr('type', 'color');\n  const m = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true);\n  m.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .text('mid');\n  m.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('mid', true)\n      .attr('type', 'color');\n  const t = selection.append('div')\n      .classed('form-group', true)\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('col-3', true)\n      .classed('mb-1', true);\n  t.append('label')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('py-0', true)\n      .text('max');\n  t.append('input')\n      .classed('form-control', true)\n      .classed('form-control-sm', true)\n      .classed('max', true)\n      .attr('type', 'color');\n  selection\n      .on('change', () => {\n        // avoid update by mousemove on the colorpicker\n        d3.event.stopPropagation();\n      });\n}\n\n\nfunction updateColorRangeBox(selection, range) {\n  selection.select('.min').property('value', range[0]);\n  selection.select('.mid').property('value', range[1]);\n  selection.select('.max').property('value', range[2]);\n}\n\n\nfunction colorRangeBoxValues(selection) {\n  return [\n    selection.select('.min').property('value'),\n    selection.select('.mid').property('value'),\n    selection.select('.max').property('value')\n  ];\n}\n\n\nexport default {\n  rangeBox, updateRangeBox, rangeBoxValues, rangeBoxValid,\n  colorRangeBox, updateColorRangeBox, colorRangeBoxValues\n};\n","\n/** @module component/formBoxGroup */\n\nimport d3 from 'd3';\n\nimport {default as misc} from '../common/misc.js';\n\nimport {default as box} from './formBox.js';\nimport {default as lbox} from './formListBox.js';\nimport {default as rbox} from './formRangeBox.js';\n\n\n/**\n * Render color range control box group\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction colorRangeGroup(selection, colorScales) {\n  selection\n      .classed('mb-3', true);\n  selection.append('div')\n      .classed('colorscale', true)\n      .classed('mb-2', true)\n      .call(lbox.colorScaleBox, 'Colorscale')\n      .call(lbox.colorScaleBoxItems, colorScales);\n\n  // Custom colorscale\n  const id = misc.uuidv4().slice(0, 8);\n  selection.append('div')\n      .classed('form-row', true)\n      .classed('justify-content-end', true)\n    .append('button')\n      .classed('btn', true)\n      .classed('btn-sm', true)\n      .classed('btn-outline-primary', true)\n      .classed('dropdown-toggle', true)\n      .attr('data-toggle', 'collapse')\n      .attr('data-target', `#${id}-collapse`)\n      .attr('aria-expanded', 'false')\n      .attr('aria-controls', `${id}-collapse`)\n      .text('Custom colorscale');\n  const collapse = selection.append('div')\n      .classed('collapse', true)\n      .attr('id', `${id}-collapse`)\n    .append('div')\n      .classed('card', true)\n      .classed('card-body', true)\n      .classed('p-2', true);\n  const customColorRanges = [\n    {key: 'continuous', name: 'Continuous'},\n    {key: 'two-piece', name: 'Two-piece'}\n  ];\n  collapse.append('div')\n      .classed('rangetype', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, 'Range type')\n      .call(lbox.selectBoxItems, customColorRanges);\n  collapse.append('div')\n      .classed('range', true)\n      .classed('mb-1', true)\n      .call(rbox.colorRangeBox, 'Range');\n  collapse.append('div')\n      .classed('unknown', true)\n      .classed('mb-1', true)\n      .call(box.colorBox, 'Unknown');\n}\n\n\nfunction updateColorRangeGroup(selection, cscale, range, unknown) {\n  const customRange = () => {\n    const cs = lbox.colorScaleBoxValue(selection.select('.colorscale'));\n    const rg = lbox.selectBoxValue(selection.select('.rangetype'));\n    const customScale = cs === 'custom';\n    selection.selectAll('.rangetype, .range, .unknown')\n        .selectAll('select, input')\n        .property('disabled', !customScale)\n        .style('opacity',  customScale ? null : 0.3);\n    selection.select('.range').select('.mid')\n        .property('disabled', !customScale || rg === 'continuous')\n        .style('opacity', customScale && rg !== 'continuous' ? null : 0.3);\n  };\n  selection.select('.colorscale')\n      .call(lbox.updateColorScaleBox, cscale)\n      .on('change', function () {\n        customRange();\n      });\n  const rtype = range.length === 2 ? 'continuous' : 'two-piece';\n  selection.select('.rangetype')\n      .call(lbox.updateSelectBox, rtype)\n      .on('change', function () {\n        customRange();\n      })\n      .dispatch('change');\n  const rboxValues = range.length === 2  ? [range[0], null, range[1]] : range;\n  selection.select('.range')\n      .call(rbox.updateColorRangeBox, rboxValues)\n      .on('focusin', () => {\n        selection.dispatch('change', {bubbles: true});\n      });\n  selection.select('.unknown')\n      .call(box.updateColorBox, unknown)\n      .on('focusin', () => {\n        selection.dispatch('change', {bubbles: true});\n      });\n}\n\n\nfunction colorRangeGroupValue(selection) {\n  const colorScale = lbox.colorScaleBoxItem(selection.select('.colorscale'));\n  const rtype = lbox.selectBoxValue(selection.select('.rangetype'));\n  const range = rbox.colorRangeBoxValues(selection.select('.range'));\n  const unknown = box.colorBoxValue(selection.select('.unknown'));\n  return {\n    color: colorScale.key,\n    colorScaleType: colorScale.type,\n    range: rtype === 'continuous' ? [range[0], range[2]] : range,\n    unknown: unknown\n  };\n}\n\n\n/**\n * Render scale and domain control box group\n * @param {d3.selection} selection - selection of box container (div element)\n */\nfunction scaleBoxGroup(selection) {\n  const scaleOptions = [\n    {key: 'linear', name: 'Linear'},\n    {key: 'log', name: 'Log'}\n  ];\n  selection\n      .classed('mb-3', true);\n  selection.append('div')\n      .classed('scale', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, 'Scale')\n      .call(lbox.selectBoxItems, scaleOptions);\n  selection.append('div')\n      .classed('domain', true)\n      .classed('mb-1', true)\n      .call(rbox.rangeBox, 'Domain');\n}\n\n\nfunction updateScaleBoxGroup(selection, scale, domain) {\n  selection.select('.scale')\n      .call(lbox.updateSelectBox, scale);\n  selection.select('.domain')\n      .call(rbox.updateRangeBox, domain)\n      .on('input', function () {\n        scaleBoxGroupValid(selection);\n      });\n  selection.selectAll('.scale, .domain')\n      .on('change', function () {\n        if (!scaleBoxGroupValid(selection)) {\n          d3.event.stopPropagation();\n        }\n      });\n}\n\n\nfunction scaleBoxGroupValid(selection) {\n  if (!rbox.rangeBoxValid(selection.select('.domain'))) return false;\n  if (lbox.selectBoxValue(selection.select('.scale')) === 'linear') return true;\n  const values = rbox.rangeBoxValues(selection.select('.domain'));\n  selection.select('.domain').select('.min')\n      .style('background-color', values[0] > 0 ? '#ffffff' : '#ffcccc');\n  selection.select('.domain').select('.max')\n      .style('background-color', values[1] > 0 ? '#ffffff' : '#ffcccc');\n  const validScale = lbox.selectBoxValue(selection.select('.scale')) !== '';\n    selection.select('.scale').select('select')\n        .style('background-color', validScale ? '#ffffff' : '#ffcccc');\n  return values[0] > 0 && values[1] > 0 && validScale;\n}\n\n\nfunction scaleBoxGroupValue(selection) {\n  const scale = lbox.selectBoxValue(selection.select('.scale'));\n  const domain = rbox.rangeBoxValues(selection.select('.domain'));\n  return {\n    scale: scale || 'linear', \n    domain: domain\n  };\n}\n\n\nexport default {\n  colorRangeGroup, updateColorRangeGroup, colorRangeGroupValue,\n  scaleBoxGroup, updateScaleBoxGroup, scaleBoxGroupValue, scaleBoxGroupValid\n};\n","\n/** @module component/controlBox */\n\nimport d3 from 'd3';\n\nimport {default as box} from '../component/formBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as rbox} from '../component/formRangeBox.js';\nimport {default as group} from '../component/formBoxGroup.js';\n\n\nfunction colorControlBox(selection, colorScales, fieldName) {\n  selection.append('div')\n      .classed('field', true)\n      .call(lbox.selectBox, fieldName || 'Field');\n  selection.append('div')\n      .classed('range', true)\n      .call(group.colorRangeGroup, colorScales);\n  selection.append('div')\n      .classed('scale', true)\n      .call(group.scaleBoxGroup);\n}\n\n\nfunction updateColorControlBox(selection, fieldOptions, colorState) {\n  selection.select('.field')\n      .call(lbox.selectBoxItems, fieldOptions)\n      .call(lbox.updateSelectBox, colorState.field);\n  selection.select('.range')\n      .call(group.updateColorRangeGroup, colorState.color,\n            colorState.range, colorState.unknown);\n  selection.select('.scale')\n      .call(group.updateScaleBoxGroup, colorState.scale, colorState.domain);\n  selection.selectAll('.field, .range, .scale')\n      .on('change', function () {\n        if (!colorControlValid(selection)) {\n          d3.event.stopPropagation();\n        }\n      })\n      .dispatch('change');\n}\n\n\nfunction colorControlValid(selection) {\n  const values = group.colorRangeGroupValue(selection.select('.range'));\n  const noScale = ['categorical', 'monocolor'].includes(values.colorScaleType);\n  selection.select('.scale').selectAll('select,input')\n    .property('disabled', noScale)\n    .style('opacity', noScale ? 0.3 : null);\n  const scaleValid = group.scaleBoxGroupValid(selection.select('.scale'));\n  return noScale || scaleValid;\n}\n\n\nfunction colorControlBoxState(selection) {\n  const range = group.colorRangeGroupValue(selection.select('.range'));\n  const scale = group.scaleBoxGroupValue(selection.select('.scale'));\n  return {\n    field: lbox.selectBoxValue(selection.select('.field')),\n    color: range.color,\n    range: range.range,\n    unknown: range.unknown,\n    scale: range.colorScaleType === 'categorical' ? 'ordinal': scale.scale,\n    domain: scale.domain\n  };\n}\n\n\nfunction sizeControlBox(selection, fieldName) {\n  selection.append('div')\n      .classed('field', true)\n      .call(lbox.selectBox, fieldName || 'Field');\n  selection.append('div')\n      .classed('range', true)\n      .call(rbox.rangeBox, 'Range');\n  selection.append('div')\n      .classed('unknown', true)\n      .classed('mb-3', true)\n      .call(box.textBox, 'Unknown', 0, 1000, 1)\n    .select('input')\n      .classed('col-8', false)\n      .classed('col-3', true);\n  selection.append('div')\n      .classed('scale', true)\n      .call(group.scaleBoxGroup);\n}\n\n\nfunction updateSizeControlBox(selection, fieldOptions, sizeState) {\n  selection.select('.field')\n      .call(lbox.selectBoxItems, fieldOptions)\n      .call(lbox.updateSelectBox, sizeState.field);\n  selection.select('.range')\n      .call(rbox.updateRangeBox, sizeState.range);\n  selection.select('.unknown')\n      .call(box.updateTextBox, sizeState.unknown);\n  selection.select('.scale')\n      .call(group.updateScaleBoxGroup, sizeState.scale, sizeState.domain);\n  selection.selectAll('.range, .unknown')\n      .on('input', function () {\n        sizeRangeValid(selection);\n      });\n  selection.selectAll('.field, .range, .unknown, .scale')\n      .on('change', function () {\n        if (!sizeControlValid(selection)) {\n          d3.event.stopPropagation();\n        }\n      });\n}\n\nfunction sizeRangeValid(selection) {\n  if (!rbox.rangeBoxValid(selection.select('.range'))) return false;\n  const range = rbox.rangeBoxValues(selection.select('.range'));\n  const unk = box.textBoxValue(selection.select('.unknown'));\n  const validUnk = unk !== '' && !isNaN(unk) && unk > 0;\n  selection.select('.range').select('.min')\n      .style('background-color', range[0] > 0 ? '#ffffff' : '#ffcccc');\n  selection.select('.range').select('.max')\n      .style('background-color', range[1] > 0 ? '#ffffff' : '#ffcccc');\n  selection.select('.unknown').select('input')\n      .style('background-color', validUnk ? '#ffffff' : '#ffcccc');\n  return range[0] > 0 && range[1] > 0 && validUnk;\n}\n\n\nfunction sizeControlValid(selection) {\n  if (!group.scaleBoxGroupValid(selection.select('.scale'))) return false;\n  return sizeRangeValid(selection);\n}\n\n\nfunction sizeControlBoxState(selection) {\n  const scale = group.scaleBoxGroupValue(selection.select('.scale'));\n  return {\n    field: lbox.selectBoxValue(selection.select('.field')),\n    range: rbox.rangeBoxValues(selection.select('.range')),\n    unknown: box.textBoxValue(selection.select('.unknown')),\n    scale: scale.scale,\n    domain: scale.domain\n  };\n}\n\n\nfunction labelControlBox(selection, colorScales) {\n  // nodeLabel.visible\n  selection.append('div')\n    .append('div')\n      .classed('visible', true)\n      .call(box.checkBox, 'Show labels');\n  // nodeLabel\n  const labelGroup = selection.append('div')\n      .classed('mb-3', true);\n  labelGroup.append('div')\n      .classed('text', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, 'Text field');\n  labelGroup.append('div')\n      .classed('size', true)\n      .classed('mb-1', true)\n      .call(box.numberBox, 'Font size', 4, 100, 1);\n  // nodeLabelColor\n  selection.call(colorControlBox, colorScales, 'Color field');\n}\n\n\nfunction updateLabelControlBox(selection, fieldOptions,\n                               labelState, colorState) {\n  // nodeLabel.visible\n  selection.select('.visible')\n      .call(box.updateCheckBox, labelState.visible);\n  // nodeLabel.field\n  selection.select('.text')\n      .call(lbox.selectBoxItems, fieldOptions)\n      .call(lbox.updateSelectBox, labelState.field);\n  // nodeLabel.size\n  selection.select('.size')\n      .call(box.updateNumberBox, labelState.size)\n      .on('input', function () {\n        box.numberFloatValid(d3.select(this));\n      });\n  // nodeLabelColor\n  selection.call(updateColorControlBox, fieldOptions, colorState)\n      .selectAll('.visible, .text, .size, .field, .range, .scale')\n      .on('change', function () {\n        if (!labelControlValid(selection)) {\n          d3.event.stopPropagation();\n        }\n      })\n      .dispatch('change');\n}\n\n\nfunction labelControlValid(selection) {\n  if (!box.numberFloatValid(selection.select('.size'))) return false;\n  return colorControlValid(selection);\n}\n\n\nfunction labelControlBoxState(selection) {\n  return {\n    label: {\n      field: lbox.selectBoxValue(selection.select('.text')),\n      size: box.numberBoxFloatValue(selection.select('.size')),\n      visible: box.checkBoxValue(selection.select('.visible'))\n    },\n    labelColor: colorControlBoxState(selection)\n  };\n}\n\n\nfunction controlBoxFrame(selection, navID, contentID) {\n  selection.append('nav')\n    .append('div')\n      .classed('nav', true)\n      .classed('nav-tabs', true)\n      .attr('id', navID)\n      .attr('role', 'tablist');\n  selection.append('div')\n      .classed('tab-content', true)\n      .classed('p-2', true)\n      .attr('id', contentID);\n}\n\n\nfunction controlBoxNav(selection, id, label) {\n  selection\n      .classed('nav-item', true)\n      .classed('nav-link', true)\n      .classed('py-1', true)\n      .attr('id', `${id}-tab`)\n      .attr('data-toggle', 'tab')\n      .attr('href', `#${id}`)\n      .attr('role', 'tab')\n      .attr('aria-controls', id)\n      .attr('aria-selected', 'false')\n      .text(label);\n}\n\n\nfunction controlBoxItem(selection, id) {\n  selection\n      .classed('tab-pane', true)\n      .classed('fade', true)\n      .classed('container', true)\n      .classed('px-0', true)\n      .attr('id', id)\n      .attr('role', 'tabpanel')\n      .attr('aria-labelledby', `${id}-tab`);\n}\n\n\nexport default {\n  colorControlBox, updateColorControlBox, colorControlValid, colorControlBoxState,\n  sizeControlBox, updateSizeControlBox, sizeControlValid, sizeControlBoxState,\n  labelControlBox, updateLabelControlBox, labelControlValid, labelControlBoxState,\n  controlBoxFrame, controlBoxNav, controlBoxItem\n};\n","\n/** @module component/button */\n\nimport d3 from 'd3';\n\nconst iconBaseURL = '../assets/icon/';\n\n\nfunction buttonBox(selection, label, type) {\n  selection\n      .classed('form-group', true)\n      .classed('mb-1', true)\n    .append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .text(label);\n}\n\n\nfunction menuButton(selection, label, type) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .text(label);\n}\n\n\nfunction menuButtonLink(selection, label, type, icon) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('role', 'button')\n      .attr('href', '#');\n  selection.append('img')\n      .attr('src', icon ? `${iconBaseURL}${icon}.svg` : null)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  selection.append('span')\n      .style('vertical-align', 'middle')\n      .text(label);\n}\n\n\nfunction menuModalLink(selection, target, label, type, icon) {\n  selection\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed(`btn-sm`, true)\n      .classed('mr-1', true)\n      .attr('href', '#')\n      .attr('role', 'button')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`);\n  selection.append('img')\n      .attr('src', icon ? `${iconBaseURL}${icon}.svg` : null)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  selection.append('span')\n      .classed('label', true)\n      .style('vertical-align', 'middle')\n      .text(label);\n}\n\n\nfunction dropdownMenuButton(selection, label, type, icon) {\n  selection\n      .classed('btn-group', true)\n      .classed('mr-1', true);\n  const button = selection.append('button')\n      .classed('btn', true)\n      .classed(`btn-${type}`, true)\n      .classed('btn-sm', true)\n      .classed('dropdown-toggle', true)\n      .attr('data-toggle', 'dropdown');\n  button.append('img')\n      .attr('src', icon ? `${iconBaseURL}${icon}.svg` : null)\n      .style('width', '1.25rem')\n      .style('height', '1.25rem');\n  button.append('span')\n      .style('vertical-align', 'middle')\n      .text(label);\n  selection.append('div')\n      .classed('dropdown-menu', true);\n}\n\n\nfunction dropdownMenuItem(selection, label, icon) {\n  selection.classed('dropdown-item', true)\n      .attr('href', '#');\n  selection.append('img')\n      .attr('src', icon ? `${iconBaseURL}${icon}.svg` : null)\n      .classed('mr-1', true)\n      .style('width', '2rem')\n      .style('height', '2rem');\n  selection.append('span')\n      .text(label);\n}\n\nfunction dropdownMenuModal(selection, label, target, icon) {\n  selection.classed('dropdown-item', true)\n      .attr('href', '#')\n      .attr('data-toggle', 'modal')\n      .attr('data-target', `#${target}`);\n  selection.append('img')\n      .attr('src', `${iconBaseURL}${icon}.svg`)\n      .classed('mr-1', true)\n      .style('width', '2rem')\n      .style('height', '2rem');\n  selection.append('span')\n      .text(label);\n}\n\n\nfunction dropdownMenuFile(selection, label, accept, icon) {\n  selection.classed('dropdown-item', true)\n      .attr('href', '#')\n      .on('click', function () {\n        d3.select(this).select('input').node().click();\n      });\n  selection.append('form')\n      .style('display', 'none')\n    .append('input')\n      .attr('type', 'file')\n      .attr('accept', accept);\n  selection.append('img')\n      .attr('src', `${iconBaseURL}${icon}.svg`)\n      .classed('mr-1', true)\n      .style('width', '2rem')\n      .style('height', '2rem');\n  selection.append('span')\n      .text(label);\n}\n\n\nfunction dropdownMenuFileValue(selection) {\n  return selection.select('input').node().files[0];\n}\n\n\nexport default {\n  iconBaseURL, buttonBox, menuButton, menuButtonLink, menuModalLink,\n  dropdownMenuButton, dropdownMenuItem, dropdownMenuModal,\n  dropdownMenuFile, dropdownMenuFileValue\n};\n","\n/** @module network/controlBox */\n\nimport _ from 'lodash';\nimport d3 from 'd3';\n\nimport {default as misc} from '../common/misc.js';\nimport {default as cscale} from '../common/scale.js';\n\nimport {default as box} from '../component/formBox.js';\nimport {default as cbox} from '../component/controlBox.js';\nimport {default as lbox} from '../component/formListBox.js';\nimport {default as button} from '../component/button.js';\n\n\nfunction mainControlBox(selection, state) {\n  // Zoom\n  selection.append('div')\n      .classed('mb-3', true)\n    .append('div')\n      .classed('fit', true)\n      .call(button.buttonBox, 'Fit to screen', 'primary');\n  // View modes\n  const viewModes = selection.append('div')\n      .classed('mb-3', true);\n    viewModes.append('div')\n      .classed('focused', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, 'Enable focused view');\n    viewModes.append('div')\n      .classed('overlook', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, 'Enable overlook view');\n  // Network threshold\n  const thldGroup = selection.append('div')\n      .classed('thld-group', true)\n      .classed('mb-3', true);\n  thldGroup.append('div')\n      .classed('field', true)\n      .classed('mb-1', true)\n      .call(lbox.selectBox, 'Connection');\n  thldGroup.append('div')\n      .classed('thld', true)\n      .classed('mb-1', true)\n      .call(box.numberBox, 'Threshold', state.minConnThld, 1.000, 0.01);\n  thldGroup.append('div')\n      .classed('logd', true)\n      .classed('mb-1', true)\n      .call(box.readonlyBox, 'logD');\n  // Force layout\n  const forceBox = selection.append('div')\n      .classed('form-group', true)\n      .classed('form-row', true);\n  forceBox.append('div')\n      .classed('col-6', true)\n    .append('span')\n      .classed('col-form-label', true)\n      .classed('col-form-label-sm', true)\n      .classed('mb-1', true)\n      .text('Temperature');\n  forceBox.append('div')\n      .classed('col-12', true)\n    .append('div')\n      .classed('temperature', true)\n      .classed('progress', true)\n    .append('div')\n      .classed('progress-bar', true)\n      .classed('w-30', true)\n      .attr('id', 'temperature')\n      .attr('role', 'progressbar')\n      .attr('aria-valuemin', 0)\n      .attr('aria-valuemax', 100);\n  forceBox.append('div')\n      .classed('col-12', true)\n    .append('div')\n      .classed('stick', true)\n      .classed('mb-1', true)\n      .call(box.checkBox, 'Stick nodes');\n  forceBox.append('div')\n      .classed('col-12', true)\n    .append('div')\n      .classed('restart', true)\n      .classed('mb-1', true)\n      .call(button.buttonBox, 'Activate', 'warning');\n}\n\n\nfunction updateMainControlBox(selection, state) {\n  // Zoom\n  selection.select('.fit')\n      .on('click', function () { state.fitNotifier(); });\n  // Focused view\n  selection.select('.focused')\n      .call(box.updateCheckBox, state.enableFocusedView)\n      .on('change', function () {\n        state.enableFocusedView = box.checkBoxValue(d3.select(this));\n        state.focusedView = box.checkBoxValue(d3.select(this));\n        state.updateComponentNotifier();\n      });\n  // Overlook view\n  selection.select('.overlook')\n      .call(box.updateCheckBox, state.enableOverlookView)\n      .on('change', function () {\n        state.enableOverlookView = box.checkBoxValue(d3.select(this));\n        state.overlookView = box.checkBoxValue(d3.select(this));\n        state.updateComponentNotifier();\n      });\n  // Network threshold\n  const thldGroup = selection.select('.thld-group');\n  const thldFields = state.edges.fields\n    .filter(e => misc.sortType(e.format) !== 'none')\n    .filter(e => !['source', 'target'].includes(e.key));\n  thldGroup.select('.field')\n      .call(lbox.selectBoxItems, thldFields)\n      .call(lbox.updateSelectBox, state.connThldField);\n  thldGroup.select('.thld')\n      .call(box.updateNumberBox, state.currentConnThld);\n  thldGroup.selectAll('.field, .thld')\n      .on('change', function () {\n        const field = lbox.selectBoxValue(thldGroup.select('.field'));\n        const thld = box.numberBoxFloatValue(thldGroup.select('.thld'));\n        state.connThldField = field;\n        state.currentConnThld = thld;\n        thldGroup.select('.logd').dispatch('update');\n        state.updateComponentNotifier();\n      });\n  thldGroup.select('.logd')\n      .on('update', function () {\n        // Calculate edge density\n        const field = state.connThldField;\n        const thld = state.currentConnThld;\n        const numEdges = state.es.filter(e => e[field] >= thld).length;\n        const n = state.ns.length;\n        const combinations = n * (n - 1) / 2;\n        const logD = d3.format('.2f')(Math.log10(numEdges / combinations));\n        d3.select(this).call(box.updateTextBox, logD);\n      })\n      .dispatch('update');\n\n  // Force layout\n  state.tickCallback = (simulation) => {\n    const alpha = simulation.alpha();\n    const isStopped = alpha <= simulation.alphaMin();\n    const progress = parseInt(isStopped ? 0 : alpha * 100);\n    selection.select('.temperature')\n      .select('.progress-bar')\n        .classed('bg-success', isStopped)\n        .classed('bg-warning', !isStopped)\n        .style('width', `${progress}%`)\n        .attr('aria-valuenow', progress);\n  };\n  selection.select('.stick')\n      .call(box.updateCheckBox, !state.forceActive)\n      .on('change', function () {\n        const value = box.checkBoxValue(d3.select(this));\n        state.forceActive = !value;\n        selection.select('.temperature')\n            .style('background-color', value ? '#a3e4d7' : '#e9ecef')\n          .select('.progress-bar')\n            .style('width', `0%`)\n            .attr('aria-valuenow', 0);\n        value ? state.stickNotifier() : state.relaxNotifier();\n        state.updateComponentNotifier();\n      });\n  selection.select('.restart')\n      .on('click', function () {\n        selection.select('.stick')\n            .call(box.updateCheckBox, false)\n            .dispatch('change');\n        state.restartNotifier();\n      });\n}\n\n\nfunction updateNodeColorControlBox(selection, state) {\n  const fieldOptions = state.nodes.fields\n    .filter(e => misc.sortType(e.format) !== 'none');\n  selection\n    .call(cbox.updateColorControlBox, fieldOptions, state.nodeColor)\n    .on('change', function() {\n      state.nodeColor = cbox.colorControlBoxState(selection);\n      if (state.nodeColor.scale === 'ordinal') {\n        const keys = state.nodes.records().map(e => e[state.nodeColor.field]);\n        state.nodeColor.domain = _.uniq(keys).sort();\n      }\n      state.updateNodeAttrNotifier();\n    });\n}\n\n\nfunction updateEdgeColorControlBox(selection, state) {\n  const fieldOptions = state.edges.fields\n    .filter(e => misc.sortType(e.format) !== 'none')\n    .filter(e => !['source', 'target'].includes(e.key));\n  selection\n      .call(cbox.updateColorControlBox, fieldOptions, state.edgeColor)\n      .on('change', function() {\n        state.edgeColor = cbox.colorControlBoxState(selection);\n        if (state.edgeColor.scale === 'ordinal') {\n          const keys = state.edges.records().map(e => e[state.edgeColor.field]);\n          state.edgeColor.domain = _.uniq(keys).sort();\n        }\n        state.updateEdgeAttrNotifier();\n      });\n}\n\n\nfunction updateNodeSizeControlBox(selection, state) {\n  const fieldOptions = state.nodes.fields\n    .filter(e => misc.sortType(e.format) !== 'none');\n  selection\n      .call(cbox.updateSizeControlBox, fieldOptions, state.nodeSize)\n      .on('change', function() {\n        state.nodeSize = cbox.sizeControlBoxState(selection);\n        state.updateNodeAttrNotifier();\n      });\n}\n\n\nfunction updateEdgeWidthControlBox(selection, state) {\n  const fieldOptions = state.edges.fields\n    .filter(e => misc.sortType(e.format) !== 'none')\n    .filter(e => !['source', 'target'].includes(e.key));\n  selection\n      .call(cbox.updateSizeControlBox, fieldOptions, state.edgeWidth)\n      .on('change', function() {\n        state.edgeWidth = cbox.sizeControlBoxState(selection);\n        state.updateEdgeAttrNotifier();\n      });\n}\n\n\nfunction updateNodeLabelControlBox(selection, state) {\n  const fieldOptions = state.nodes.fields\n    .filter(e => misc.sortType(e.format) !== 'none');\n  selection\n      .call(cbox.updateLabelControlBox, fieldOptions,\n            state.nodeLabel, state.nodeLabelColor)\n      .on('change', function() {\n        const values = cbox.labelControlBoxState(selection);\n        state.nodeLabel = values.label;\n        state.nodeLabelColor = values.labelColor;\n        if (state.nodeLabelColor.scale === 'ordinal') {\n          const keys = state.nodes.records()\n            .map(e => e[state.nodeLabelColor.field]);\n          state.nodeLabelColor.domain = _.uniq(keys).sort();\n        }\n        state.updateNodeAttrNotifier();\n      });\n}\n\n\nfunction updateEdgeLabelControlBox(selection, state) {\n  const fieldOptions = state.edges.fields\n    .filter(e => misc.sortType(e.format) !== 'none')\n    .filter(e => !['source', 'target'].includes(e.key));\n  selection\n      .call(cbox.updateLabelControlBox, fieldOptions,\n            state.edgeLabel, state.edgeLabelColor)\n      .on('change', function() {\n        const values = cbox.labelControlBoxState(selection);\n        state.edgeLabel = values.label;\n        state.edgeLabelColor = values.labelColor;\n        if (state.edgeLabelColor.scale === 'ordinal') {\n          const keys = state.edges.records()\n            .map(e => e[state.edgeLabelColor.field]);\n          state.edgeLabelColor.domain = _.uniq(keys).sort();\n        }\n        state.updateEdgeAttrNotifier();\n      });\n}\n\n\nfunction controlBox(selection, state) {\n  // Clean up\n  selection.select('nav').remove();\n  selection.select('.tab-content').remove();\n\n  selection.call(\n    cbox.controlBoxFrame, 'control-frame-nav', 'control-frame-content');\n  const tabs = selection.select('.nav-tabs');\n  const content = selection.select('.tab-content');\n\n  // Main\n  tabs.append('a')\n      .classed('active', true)\n      .attr('aria-selected', 'true')\n      .call(cbox.controlBoxNav, 'control-main', 'Main');\n  content.append('div')\n      .classed('show', true)\n      .classed('active', true)\n      .classed('control-main', true)\n      .call(cbox.controlBoxItem, 'control-main')\n      .call(mainControlBox, state);\n\n  // Color\n  tabs.append('a')\n      .call(cbox.controlBoxNav, 'control-color', 'Color');\n  content.append('div')\n      .classed('control-color', true)\n      .call(cbox.controlBoxItem, 'control-color')\n      .call(cbox.colorControlBox, cscale.colorScales);\n\n  // Size\n  tabs.append('a')\n      .call(cbox.controlBoxNav, 'control-size', 'Size');\n  content.append('div')\n      .classed('control-size', true)\n      .call(cbox.controlBoxItem, 'control-size')\n      .call(cbox.sizeControlBox);\n\n  // Label\n  tabs.append('a')\n      .call(cbox.controlBoxNav, 'control-label', 'Label');\n  content.append('div')\n      .classed('control-label', true)\n      .call(cbox.controlBoxItem, 'control-label')\n      .call(cbox.labelControlBox, cscale.colorScales);\n\n  // Edge color\n  tabs.append('a')\n      .call(cbox.controlBoxNav, 'control-edgecolor', 'eColor');\n  content.append('div')\n      .classed('control-edgecolor', true)\n      .call(cbox.controlBoxItem, 'control-edgecolor')\n      .call(cbox.colorControlBox, cscale.colorScales);\n\n  // Edge width\n  tabs.append('a')\n      .call(cbox.controlBoxNav, 'control-edgewidth', 'eWidth');\n  content.append('div')\n      .classed('control-edgewidth', true)\n      .call(cbox.controlBoxItem, 'control-edgewidth')\n      .call(cbox.sizeControlBox);\n\n  // Edge label\n  tabs.append('a')\n      .call(cbox.controlBoxNav, 'control-edgelabel', 'eLabel');\n  content.append('div')\n      .classed('control-edgelabel', true)\n      .call(cbox.controlBoxItem, 'control-edgelabel')\n      .call(cbox.labelControlBox, cscale.colorScales);\n\n  state.updateControlBoxNotifier = () => {\n    selection.call(updateControlBox, state);\n  };\n}\n\n\nfunction updateControlBox(selection, state) {\n  selection.select('.control-main')\n      .call(updateMainControlBox, state);\n  selection.select('.control-color')\n      .call(updateNodeColorControlBox, state);\n  selection.select('.control-size')\n      .call(updateNodeSizeControlBox, state);\n  selection.select('.control-label')\n      .call(updateNodeLabelControlBox, state);\n  selection.select('.control-edgecolor')\n      .call(updateEdgeColorControlBox, state);\n  selection.select('.control-edgewidth')\n      .call(updateEdgeWidthControlBox, state);\n  selection.select('.control-edgelabel')\n      .call(updateEdgeLabelControlBox, state);\n}\n\n\nexport default {\n  controlBox, updateControlBox\n};\n","\n/** @module component/transform */\n\n\nfunction transform(selection, tx, ty, tk) {\n  selection.select('.field')\n    .attr('transform', `translate(${tx}, ${ty}) scale(${tk})`);\n}\n\n\nfunction resize(selection, state) {\n  const area = selection.node();\n  const width = area.offsetWidth;\n  const height = area.offsetHeight;\n  selection.select('.view')\n      .attr('viewBox', `0 0 ${width} ${height}`)\n    .select('.boundary')\n      .attr('width', width)\n      .attr('height', height);\n  state.setViewBox(width, height);\n  state.resizeNotifier();\n}\n\n\nfunction viewFrame(selection, state) {\n  selection\n    .style('width', '100%')\n    .style('height', '100%');\n  selection.select('.view').remove(); // Clean up\n  selection.append('svg')\n    .classed('view', true);\n  selection.call(resize, state);\n}\n\n\nfunction view(selection, state) {\n  selection\n    .attr('preserveAspectRatio', 'xMinYMin meet')\n    .attr('pointer-events', 'all')\n    .attr('viewBox', `0 0 ${state.viewBox.right} ${state.viewBox.bottom}`)\n    .style('width', '100%')\n    .style('height', '100%');\n\n  // Clean up\n  selection.select('.boundary').remove();\n  selection.select('.field').remove();\n\n  // Boundary\n  selection.append('rect')\n      .classed('boundary', true)\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('width', state.viewBox.right)\n      .attr('height', state.viewBox.bottom)\n      .attr('fill', '#ffffff')\n      .attr('stroke-width', 1)\n      .attr('stroke', '#cccccc');\n  // Field\n  selection.append('g')\n      .classed('field', true)\n      .style('opacity', 1e-6)\n    .transition()\n      .duration(1000)\n      .style('opacity', 1);\n}\n\n\nexport default {\n  transform, resize, viewFrame, view\n};\n","\n/** @module network/component */\n\nimport d3 from 'd3';\n\nimport {default as scale} from '../common/scale.js';\nimport {default as misc} from '../common/misc.js';\n\nimport {default as transform} from '../component/transform.js';\n\n\nconst svgWidth = 180;  //TODO\nconst svgHeight = 180;  //TODO\n\n\nfunction updateNodes(selection, records, showStruct) {\n  const nodes = selection.selectAll('.node')\n    .data(records, d => d.index);\n  nodes.exit().remove();\n  const entered = nodes.enter()\n    .append('g')\n      .attr('class', 'node')\n      .call(updateNodeCoords);\n  entered.append('circle')\n      .attr('class', 'node-symbol');\n  entered.append('g')\n      .attr('class', 'node-content')\n      .attr('transform', `translate(${-svgWidth / 2},${-svgHeight / 2})`);\n  entered.append('text')\n      .attr('class', 'node-label')\n      .attr('x', 0)\n      .attr('text-anchor', 'middle');\n  entered.append('foreignObject')\n      .attr('class', 'node-html')\n    .append('xhtml:div');\n  const merged = entered.merge(nodes);\n  if (showStruct) {\n    merged.select('.node-content').html(d => d.structure);\n  } else {\n    merged.select('.node-content').select('svg').remove();\n  }\n}\n\n\nfunction updateEdges(selection, records) {\n  const edges = selection.selectAll('.link')\n    .data(records, d => `${d.source}_${d.target}`);\n  edges.exit().remove();\n  const entered = edges.enter()\n    .append('g')\n      .attr('class', 'link');\n  entered.append('line')\n      .attr('class', 'edge-line')\n      .style('stroke-opacity', 0.6);\n  entered.append('text')\n      .attr('class', 'edge-label')\n      .attr('text-anchor', 'middle');\n  // draw all components and then\n  entered.call(updateEdgeCoords);\n}\n\n\nfunction updateNodeAttrs(selection, state) {\n  const colorConv = scale.scaleFunction(state.nodeColor);\n  const sizeConv = scale.scaleFunction(state.nodeSize);\n  const labelColorConv = scale.scaleFunction(state.nodeLabelColor);\n  const field = state.nodes.fields\n    .find(e => e.key === state.nodeLabel.field);\n  const textConv = value => {\n    return field.format === 'd3_format'\n      ? misc.formatNum(value, field.d3_format) : value;\n  };\n  selection.selectAll('.node').select('.node-symbol')\n      .attr('r', d => sizeConv(d[state.nodeSize.field]))\n      .style('fill', d => colorConv(d[state.nodeColor.field]));\n  // TODO: tidy up (like rowFactory?)\n  if (field.format === 'html') {\n    const htwidth = 200;\n    const fo = selection.selectAll('.node').select('.node-html');\n    fo.attr('x', -htwidth / 2)\n      .attr('y', d => state.focusedView ? svgWidth / 2 - 10\n        : parseFloat(sizeConv(d[state.nodeSize.field])))\n      .attr('width', htwidth);\n    fo.select('div')\n      .style('font-size', `${state.nodeLabel.size}px`)\n      .style('color', d => labelColorConv(d[state.nodeLabelColor.field]))\n      .style('text-align', 'center')\n      .style('display', state.nodeLabel.visible ? 'block' : 'none')\n      .html(d => d[state.nodeLabel.field]);\n    selection.selectAll('.node').select('.node-label').text('');\n  } else {\n    selection.selectAll('.node').select('.node-label')\n        .attr('font-size', state.nodeLabel.size)\n        .attr('y', d => state.focusedView ? svgWidth / 2 - 10\n          : parseFloat(sizeConv(d[state.nodeSize.field])))\n        .attr('visibility', state.nodeLabel.visible ? 'inherit' : 'hidden')\n        .style('fill', d => labelColorConv(d[state.nodeLabelColor.field]))\n        .text(d => textConv(d[state.nodeLabel.field]));\n    selection.selectAll('.node').select('.node-html div').html('');\n  }\n}\n\n\nfunction updateEdgeAttrs(selection, state) {\n  const colorConv = scale.scaleFunction(state.edgeColor);\n  const widthConv = scale.scaleFunction(state.edgeWidth);\n  const labelColorConv = scale.scaleFunction(state.edgeLabelColor);\n  selection.selectAll('.link').select('.edge-line')\n    .style('stroke', d => colorConv(d[state.edgeColor.field]))\n    .style('stroke-width', d => widthConv(d[state.edgeWidth.field]));\n  selection.selectAll('.link').select('.edge-label')\n    .attr('font-size', state.edgeLabel.size)\n    .attr('visibility', state.edgeLabel.visible ? 'inherit' : 'hidden')\n    .style('fill', d => labelColorConv(d[state.edgeLabelColor.field]))\n    .text(d => d[state.edgeLabel.field]);\n}\n\n\nfunction updateNodeCoords(selection) {\n  selection.attr('transform', d => `translate(${d.x}, ${d.y})`);\n}\n\n\nfunction updateEdgeCoords(selection) {\n  selection.attr('transform', d => `translate(${d.sx}, ${d.sy})`);\n  selection.select('.edge-line')\n    .attr('x1', 0)\n    .attr('y1', 0)\n    .attr('x2', d => d.tx - d.sx)\n    .attr('y2', d => d.ty - d.sy);\n  selection.select('.edge-label')\n    .attr('x', d => (d.tx - d.sx) / 2)\n    .attr('y', d => (d.ty - d.sy) / 2);\n}\n\n\nfunction updateAttrs(selection, state) {\n  selection.select('.nw-nodes').call(updateNodeAttrs, state);\n  selection.select('.nw-edges').call(updateEdgeAttrs, state);\n}\n\n\nfunction updateComponents(selection, state) {\n  const nodesToRender = state.nodesToRender();\n  const numNodes = nodesToRender.length;\n  if (state.enableFocusedView) {\n    state.focusedView = numNodes < state.focusedViewThreshold;\n  }\n  if (state.enableOverlookView) {\n    state.overlookView = numNodes > state.overlookViewThreshold;\n  }\n  const edgesToRender = state.overlookView ? [] : state.edgesToRender();\n  selection.select('.nw-nodes')\n    .call(updateNodes, nodesToRender, state.focusedView);\n  selection.select('.nw-edges')\n    .call(updateEdges, edgesToRender);\n  selection.call(updateAttrs, state);\n}\n\n\nfunction moveNode(selection, x, y) {\n  selection.attr('transform', `translate(${x}, ${y})`);\n}\n\n\nfunction moveEdge(selection, sx, sy, tx, ty) {\n  selection.attr('transform', `translate(${sx}, ${sy})`);\n  selection.select('.edge-line')\n    .attr('x1', 0)\n    .attr('y1', 0)\n    .attr('x2', tx - sx)\n    .attr('y2', ty - sy);\n  selection.select('.edge-label')\n    .attr('x', (tx - sx) / 2)\n    .attr('y', (ty - sy) / 2);\n}\n\n\nfunction move(selection, node, x, y) {\n  const n = d3.select(node).call(moveNode, x, y).datum();\n  selection.select('.nw-edges')\n    .selectAll(\".link\")\n    .filter(d => n.adjacency.map(e => e[1]).includes(d.num))\n    .each(function (d) {\n      if (n.index === d.source.index || n.index === d.source) {\n        d3.select(this).call(moveEdge, x, y, d.tx, d.ty);\n      } else if (n.index === d.target.index || n.index === d.target) {\n        d3.select(this).call(moveEdge, d.sx, d.sy, x, y);\n      }\n    });\n}\n\n\nfunction networkView(selection, state) {\n  selection.call(transform.view, state);\n  const field = selection.select('.field');\n  const edges = field.append('g').classed('nw-edges', true);\n  const nodes = field.append('g').classed('nw-nodes', true);\n\n  // Apply changes in datasets\n  state.updateAllNotifier = () => {\n    state.updateWorkingCopy();\n    state.updateControlBoxNotifier();  // Update selectBox options\n    state.setForceNotifier();\n    state.updateComponentNotifier();\n  };\n  // Apply changes in nodes and edges displayed\n  state.updateComponentNotifier = () => {\n    const coords = state.ns.map(e => ({x: e.x, y: e.y}));\n    state.setAllCoords(coords);\n    selection.call(updateComponents, state);\n    state.updateInteractionNotifier();  // Apply drag events to each nodes\n  };\n  state.updateNodeNotifier = () => {\n    nodes.call(updateNodes, state.nodesToRender());\n  };\n  state.updateEdgeNotifier = () => {\n    edges.call(updateEdges, state.edgesToRender());\n  };\n  state.updateNodeAttrNotifier = () => {\n    nodes.call(updateNodeAttrs, state);\n  };\n  state.updateEdgeAttrNotifier = () => {\n    edges.call(updateEdgeAttrs, state);\n  };\n}\n\n\nexport default {\n  updateNodes, updateEdges, updateNodeCoords, updateEdgeCoords,\n  updateNodeAttrs, updateEdgeAttrs, updateAttrs, updateComponents,\n  move, networkView\n};\n","\n/** @module network/interaction */\n\nimport d3 from 'd3';\n\nimport {default as transform} from '../component/transform.js';\n\nimport {default as component} from './component.js';\n\n\nfunction dragListener(selection, state) {\n  return d3.drag()\n    .on('drag', function () {\n      selection.call(component.move, this, d3.event.x, d3.event.y);\n    })\n    .on('end', function (d) {\n      state.setCoords(d.index, d3.event.x, d3.event.y);\n    });\n}\n\n\nfunction zoomListener(selection, state) {\n  return d3.zoom()\n    .on('zoom', function() {\n      const t = d3.event.transform;\n      selection.call(transform.transform, t.x, t.y, t.k);\n      // Smooth transition\n      if (!state.focusedView) {\n        const p = state.prevTransform;\n        const xMoved = t.x > p.x + 20 || t.x < p.x - 20;\n        const yMoved = t.y > p.y + 20 || t.y < p.y - 20;\n        const zoomIn = t.k > p.k;\n        if (xMoved || yMoved && !zoomIn) {\n          state.setTransform(t.x, t.y, t.k);\n          state.prevTransform = {x: t.x, y: t.y, k: t.k};\n          state.updateComponentNotifier();\n        }\n      }\n    })\n    .on('end', function() {\n      const t = d3.event.transform;\n      state.setTransform(t.x, t.y, t.k);\n      state.prevTransform = {x: t.x, y: t.y, k: t.k};\n      state.updateComponentNotifier();\n    });\n}\n\n\nfunction resume(selection, tf) {\n  selection\n      .call(transform.transform, tf.x, tf.y, tf.k)\n      .call(\n        d3.zoom().transform,\n        d3.zoomIdentity.translate(tf.x, tf.y).scale(tf.k)\n      );\n}\n\n\nfunction setInteraction(selection, state) {\n  state.zoomListener = zoomListener(selection, state);\n  state.dragListener = dragListener(selection, state);\n  state.updateInteractionNotifier = () => {\n    selection.call(state.zoomListener);\n    selection.select('.nw-nodes')\n      .selectAll('.node')\n        .call(state.dragListener);\n    selection.call(resume, state.transform);\n  };\n  state.fitNotifier = () => {\n    state.fitTransform();\n    state.updateComponentNotifier();\n    selection.call(resume, state.transform);\n  };\n}\n\n\nexport default {\n  dragListener, zoomListener, setInteraction\n};\n","\n/** @module network/force */\n\nimport d3 from 'd3';\n\nimport {default as component} from './component.js';\nimport {default as interaction} from './interaction.js';\n\n\nconst forcePresets = {\n  aggregate: d3.forceSimulation()\n    .force('link', d3.forceLink().id(d => d.index).distance(60).strength(1))\n    .force('charge',\n      d3.forceManyBody().strength(-600).distanceMin(15).distanceMax(720))\n    .force('collide', d3.forceCollide().radius(90))\n    .force('x', d3.forceX().strength(0.002))\n    .force('y', d3.forceY().strength(0.002)),\n  tree: d3.forceSimulation()\n    .force('link', d3.forceLink().id(d => d.index).distance(60).strength(2))\n    .force('charge',\n      d3.forceManyBody().strength(-6000).distanceMin(15).distanceMax(720))\n    .force('collide', d3.forceCollide().radius(90))\n    .force('x', d3.forceX().strength(0.0002))\n    .force('y', d3.forceY().strength(0.0002))\n};\n\n\nfunction forceSimulation(preset, width, height) {\n  return forcePresets[preset]\n    .force('center', d3.forceCenter(width / 2, height / 2))\n    .stop();\n}\n\n\nfunction forceDragListener(selection, simulation, state) {\n  return d3.drag()\n    .on('start', () => {\n      if (!d3.event.active) state.relaxNotifier();\n    })\n    .on('drag', d => {\n      d.fx = d3.event.x;\n      d.fy = d3.event.y;\n    })\n    .on('end', d => {\n      if (!d3.event.active) simulation.alphaTarget(0);\n      d.fx = null;\n      d.fy = null;\n    });\n}\n\n\nfunction stick(selection, simulation, state) {\n  simulation.alpha(0).stop();\n  selection.select('.nw-nodes').selectAll('.node')\n    .each(d => {\n      d.fx = d.x;\n      d.fy = d.y;\n    });\n  state.dragListener = interaction.dragListener(selection, state);\n  state.forceActive = false;\n}\n\n\nfunction unstick(selection, simulation, state) {\n  selection.select('.nw-nodes').selectAll('.node')\n    .each(d => {\n      d.fx = null;\n      d.fy = null;\n    });\n  state.dragListener = forceDragListener(selection, simulation, state);\n  state.forceActive = true;\n}\n\n\nfunction activate(selection, simulation, state) {\n  simulation\n    .on('tick', () => {\n      const coords = state.ns.map(e => ({x: e.x, y: e.y}));\n      state.setAllCoords(coords);\n      selection.select('.nw-nodes').selectAll(\".node\")\n        .call(component.updateNodeCoords);\n      selection.select('.nw-edges').selectAll(\".link\")\n        .call(component.updateEdgeCoords);\n      state.tickCallback(simulation);\n    })\n    .on('end', () => {\n      state.updateComponentNotifier();\n      state.tickCallback(simulation);\n    });\n  state.setForceNotifier = () => {\n    simulation.nodes(state.ns)\n      .force('link').links(state.currentEdges());\n    if (state.forceActive) {\n      state.coords ? state.relaxNotifier() : state.restartNotifier();\n    } else {\n      state.stickNotifier();\n    }\n  };\n  state.stickNotifier = () => {\n    selection.call(stick, simulation, state);\n  };\n  state.relaxNotifier = () => {\n    selection.call(unstick, simulation, state);\n    simulation.alpha(0.1).restart();\n  };\n  state.restartNotifier = () => {\n    selection.call(unstick, simulation, state);\n    simulation.alpha(1).restart();\n  };\n}\n\n\nexport default {\n  forceSimulation, activate\n};\n","\n/** @module network */\n\n\nimport NetworkState from './network/state.js';\nimport {default as control} from './network/controlBox.js';\nimport {default as component} from './network/component.js';\nimport {default as force} from './network/force.js';\nimport {default as interaction} from './network/interaction.js';\n\n\nexport default {\n  NetworkState, control, component, force, interaction\n};\n","\n/** @module network/state */\n\nimport Collection from '../common/collection.js';\nimport TransformState from  '../common/transform.js';\nimport {default as idb} from '../common/idb.js';\n\n\nexport default class NetworkState extends TransformState {\n  constructor(view, nodes, edges) {\n    super(1200, 1200, view.fieldTransform);\n\n    /* Settings */\n\n    // Focused view mode (num of nodes displayed are less than the thld)\n    // Show node contents\n    // Disable smooth transition\n    this.focusedViewThreshold = 100;\n    this.enableFocusedView = true;\n    this.focusedView = false;\n    // Overlook view mode (num of nodes displayed are less than the thld)\n    // Hide edges\n    this.overlookViewThreshold = 500;\n    this.enableOverlookView = true;\n    this.overlookView = false;\n\n    /* Attributes */\n\n    this.viewID = view.viewID || null;\n    this.storeID = view.storeID || null;\n    this.name = view.name;\n\n    this.nodes = new Collection(nodes);\n    this.edges = new Collection(edges);\n\n    /* Appearance */\n    const defaultNodeField = 'index';\n    const defaultEdgeField = 'weight';\n\n    this.nodeColor = {\n      field: defaultNodeField, color: 'nodeDefault',\n      scale: 'linear', domain: [0, 1],\n      range: ['#7fffd4', '#7fffd4'], unknown: '#7fffd4'\n    };\n    Object.assign(this.nodeColor, view.nodeColor || {});\n\n    this.nodeSize = {\n      field: defaultNodeField, scale: 'linear', domain: [1, 1],\n      range: [40, 40], unknown: 40\n    };\n    Object.assign(this.nodeSize, view.nodeSize || {});\n\n    this.nodeLabel = {\n      field: defaultNodeField, size: 20, visible: false\n    };\n    Object.assign(this.nodeLabel, view.nodeLabel || {});\n\n    this.nodeLabelColor = {\n      field: defaultNodeField, color: 'monoblack',\n      scale: 'linear', domain: [1, 1],\n      range: ['#333333', '#333333'], unknown: '#cccccc'\n    };\n    Object.assign(this.nodeLabelColor, view.nodeLabelColor || {});\n\n    this.edgeColor = {\n      field: defaultEdgeField, color: 'monogray',\n      scale: 'linear', domain: [0, 1],\n      range: ['#999999', '#999999'], unknown: '#cccccc'\n    };\n    Object.assign(this.edgeColor, view.edgeColor || {});\n\n    this.edgeWidth = {\n      field: defaultEdgeField, scale: 'linear', domain: [0.5, 1],\n      range: [10, 10], unknown: 1\n    };\n    Object.assign(this.edgeWidth, view.edgeWidth || {});\n\n    this.edgeLabel = {\n      field: defaultEdgeField, size: 12, visible: false\n    };\n    Object.assign(this.edgeLabel, view.edgeLabel || {});\n\n    this.edgeLabelColor = {\n      field: defaultEdgeField, color: 'monoblack',\n      scale: 'linear', domain: [1, 1],\n      range: ['#333333', '#333333'], unknown: '#cccccc'\n    };\n    Object.assign(this.edgeLabelColor, view.edgeLabelColor || {});\n\n    // Connection threshold\n    this.connThldField = view.connThldField || defaultEdgeField;\n    this.minConnThld = view.minConnThld;\n    this.currentConnThld = view.currentConnThld || view.minConnThld;\n\n    // Force\n    this.coords = view.coords;\n    this.forceActive = !this.coords;\n    this.forcePreset = view.forcePreset || 'aggregate';\n\n    // Event listeners\n    this.zoomListener = null;\n    this.dragListener = null;\n\n    // Event notifiers\n    this.updateAllNotifier = null;\n    this.updateComponentNotifier = null;\n    this.updateNodeNotifier = null;\n    this.updateEdgeNotifier = null;\n    this.updateNodeAttrNotifier = null;\n    this.updateEdgeAttrNotifier = null;\n    this.updateControlBoxNotifier = () => {};\n    this.updateInteractionNotifier = () => {};\n    this.fitNotifier = () => {};\n    this.setForceNotifier = () => {};\n    this.stickNotifier = () => {};\n    this.relaxNotifier = () => {};\n    this.restartNotifier = () => {};\n    this.tickCallback = () => {};\n\n    // Working copies\n    // D3.force does some destructive operations\n    this.ns = null;\n    this.es = null;\n  }\n\n  updateWorkingCopy() {\n    if (this.ns) {\n      this.coords = this.ns.map(e => ({x: e.x, y: e.y}));\n    }\n    this.ns = JSON.parse(JSON.stringify(this.nodes.records()));\n    this.ns.forEach(n => { n.adjacency = []; });\n    this.es = JSON.parse(JSON.stringify(this.edges.records()));\n    this.es.forEach((e, i) => {\n      e.num = i;  // e.index will be overwritten by d3-force\n      this.ns[e.source].adjacency.push([e.target, i]);\n      this.ns[e.target].adjacency.push([e.source, i]);\n    });\n    if (this.coords) {\n      this.setAllCoords(this.coords);\n    }\n  }\n\n  setBoundary() {\n    const xs = this.ns.map(e => e.x);\n    const ys = this.ns.map(e => e.y);\n    this.boundary.top = Math.min.apply(null, ys);\n    this.boundary.left = Math.min.apply(null, xs);\n    this.boundary.bottom = Math.max.apply(null, ys);\n    this.boundary.right = Math.max.apply(null, xs);\n    // this.showBoundary(); // debug\n  }\n\n  setAllCoords(coordsList) {\n    this.ns.forEach(n => {\n      n.x = coordsList[n.index].x;\n      n.y = coordsList[n.index].y;\n      // this.es can be changed by forceSimulation so use adjacency\n      n.adjacency.forEach(e => {\n        const nbr = e[0];\n        const edge = e[1];\n        if (n.index < nbr) {\n          this.es[edge].sx = coordsList[n.index].x;\n          this.es[edge].sy = coordsList[n.index].y;\n        } else {\n          this.es[edge].tx = coordsList[n.index].x;\n          this.es[edge].ty = coordsList[n.index].y;\n        }\n      });\n    });\n    this.setBoundary();\n  }\n\n  setCoords(n, x, y) {\n    this.ns[n].x = x;\n    this.ns[n].y = y;\n    this.ns[n].adjacency.forEach(e => {\n      const nbr = e[0];\n      const edge = e[1];\n      if (n < nbr) {\n        this.es[edge].sx = x;\n        this.es[edge].sy = y;\n      } else {\n        this.es[edge].tx = x;\n        this.es[edge].ty = y;\n      }\n    });\n    this.setBoundary();\n  }\n\n  nodesToRender() {\n    return this.ns.filter(\n      e => e.y > this.focusArea.top && e.x > this.focusArea.left\n        && e.y < this.focusArea.bottom && e.x < this.focusArea.right\n    );\n  }\n\n  currentEdges() {\n    return this.es.filter(e => e[this.connThldField] >= this.currentConnThld);\n  }\n\n  edgesToRender() {\n    return this.currentEdges().filter(\n      e => this.focusArea.top < Math.max(e.sy, e.ty)\n        && this.focusArea.left < Math.max(e.sx, e.tx)\n        && this.focusArea.bottom > Math.min(e.sy, e.ty)\n        && this.focusArea.right > Math.min(e.sx, e.tx)\n    );\n  }\n\n  save() {\n    return idb.updateItem(this.storeID, item => {\n      const ni = item.dataset\n        .findIndex(e => e.collectionID === this.nodes.collectionID);\n      item.dataset[ni] = this.nodes.export();\n      const ei = item.dataset\n        .findIndex(e => e.collectionID === this.edges.collectionID);\n      item.dataset[ei] = this.edges.export();\n      const vi = item.views\n        .findIndex(e => e.viewID === this.viewID);\n      item.views[vi] = this.export();\n    });\n  }\n\n  export() {\n    return {\n      $schema: \"https://mojaie.github.io/kiwiii/specs/network_v1.0.json\",\n      viewID: this.viewID,\n      name: this.name,\n      viewType: \"network\",\n      nodes: this.nodes.collectionID,\n      edges: this.edges.collectionID,\n      nodeColor: this.nodeColor,\n      nodeSize: this.nodeSize,\n      nodeLabel: this.nodeLabel,\n      nodeLabelColor: this.nodeLabelColor,\n      edgeColor: this.edgeColor,\n      edgeWidth: this.edgeWidth,\n      edgeLabel: this.edgeLabel,\n      edgeLabelColor: this.edgeLabelColor,\n      connThldField: this.connThldField,\n      currentConnThld: this.currentConnThld,\n      minConnThld: this.minConnThld,\n      fieldTransform: this.transform,\n      coords: this.coords\n    };\n  }\n}\n"],"names":["sortType","fmt","includes","formatNum","value","d3format","Number","isNaN","parseFloat","d3","format","partialMatch","query","target","toString","toUpperCase","indexOf","uuidv4","replace","c","r","Math","random","statusConv","Queued","In progress","Aborting","Aborted","Completed","Failure","dataTypeConv","datatable","connection","v07_to_v08_nodes","json","fields","columns","map","e","sort","id","name","dataType","schemaVersion","revision","status","records","taskCount","searchCount","doneCount","searchDoneCount","resultCount","recordCount","progress","execTime","created","startDate","responseDate","v10_nodes","reference","convertNetwork","data","edges","hasOwnProperty","nodes","nodeFields","snp","fieldTransform","snapshot","nodePositions","nodeColor","nodeSize","nodeLabel","edge","scale","field","find","key","column","domain","range","unknown","size","text","visible","nodeContent","structure","label","nodeTableId","networkThreshold","v07_to_v08_edges","nodesID","idx_converter","forEach","i","index","_structure","_index","source","v08_graph","nodeContentVisible","schemeCategory20","nodeLabelColor","edgeVisible","edgeWidth","edgeLabel","threshold","coords","params","v10_edges","$schema","convertPackage","specs","now","Date","isNW","v08_nodes","width","height","convertTable","views","dataset","push","collectionID","contents","workflowID","workflow","viewID","viewType","rows","sortOrder","filterText","checkpoints","type","date","description","networkThresholdCutoff","filter","view","minConnThld","currentConnThld","edgeColor","color","edgeLabelColor","schema","items","idb","Dexie","getAllItems","orderBy","reverse","toArray","updateItem","storeID","updateFunc","where","equals","modify","catch","err","console","error","version","stores","reset","delete","then","getItem","first","deleteItem","getView","appendView","viewObj","item","pos","findIndex","splice","updateView","_","isFunction","deleteView","bin","Object","entries","entry","getAllCollections","flatten","coll","getCollection","collID","colls","updateCollection","collObj","importItem","legacy","misc","slice","sessionStarted","put","newDatagrid","response","toLocaleString","timeZone","newNetwork","nodesName","edgesID","baseURL","get","url","q","keys","length","JSON","stringify","fetch","credentials","res","Promise","reject","Error","statusText","resolve","blob","post","formdata","method","body","serverStatus","server","singleToMulti","mapping","newMapping","m","mappingToTable","mp","concat","rcd","f","tableToMapping","table","ignore","row","csvToMapping","csvString","lines","split","header","shift","headerIdx","h","line","values","k","Array","apply","fd","uniqBy","Collection","[object Object]","this","autoIndex","content","addField","fs","mapper","func","command","fetcher","all","sum","some","min","TransformState","transform","fieldWidth","fieldHeight","viewBox","top","right","bottom","left","focusArea","focusAreaMargin","boundary","x","y","prevTransform","resizeNotifier","tx","ty","tk","margin","setFocusArea","vh","vw","vr","bh","bw","isPortrait","adjustH","adjustV","setTransform","select","colorScales","colors","schemePaired","schemeSet2","schemePastel2","schemeSet3","types","scaleLinear","scaleLog","scaleQuantize","scaleOrdinal","scaleFunction","state","cscale","mid","scaleFunc","clamp","d","result","undefined","isD3Format","notation","numberBoxIntValue","selection","parseInt","property","numberBoxFloatValue","textBox","classed","append","attr","updateTextBox","textBoxValue","readonlyBox","textareaBox","updateTextareaBox","updateTextareaPlaceholder","placeholder","textareaBoxValue","textareaBoxLines","checkBox","box","updateCheckBox","checked","checkBoxValue","numberBox","max","step","updateNumberBox","numberIntValid","valid","style","numberFloatValid","colorBox","on","event","stopPropagation","updateColorBox","colorBoxValue","fileInputBox","accept","clearFileInput","remove","fileInputBoxValue","monocolorBar","group","colorBar","monocolor","bicolor","call","grad","tricolor","categorical","sw","custom","setSize","checklistBoxValue","selectAll","setSelectedColorScale","selected","datum","shape","selectBox","selectBoxItems","options","exit","enter","updateSelectBox","selectBoxValue","checklistBox","checklistBoxItems","listitems","form","updateChecklistBox","each","anyChecked","colorScaleBox","dropdown","colorScaleBoxItems","dispatch","bubbles","updateColorScaleBox","colorScaleBoxValue","colorScaleBoxItem","rangeBoxValid","v","rangeBox","t","updateRangeBox","rangeBoxValues","colorRangeBox","updateColorRangeBox","colorRangeBoxValues","scaleBoxGroupValid","rbox","lbox","validScale","colorRangeGroup","collapse","updateColorRangeGroup","customRange","cs","rg","customScale","rtype","rboxValues","colorRangeGroupValue","colorScale","colorScaleType","scaleBoxGroup","updateScaleBoxGroup","scaleBoxGroupValue","colorControlBox","fieldName","updateColorControlBox","fieldOptions","colorState","colorControlValid","noScale","scaleValid","colorControlBoxState","sizeRangeValid","unk","validUnk","sizeControlValid","labelControlValid","sizeControlBox","updateSizeControlBox","sizeState","sizeControlBoxState","labelControlBox","labelGroup","updateLabelControlBox","labelState","labelControlBoxState","labelColor","controlBoxFrame","navID","contentID","controlBoxNav","controlBoxItem","iconBaseURL","buttonBox","menuButton","menuButtonLink","icon","menuModalLink","dropdownMenuButton","button","dropdownMenuItem","dropdownMenuModal","dropdownMenuFile","node","click","dropdownMenuFileValue","files","mainControlBox","viewModes","thldGroup","forceBox","updateMainControlBox","fitNotifier","enableFocusedView","focusedView","updateComponentNotifier","enableOverlookView","overlookView","thldFields","connThldField","thld","numEdges","es","n","ns","combinations","logD","log10","tickCallback","simulation","alpha","isStopped","alphaMin","forceActive","stickNotifier","relaxNotifier","restartNotifier","updateNodeColorControlBox","cbox","uniq","updateNodeAttrNotifier","updateEdgeColorControlBox","updateEdgeAttrNotifier","updateNodeSizeControlBox","updateEdgeWidthControlBox","updateNodeLabelControlBox","updateEdgeLabelControlBox","updateControlBox","controlBox","tabs","updateControlBoxNotifier","resize","area","offsetWidth","offsetHeight","setViewBox","viewFrame","transition","duration","svgWidth","svgHeight","updateNodes","showStruct","entered","updateNodeCoords","merged","merge","html","updateEdges","updateEdgeCoords","updateNodeAttrs","colorConv","sizeConv","labelColorConv","htwidth","fo","d3_format","textConv","updateEdgeAttrs","widthConv","sx","sy","updateAttrs","updateComponents","nodesToRender","numNodes","focusedViewThreshold","overlookViewThreshold","edgesToRender","moveNode","moveEdge","move","adjacency","num","networkView","updateAllNotifier","updateWorkingCopy","setForceNotifier","setAllCoords","updateInteractionNotifier","updateNodeNotifier","updateEdgeNotifier","dragListener","drag","component","setCoords","zoomListener","zoom","p","xMoved","yMoved","zoomIn","resume","tf","zoomIdentity","translate","setInteraction","fitTransform","forcePresets","aggregate","forceSimulation","force","forceLink","distance","strength","forceManyBody","distanceMin","distanceMax","forceCollide","radius","forceX","forceY","tree","stick","stop","fx","fy","interaction","unstick","active","alphaTarget","forceDragListener","NetworkState","super","assign","forcePreset","parse","xs","ys","coordsList","nbr","setBoundary","currentEdges","ni","export","ei","vi","control","preset","forceCenter","activate","links","restart"],"mappings":"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"}